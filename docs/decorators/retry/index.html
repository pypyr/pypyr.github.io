<!doctype html><html lang=en dir=ltr prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>retry decorator | pypyr</title>
<meta name=description content="Retry a pipeline step up to a configurable maximum retry count with a configurable sleep interval between retries.">
<link rel=stylesheet href=https://pypyr.io/css/styles.min.99e596997d7f6f9df9ec7bb05cdd3e8c62dd9d484bbe6858e05e90aebf2c1ec2.css integrity="sha256-meWWmX1/b5357HuwXN0+jGLdnUhLvmhY4F6Qrr8sHsI=">
<link rel=stylesheet href=https://pypyr.io/css/code-highlight.min.78f63f1d4f45beaf423efd3dc8e6914c2abdca1b5391cd91368a32efecd9d7e3.css integrity="sha256-ePY/HU9Fvq9CPv09yOaRTCq9yhtTkc2RNooy7+zZ1+M=">
<script defer src=https://pypyr.io/js/script.min.45064b9f444bbb1631eeef9f9ef2be6985c45b5f06bddb6644ce049732706a06.js integrity="sha256-RQZLn0RLuxYx7u+fnvK+aYXEW18GvdtmRM4ElzJwagY="></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700%7cRoboto+Mono:400,400i&display=swap" rel=stylesheet>
<link rel=canonical href=https://pypyr.io/docs/decorators/retry/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147150909-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-147150909-1')</script>
<meta property="og:description" content="Retry a pipeline step up to a configurable maximum retry count with a configurable sleep interval between retries.">
<meta property="og:image" content="https://pypyr.io/images/1.91x1/pypyr-taskrunner-yaml-pipeline-automation-1200x628.5aa6465b3b9d2ca8d0d5a9f794ba7f379c522a8ba503129f2a35d2479ea2452d.png">
<meta property="og:image:alt" content="pypyr is an open-source task-runner for automation pipelines defined in simple human-readable yaml.">
<meta property="og:image:height" content="628">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:site_name" content="pypyr technical documentation">
<meta property="og:title" content="Automatically retry a task-runner pipeline step.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://pypyr.io/docs/decorators/retry/">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:site content="@pypyrpipes">
<script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@id":"https://pypyr.io/#organization","@type":"Organization","name":"pypyr","url":"https://pypyr.io/","description":"The pypyr project is a free open-source task-runner cli \u0026 python api for automation pipelines.","logo":{"@type":"ImageObject","url":"https://pypyr.io/images/pypyr-taskrunner-logo-square.63875e43ff40d8ae40e93a6043b4328b962f54f52974aaa27cedec52220de665.svg","height":112,"width":112},"sameAs":["https://github.com/pypyr/","https://twitter.com/pypyrpipes/","https://pypi.org/user/pypyr/","https://hub.docker.com/u/pypyr/","https://en.gravatar.com/pypyr/"]},{"@type":"TechArticle","author":{"@type":"Person","name":"pypyr contributor"},"articleSection":"decorators","dateModified":"2021-02-02T11:40:03Z","datePublished":"2020-07-13T13:37:06+01:00","headline":"Automatically retry a task-runner pipeline step.","image":[{"@type":"ImageObject","url":"https://pypyr.io/images/1x1/pypyr-taskrunner-yaml-pipeline-automation-1200x1200.52764d3c6f40232b3cdc33f5b8fbaeadad56cc310c8dd5588d30828296b5290d.png","height":1200,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/4x3/pypyr-taskrunner-yaml-pipeline-automation-1200x900.e8e70443377aeb11c190835e8d2ed0c844d31a82a0c2e8a744a9999cd03e0de9.png","height":900,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/16x9/pypyr-taskrunner-yaml-pipeline-automation-1920x1080.cc9ae11626c8312e087058adb13bfff702162ce39c355065170c1b87850f3034.png","height":1080,"width":1920}],"inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https://pypyr.io/docs/decorators/retry/"},"publisher":{"@id":"https://pypyr.io/#organization"},"url":"https://pypyr.io/docs/decorators/retry/","wordCount":2779}]}</script>
<link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.925deabb48d91a80924b5d04ff56d2b8f42ba1d1e1438cb7d8948cce1138208c.png>
<link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.b869433d27c4679a5fbce03a8489268a539cbc781259bff14618ae2f018334e6.png>
<link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.8bcd9f870e0a86445e0505ce6e816b76a40b08a06e2dcd1ec1f90c395ecbeaf6.png>
<link rel=manifest href=/favicons/site.3dad2bd5063ad6bc11f741ea28adf4df8b9370196f6e64af6789cf181cef05c6.webmanifest>
<link rel="shortcut icon" href=/favicons/favicon.4a2a3dffd965a7c571df0375e35f59307bc72adc08e3ef7021d5d5f02e6ef5a8.ico>
<meta name=msapplication-TileColor content="#00aba9">
<meta name=msapplication-config content="/favicons/browserconfig.bbdaec7f39b7bd1f2d6bc484afdd0c7246e3af9c5b45d91198d8a3b42e024e1f.xml">
<meta name=theme-color content="#121212">
</head>
<body class=docs-grid>
<header class="header elevation-01">
<a href=/ class=top-nav-logo aria-label=home>
<img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo">
</a>
<nav class=top-nav-links aria-label="top navigation">
<ul><li><a href=/docs/ class=top-active>docs</a></li><li><a href=/updates/>updates</a></li><li><a href=/topics/>topics</a></li><li><a href=https://twitter.com/pypyrpipes/><span class=top-nav-links-pre><svg viewBox="0 0 250 203.18"><title>twitter link</title><use xlink:href="https://pypyr.io/images/twitter-logo.4bee83a61c7b1a567b9a00ea1ac9388de3b16ffbffac9e228f998a5411894c59.svg#twitter-logo"/></svg></span></a></li><li><a href=https://github.com/pypyr/pypyr/><span class=top-nav-links-pre><svg viewBox="0 0 477 97.41"><title>github repo</title><use xlink:href="https://pypyr.io/images/github-mark-and-logo.5df312655c6a99a4953b544d02b13a948fa4d66bda21e772206f0ed96663f05b.svg#github-mark-and-logo"/></svg></span></a></li></ul>
</nav>
</header>
<button id=show-leftnav class="neutral-button icon-button primary-button"><svg class="show-leftnav-chevron"><title>open main navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg>
</button>
<nav id=leftnavmenu class="leftnavmenu elevation-03" aria-label="Primary Navigation">
<button id=hide-leftnav class="neutral-button icon-button"><svg class="hide-leftnav-chevron"><title>close navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg>
</button>
<ul class=leftnavroot>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>getting started</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/getting-started/>overview</a>
</li>
<li>
<a href=/docs/getting-started/installation/>install pypyr</a>
</li>
<li>
<a href=/docs/getting-started/run-your-first-pipeline/>run your first pipeline</a>
</li>
<li>
<a href=/docs/getting-started/basic-concepts/>basic concepts</a>
</li>
<li>
<a href=/docs/getting-started/variables/>variables</a>
</li>
<li>
<a href=/docs/getting-started/conditional-logic/>conditional logic</a>
</li>
<li>
<a href=/docs/getting-started/loops/>loops</a>
</li>
<li>
<a href=/docs/getting-started/error-handling/>error handling</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>cli</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/cli/>overview</a>
</li>
<li>
<a href=/docs/cli/run-a-pipeline/>run a pipeline</a>
</li>
<li>
<a href=/docs/cli/custom-args/>custom args</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>pipelines</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/pipelines/>overview</a>
</li>
<li>
<a href=/docs/pipelines/pipeline-structure/>pipeline structure</a>
</li>
<li>
<a href=/docs/pipelines/lookup-order/>lookup order</a>
</li>
<li>
<a href=/docs/pipelines/builtin-pipelines/>built-in pipelines</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>context parsers</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/context-parsers/>overview</a>
</li>
<li>
<a href=/docs/context-parsers/dict/>dict</a>
</li>
<li>
<a href=/docs/context-parsers/json/>json</a>
</li>
<li>
<a href=/docs/context-parsers/jsonfile/>jsonfile</a>
</li>
<li>
<a href=/docs/context-parsers/keys/>keys</a>
</li>
<li>
<a href=/docs/context-parsers/keyvaluepairs/>keyvaluepairs</a>
</li>
<li>
<a href=/docs/context-parsers/list/>list</a>
</li>
<li>
<a href=/docs/context-parsers/string/>string</a>
</li>
<li>
<a href=/docs/context-parsers/yamlfile/>yamlfile</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron nav-chevron-down"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>decorators</span>
</span>
</button>
<ul class="nested expand">
<li>
<a href=/docs/decorators/>overview</a>
</li>
<li>
<a href=/docs/decorators/comment/>comment</a>
</li>
<li>
<a href=/docs/decorators/description/>description</a>
</li>
<li>
<a href=/docs/decorators/foreach/>foreach</a>
</li>
<li>
<a href=/docs/decorators/in/>in</a>
</li>
<li>
<a href=/docs/decorators/onerror/>onError</a>
</li>
<li class=currentpage>
<a href=/docs/decorators/retry/>retry</a>
</li>
<li>
<a href=/docs/decorators/run/>run</a>
</li>
<li>
<a href=/docs/decorators/skip/>skip</a>
</li>
<li>
<a href=/docs/decorators/swallow/>swallow</a>
</li>
<li>
<a href=/docs/decorators/while/>while</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/steps/>overview</a>
</li>
<li>
<a href=/docs/steps/assert/>assert</a>
</li>
<li>
<a href=/docs/steps/call/>call</a>
</li>
<li>
<a href=/docs/steps/cmd/>cmd</a>
</li>
<li>
<a href=/docs/steps/contextclear/>contextclear</a>
</li>
<li>
<a href=/docs/steps/contextclearall/>contextclearall</a>
</li>
<li>
<a href=/docs/steps/contextcopy/>contextcopy</a>
</li>
<li>
<a href=/docs/steps/contextmerge/>contextmerge</a>
</li>
<li>
<a href=/docs/steps/contextsetf/>contextsetf</a>
</li>
<li>
<a href=/docs/steps/debug/>debug</a>
</li>
<li>
<a href=/docs/steps/default/>default</a>
</li>
<li>
<a href=/docs/steps/echo/>echo</a>
</li>
<li>
<a href=/docs/steps/env/>env</a>
</li>
<li>
<a href=/docs/steps/envget/>envget</a>
</li>
<li>
<a href=/docs/steps/fetchjson/>fetchjson</a>
</li>
<li>
<a href=/docs/steps/fetchyaml/>fetchyaml</a>
</li>
<li>
<a href=/docs/steps/fileformat/>fileformat</a>
</li>
<li>
<a href=/docs/steps/fileformatjson/>fileformatjson</a>
</li>
<li>
<a href=/docs/steps/fileformatyaml/>fileformatyaml</a>
</li>
<li>
<a href=/docs/steps/filereplace/>filereplace</a>
</li>
<li>
<a href=/docs/steps/filewritejson/>filewritejson</a>
</li>
<li>
<a href=/docs/steps/filewriteyaml/>filewriteyaml</a>
</li>
<li>
<a href=/docs/steps/glob/>glob</a>
</li>
<li>
<a href=/docs/steps/jsonparse/>jsonparse</a>
</li>
<li>
<a href=/docs/steps/jump/>jump</a>
</li>
<li>
<a href=/docs/steps/now/>now</a>
</li>
<li>
<a href=/docs/steps/nowutc/>nowutc</a>
</li>
<li>
<a href=/docs/steps/pathcheck/>pathcheck</a>
</li>
<li>
<a href=/docs/steps/py/>py</a>
</li>
<li>
<a href=/docs/steps/pyimport/>pyimport</a>
</li>
<li>
<a href=/docs/steps/pype/>pype</a>
</li>
<li>
<a href=/docs/steps/pypyrversion/>pypyrversion</a>
</li>
<li>
<a href=/docs/steps/safeshell/>safeshell</a>
</li>
<li>
<a href=/docs/steps/shell/>shell</a>
</li>
<li>
<a href=/docs/steps/stop/>stop</a>
</li>
<li>
<a href=/docs/steps/stoppipeline/>stoppipeline</a>
</li>
<li>
<a href=/docs/steps/stopstepgroup/>stopstepgroup</a>
</li>
<li>
<a href=/docs/steps/tar/>tar</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>substitutions</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/substitutions/>overview</a>
</li>
<li>
<a href=/docs/substitutions/format-string/>format string</a>
</li>
<li>
<a href=/docs/substitutions/jsonify/>jsonify</a>
</li>
<li>
<a href=/docs/substitutions/py-strings/>py string</a>
</li>
<li>
<a href=/docs/substitutions/sic-strings/>sic string</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>plugins</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/>overview</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>aws</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/aws/>overview</a>
</li>
<li>
<a href=/docs/plugins/aws/authentication/>authentication</a>
</li>
<li>
<a href=/docs/plugins/aws/substitutions/>substitutions</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/aws/steps/>overview</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/client/>client</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/ecswaitprep/>ecswaitprep</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/s3fetchjson/>s3fetchjson</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/s3fetchyaml/>s3fetchyaml</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/wait/>wait</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/waitfor/>waitfor</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>slack</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/slack/>overview</a>
</li>
<li>
<a href=/docs/plugins/slack/authentication/>authentication</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/slack/steps/>overview</a>
</li>
<li>
<a href=/docs/plugins/slack/steps/send/>send</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>api</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/api/>overview</a>
</li>
<li>
<a href=/docs/api/context-parser/>context parser</a>
</li>
<li>
<a href=/docs/api/pipeline-loader/>pipeline loader</a>
</li>
<li>
<a href=/docs/api/retry-backoff/>retry backoff</a>
</li>
<li>
<a href=/docs/api/run-pipeline/>run pipeline</a>
</li>
<li>
<a href=/docs/api/step/>step</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>contributing</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/contributing/>overview</a>
</li>
<li>
<a href=/docs/contributing/contribute-to-pypyr/>contribute to pypyr</a>
</li>
<li>
<a href=/docs/contributing/developers-guide/>developer's guide for pypyr</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>thank you</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/thank-you/>overview</a>
</li>
<li>
<a href=/docs/thank-you/built-with-hugo/>built with hugo</a>
</li>
<li>
<a href=/docs/thank-you/dependencies/>dependencies</a>
</li>
</ul>
</li>
</ul>
</nav>
<div class="docs-content content-grid">
<ol class=breadcrumb vocab="http://schema.org/" typeof="BreadcrumbList">
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/><span property="name">pypyr</span></a>
<meta property="position" content="1">
</li>
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/docs/><span property="name">docs</span></a>
<meta property="position" content="2">
</li>
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/docs/decorators/><span property="name">decorators</span></a>
<meta property="position" content="3">
</li>
<li property="itemListElement" typeof="ListItem">
<span property="name">retry</span>
<meta property="position" content="4">
</li></ol>
<aside class="grid-toc elevation-02">
<h6 id=table-of-contents>on this page</h6>
<nav id=TableOfContents>
<ol>
<li><a href=#automatic-retries>automatic retries</a></li>
<li><a href=#retry-with-sleep>retry with sleep</a></li>
<li><a href=#infinite-retry>infinite retry</a></li>
<li><a href=#retry-entire-sequence-of-steps>retry entire sequence of steps</a></li>
<li><a href=#backoff-algorithms>backoff algorithms</a>
<ol>
<li><a href=#fixed>fixed</a>
<ol>
<li><a href=#single-fixed-interval>single fixed interval</a></li>
<li><a href=#fixed-list-of-sleep-intervals>fixed list of sleep intervals</a></li>
</ol>
</li>
<li><a href=#jitter>jitter</a></li>
<li><a href=#linear>linear</a>
<ol>
<li><a href=#restrict-linear-backoff-growth>restrict linear backoff growth</a></li>
</ol>
</li>
<li><a href=#linear-jitter>linear jitter</a></li>
<li><a href=#exponential>exponential</a>
<ol>
<li><a href=#restrict-exponential-backoff-growth>restrict exponential backoff growth</a></li>
<li><a href=#change-exponent-base>change exponent base</a></li>
</ol>
</li>
<li><a href=#exponential-jitter>exponential jitter</a></li>
</ol>
</li>
<li><a href=#only-retry-specific-error-types>only retry specific error types</a>
<ol>
<li><a href=#only-retry-on-specific-errors>only retry on specific errors</a></li>
<li><a href=#stop-processing-on-specific-error-type>stop processing on specific error type</a></li>
</ol>
</li>
<li><a href=#common--dynamic-retry-configuration>common & dynamic retry configuration</a>
<ol>
<li><a href=#format-expressions>format expressions</a></li>
<li><a href=#yaml-anchors--references>yaml anchors & references</a></li>
<li><a href=#combine-yaml-anchors--format-expressions>combine yaml anchors & format expressions</a></li>
</ol>
</li>
</ol>
</nav>
</aside>
<main class=grid-main>
<article>
<h1 id=retry>retry <a href=#retry class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h1>
<h2 id=automatic-retries>automatic retries <a href=#automatic-retries class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Retries the step until it succeeds. If you do not set <code>retry</code>, pypyr will not
retry the step automatically. When you do set <code>retry</code>, pypyr will retry whatever
step it is without you having to do anything else.</p>
<p>The retry iteration counter is <code>retryCounter</code>. You can use this as
usual for any context value in a formatting string expression as
<code>{retryCounter}</code>.</p>
<p>These are all the available configuration parameters for retry:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>retry</span><span class=p>:</span><span class=w> </span><span class=c># optional. Retry step until it doesn&#39;t raise an error.</span><span class=w>
</span><span class=w>  </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=c># max times to retry. integer. Defaults None (infinite).</span><span class=w>
</span><span class=w>  </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># sleep between retries, in seconds. Decimals allowed. Defaults 0.</span><span class=w>
</span><span class=w>  </span><span class=nt>stopOn</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;ValueError&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;MyModule.SevereError&#39;</span><span class=p>]</span><span class=w> </span><span class=c># Stop retry on these errors. Defaults None (retry all).</span><span class=w>
</span><span class=w>  </span><span class=nt>retryOn</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;TimeoutError&#39;</span><span class=p>]</span><span class=w> </span><span class=c># Only retry these errors. Defaults None (retry all).</span><span class=w>
</span><span class=w>  
</span><span class=w>  </span><span class=c># back-off configuration</span><span class=w>
</span><span class=w>  </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>fixed</span><span class=w> </span><span class=c># optional. Default &#39;fixed&#39;.</span><span class=w>
</span><span class=w>  </span><span class=nt>backoffArgs</span><span class=p>:</span><span class=w> </span><span class=c># optional. User defined args for custom back-off. Default None.</span><span class=w>
</span><span class=w>    </span><span class=nt>arg1</span><span class=p>:</span><span class=w> </span><span class=l>value 1</span><span class=w>
</span><span class=w>    </span><span class=nt>arg2</span><span class=p>:</span><span class=w> </span><span class=l>value 2</span><span class=w>
</span><span class=w>  </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>123</span><span class=w> </span><span class=c># optional. Max sleep in seconds. Default None (infinite).</span><span class=w>
</span><span class=w>  </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=m>123.45</span><span class=w> </span><span class=c># optional. Jitter Range Coefficient. Default 0.</span><span class=w>
</span></code></pre></div><p>All inputs support <a href=https://pypyr.io/docs/substitutions/>substitutions</a>, so you can
<a href=#common--dynamic-retry-configuration>assign values to these properties
dynamically</a> at run-time.</p>
<p>If you reach <code>max</code> retry count while the step still errors, pypyr will raise
the last error and stop further pipeline processing.</p>
<p>If you set <a href=https://pypyr.io/docs/decorators/swallow/>swallow</a> to <code>True</code>, pypyr will swallow the
error after max retries exhausts.</p>
<h2 id=retry-with-sleep>retry with sleep <a href=#retry-with-sleep class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Use <code>sleep</code> to pause in between retries. Sleep is a decimal with the unit
seconds. If you do not set <code>sleep</code>, the default wait between retries is 0s.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./retry-sleep.yaml</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>BEGIN</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>assert will fail until the 3rd retry.</span><span class=w>
</span><span class=w>             </span><span class=l>will sleep 0.5s between retries.</span><span class=w>
</span><span class=w>             </span><span class=kc>on</span><span class=w> </span><span class=l>3rd retry, step succeeds, and </span><span class=w>
</span><span class=w>             </span><span class=l>pypyr proceeds to next step.</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>4</span><span class=w>
</span><span class=w>      </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>0.5</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span>!<span class=l>py retryCounter == 3</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>END. you&#39;ll see me only after previous step succeeds.</span><span class=w>
</span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr retry-sleep
BEGIN
retry: ignoring error because retryCounter &lt; max.
AssertionError: assert retryCounter == 3 evaluated to False.
retry: ignoring error because retryCounter &lt; max.
AssertionError: assert retryCounter == 3 evaluated to False.
END. you&#39;ll see me only after previous step succeeds.
</code></pre></div><p>You can also use a list of numbers for <code>sleep</code>, where each retry will sleep for
the duration in seconds of the next value from the list:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>assert will fail until the 3rd retry.</span><span class=w>
</span><span class=w>           </span><span class=l>will sleep 2s on 1st retry,</span><span class=w>
</span><span class=w>           </span><span class=l>sleep 4s after 2nd retry,</span><span class=w>
</span><span class=w>           </span><span class=kc>on</span><span class=w> </span><span class=l>3rd retry, step succeeds, and </span><span class=w>
</span><span class=w>           </span><span class=l>pypyr proceeds to next step.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>4</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>2</span><span class=p>,</span><span class=w> </span><span class=m>4</span><span class=p>,</span><span class=w> </span><span class=m>6</span><span class=p>]</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span>!<span class=l>py retryCounter == 3</span><span class=w>
</span></code></pre></div><p>If you want to vary the sleep interval between retries based on a formula you
can use different <a href=#backoff-algorithms>retry backoff algorithms</a>. The <a href=#fixed-list-of-sleep-intervals>list
sleep input option</a> is available on the default
<a href=#fixed>fixed retry backoff</a> strategy.</p>
<h2 id=infinite-retry>infinite retry <a href=#infinite-retry class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Set <code>max</code> to <code>0</code> or <code>null</code> to retry indefinitely until the step succeeds.</p>
<p>It&rsquo;s up to you to interrupt an infinite loop. If you&rsquo;re using the cli, you can
hit CTRL+C to interrupt and exit pypyr.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./retry-infinite.yaml</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>CTRL+C to exit</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=l>or null means infinite retry.</span><span class=w>
</span><span class=w>             </span><span class=l>since sleep not set, will retry</span><span class=w>
</span><span class=w>             </span><span class=l>immediately with no delay between</span><span class=w>
</span><span class=w>             </span><span class=l>retries.</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># 0 or null means indefinitely</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>this won&#39;t run because the previous step always errors.</span><span class=w>
</span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr retry-infinite
pypyr.steps.assert: CTRL+C to exit
retry: ignoring error because retryCounter &lt; max.
AssertionError: assert False evaluated to False.
retry: ignoring error because retryCounter &lt; max.
AssertionError: assert False evaluated to False
^C

$ echo $?
130
</code></pre></div>
<h2 id=retry-entire-sequence-of-steps>retry entire sequence of steps <a href=#retry-entire-sequence-of-steps class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can retry any step, whether it is your own or a built-in pypyr step. If you
retry on a <a href=https://pypyr.io/docs/steps/call/>call</a> step, you retry an entire
sequence of steps inside a step-group. This lets you retry multiple steps as a
unit.</p>
<p>Similarly, if you invoke another pipeline from a parent pipeline with
<a href=https://pypyr.io/docs/steps/pype/>pype</a>, you can retry the entire child pipeline
if it raises an error.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./retry-call</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>begin</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.call</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>all of retry_me will retry 3X if it returns an error.</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>call</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>groups</span><span class=p>:</span><span class=w> </span><span class=l>retry_me</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>you won&#39;t see me, because the previous step always errs.</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>retry_me</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>      </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>running retry {retryCounter}</span><span class=w>
</span><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>      </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w>
</span><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>      </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>you won&#39;t see me, because the previous step always errs.</span><span class=w>
</span></code></pre></div><p>This will result in:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr retry-call
begin
running retry 1
Error while running step pypyr.steps.assert at pipeline yaml line: 20, col: 7
retry: ignoring error because retryCounter &lt; max
AssertionError: assert False evaluated to False.
running retry 2
Error while running step pypyr.steps.assert at pipeline yaml line: 20, col: 7
retry: ignoring error because retryCounter &lt; max
AssertionError: assert False evaluated to False.
running retry 3
Error while running step pypyr.steps.assert at pipeline yaml line: 20, col: 7
Error while running step pypyr.steps.call at pipeline yaml line: 6, col: 5
Something went wrong. Will now try to run on_failure.

AssertionError: assert False evaluated to False.
</code></pre></div>
<h2 id=backoff-algorithms>backoff algorithms <a href=#backoff-algorithms class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can increase (or decrease) the waiting times between retries by using
different retry back-off strategies & apply a random jitter to the calculated
sleep interval to reduce contention.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=c># max times to retry. integer. Defaults None (infinite).</span><span class=w>
</span><span class=w>  </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># sleep between retries, in seconds. Decimals allowed. Defaults 0.</span><span class=w>
</span><span class=w>  
</span><span class=w>  </span><span class=c># back-off configuration</span><span class=w>
</span><span class=w>  </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>&lt;&lt;backoff-algorithm-name-here&gt;&gt;</span><span class=w>
</span><span class=w>  </span><span class=nt>backoffArgs</span><span class=p>:</span><span class=w> </span><span class=c># optional. User defined args for custom back-off. Default None.</span><span class=w>
</span><span class=w>    </span><span class=nt>arg1</span><span class=p>:</span><span class=w> </span><span class=l>value 1</span><span class=w>
</span><span class=w>    </span><span class=nt>arg2</span><span class=p>:</span><span class=w> </span><span class=l>value 2</span><span class=w>
</span><span class=w>  </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>123</span><span class=w> </span><span class=c># optional. Max sleep in seconds. Default None (infinite).</span><span class=w>
</span><span class=w>  </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=m>123.45</span><span class=w> </span><span class=c># optional. Jitter Range Coefficient. Default 0.</span><span class=w>
</span></code></pre></div><p>pypyr has the obvious common backoff retry strategies built in, but you can also
code your own <a href=https://pypyr.io/docs/api/retry-backoff/>custom retry back-off algorithm</a> without too much fuss.</p>
<p><code>n</code> is the iteration counter.</p>
<table>
<thead>
<tr>
<th>backoff</th>
<th>formula</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=#fixed>fixed</a></td>
<td><code>sleep</code> (single or list)</td>
</tr>
<tr>
<td><a href=#jitter>jitter</a></td>
<td><code>random_between(jrc*sleep, sleep)</code></td>
</tr>
<tr>
<td><a href=#linear>linear</a></td>
<td><code>n*sleep</code></td>
</tr>
<tr>
<td><a href=#linear-jitter>linearjitter</a></td>
<td><code>random_between(jrc*linear(n), linear(n)</code></td>
</tr>
<tr>
<td><a href=#exponential>exponential</a></td>
<td><code>(base**n)*sleep</code></td>
</tr>
<tr>
<td><a href=#exponential-jitter>exponentialjitter</a></td>
<td><code>random_between(jrc*exponential(n), exponential(n))</code></td>
</tr>
</tbody>
</table>
<p>For all jitter strategies, the resulting sleep value is a random number between
the calculated interval, and the product of the calculated interval and the
<code>jrc</code> (jitter range coefficient). If you do not set <code>jrc</code>, by default it is 0.
This means that by default jitter algorithms will pick a random value anywhere
between 0 and the calculated interval. If you do not want your random range to
retry too soon by picking a number too close to 0, you can use the <code>jrc</code> to
control the lower bound - for example, given a 10 second calculated sleep
interval:</p>
<ul>
<li><code>jrc</code> of 0 (the default) will randomize between 0 and 10.</li>
<li><code>jrc</code> of 0.2 will randomize between 2 and 10</li>
</ul>
<p>If you want to restrict the growth of the sleep interval, set <code>sleepMax</code> to the
maximum sleep interval you want to allow in seconds. This is handy especially
for exponential growth, which could well get too large too soon for optimal
throughput. If you do not set <code>sleepMax</code>, by default the sleep interval will
grow infinitely. (okay, strictly speaking until Python runs out of numbers, but
if you&rsquo;re bumping into this limit you got other probs.)</p>
<p>All of the builtin backoff strategies restrict the sleep interval to less than
<code>sleepMax</code>, except in the case of the jitter style backoff strategies, where
<code>jrc > 1</code> can potentially result in an interval exceeding <code>sleepMax</code>. This is
because pypyr calculates jitter AFTER it applies the <code>sleepMax</code> limit to the
calculated value. This allows you to use the jrc to jitter the retry sleep
interval over a range higher or lower than the calculated value.</p>
<h3 id=fixed>fixed <a href=#fixed class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>The default backoff strategy uses fixed, or static, values. pypyr sleeps for a
fixed interval between retries with no calculation to increment or decrement
that interval.</p>
<p>You can use two different types of input for <code>sleep</code> with the <code>fixed</code> backoff
strategy:</p>
<h4 id=single-fixed-interval>single fixed interval <a href=#single-fixed-interval class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h4><p>In this example pypyr will retry the command 3 times, each time sleeping for
the same fixed interval.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>1.5</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl xyz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><ul>
<li><code>sleep</code> is a single float number.</li>
<li>Each retry iteration will sleep for this same number in seconds.</li>
</ul>
<p>You do not need to set <code>backoff</code> if you want to use <code>fixed</code>, because it is the
default if you don&rsquo;t specify anything. You can if you want to, though:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>fixed</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>1.5</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl xyz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div>
<h4 id=fixed-list-of-sleep-intervals>fixed list of sleep intervals <a href=#fixed-list-of-sleep-intervals class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h4><p>In this example pypyr will retry the command 5 times, each time sleeping for
the next value in the list:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>0</span><span class=p>,</span><span class=w> </span><span class=m>1</span><span class=p>,</span><span class=w> </span><span class=m>1.5</span><span class=p>,</span><span class=w> </span><span class=m>2</span><span class=p>,</span><span class=w> </span><span class=m>3</span><span class=p>,</span><span class=w> </span><span class=m>5</span><span class=p>]</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><ul>
<li><code>sleep</code> is a list of floats/numbers.</li>
<li>Each retry interval will sleep for the next number from the list</li>
<li>When the input list runs out of numbers, pypyr will keep on re-using the last
number on the list for subsequent iterations.</li>
</ul>
<h3 id=jitter>jitter <a href=#jitter class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>Jitter adds randomization on top of <a href=#fixed>fixed</a>.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 3X, sleep on a random interval between 0-1.5s each try.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>jitter</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>1.5</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl xyz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>Since <code>jitter</code> extends <code>fixed</code>, you can also use the fixed list style input for
<code>sleep</code>:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 7X, sleep on a random interval between 0-n each try,</span><span class=w>
</span><span class=w>             </span><span class=l>where n is the next number from the sleep list.</span><span class=w>
</span><span class=w>             </span><span class=kc>n</span><span class=w> </span><span class=l>is, in turn - 2, 4, 6, 8, 8, 8</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>jitter</span><span class=w>
</span><span class=w>      </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>7</span><span class=w>
</span><span class=w>      </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>2</span><span class=p>,</span><span class=w> </span><span class=m>4</span><span class=p>,</span><span class=w> </span><span class=m>6</span><span class=p>,</span><span class=w> </span><span class=m>8</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl xyz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>Be default jitter picks a random decimal number between 0 and the value for
<code>sleep</code> for that retry iteration. If you want to narrow this randomization
range, to prevent retries happening too close to each other if random ends up
giving a number very close to 0, you can use the Jitter Range Coefficient (jrc).</p>
<p>Simply put: pypyr will pause for a random number between <code>jrc*sleep</code> and
<code>sleep</code>.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 3X, sleep randomly between 2-10s on each retry.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>jitter</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span><span class=w>    </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=m>0.2</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl xyz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>When you use <code>jrc</code> with a list style input, the <code>jrc*sleep</code> applies to the sleep
interval for the current iteration:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 7X, sleep randomly between 0.1*sleep and sleep,</span><span class=w>
</span><span class=w>           </span><span class=l>where sleep is the next value from the list for each retry.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>jitter</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>7</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>2</span><span class=p>,</span><span class=w> </span><span class=m>4</span><span class=p>,</span><span class=w> </span><span class=m>6</span><span class=p>,</span><span class=w> </span><span class=m>8</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=m>0.5</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>In this case the sleep interval (in seconds) for each retry in turn jitters
between:</p>
<ul>
<li>retry #1: 1 -> 2</li>
<li>retry #2: 2 -> 4</li>
<li>retry #3: 3 -> 6</li>
<li>retry #4: 4 -> 8</li>
<li>retry #5: 4 -> 8</li>
<li>retry #6: 4 -> 8</li>
</ul>
<p>Notice that when the list runs out of numbers, pypyr re-uses the last number
in the list for the subsequent sleep intervals.</p>
<h3 id=linear>linear <a href=#linear class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>The linear backoff algorithm sleeps for <code>sleep * n</code> in between retries, where
<code>n</code> is the iteration counter.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X, at interval (sleep * n)</span><span class=w>
</span><span class=w>           </span><span class=l>retry wait time is, in turn - 2, 4, 6, 8.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>linear</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div>
<h4 id=restrict-linear-backoff-growth>restrict linear backoff growth <a href=#restrict-linear-backoff-growth class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h4><p>You can restrict the growth of the effective sleep interval with <code>sleepMax</code>:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X, with interval between retries = (sleep * n)</span><span class=w>
</span><span class=w>           </span><span class=l>retry wait time is, in turn - 3, 6, 8.5, 8.5</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>linear</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>8.5</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div>
<h3 id=linear-jitter>linear jitter <a href=#linear-jitter class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>Jitter on top of the <a href=#linear>linear</a> backoff algorithm. Each retry pauses for
a random interval between <code>jrc*linear(n)</code> and <code>linear(n)</code>, where <code>n</code> is the
iteration counter.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X, sleep randomly between 0 and (sleep * n) on each retry</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>linearjitter</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>4</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>In this case the sleep interval (in seconds) for each retry in turn jitters
between:</p>
<ul>
<li>retry #1: 0 -> 4</li>
<li>retry #2: 0 -> 8</li>
<li>retry #3: 0 -> 12</li>
<li>retry #4: 0 -> 16</li>
</ul>
<p>You can combine <code>linearjitter</code> with <code>sleepMax</code> to restrict the growth of the
effective sleep interval. Use <code>jrc</code> to change the jitter range. You can use both
<code>sleepMax</code> and <code>jrc</code>, just one or the other, or neither.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 6X, sleep randomly between 0 and (sleep * n) on each retry.</span><span class=w>
</span><span class=w>           </span><span class=l>do not go beyond 14s sleep between retries.</span><span class=w>
</span><span class=w>           </span><span class=l>each sleep interval jitters between (0.5*(5*n)) and (5*n).</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>linearjitter</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>6</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>14</span><span class=w>
</span><span class=w>    </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=m>0.5</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>In this case the sleep interval (in seconds) for each retry in turn jitters
between:</p>
<ul>
<li>retry #1: 2.5 -> 5</li>
<li>retry #2: 5 -> 10</li>
<li>retry #3: 7 -> 14</li>
<li>retry #4: 7 -> 14</li>
<li>retry #5: 7 -> 14</li>
</ul>
<h3 id=exponential>exponential <a href=#exponential class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>Retry with an exponential backoff on the sleep coefficient, increasing the wait
time between retries exponentially as given by the formula <code>(base**n)*sleep</code>,
where <code>n</code> is the iteration counter.</p>
<p>By default the exponential base is 2.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X, with interval between retries growing base 2 exponential</span><span class=w>
</span><span class=w>            </span><span class=l>sleep in seconds between retries, in turn, is - 2, 4, 8, 16. </span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>exponential</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div>
<h4 id=restrict-exponential-backoff-growth>restrict exponential backoff growth <a href=#restrict-exponential-backoff-growth class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h4><p>Use <code>sleepMax</code> to restrict the effective maximum retry sleep interval. This lets
you configure your retries to achieve optimal throughput, because often a pure
exponential will result in too long backoff intervals too soon.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X, with interval between retries (2**n)*2.5).</span><span class=w>
</span><span class=w>            </span><span class=l>sleep in seconds between retries, in turn, is - 5, 10, 20, 21.</span><span class=w>
</span><span class=w>            </span><span class=l>do not allow sleep more than 21s.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>exponential</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>2.5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>21</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div>
<h4 id=change-exponent-base>change exponent base <a href=#change-exponent-base class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h4><p>By default the exponent base is 2. You can change the base for exponentiation
using the <code>base</code> input argument:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X, with interval between retries (3**n)*sleep).</span><span class=w>
</span><span class=w>            </span><span class=l>do not allow sleep more than 41s.</span><span class=w>
</span><span class=w>            </span><span class=l>sleep in seconds between retries, in turn, is - 3, 9, 27, 41.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>exponential</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>41</span><span class=w>
</span><span class=w>    </span><span class=nt>backoffArgs</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>base</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div>
<h3 id=exponential-jitter>exponential jitter <a href=#exponential-jitter class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>Use the ready-made exponential backoff with randomized jitter on any retrying
command or step without having to write code.</p>
<p>This adds jitter on top of the <a href=#exponential>exponential</a> backoff strategy, so
all the inputs to the underlying <code>exponential</code> such as <code>sleepMax</code> and <code>base</code> are
available to <code>exponentialjitter</code> also.</p>
<p>For each retry iteration, pypyr will, in order:</p>
<ul>
<li>calculate the <code>[raw exponential result]</code> with formula <code>(base**n)*sleep</code>, where
<code>n</code> is the iteration counter</li>
<li>proceed with the lesser of <code>sleepMax</code> or the <code>[raw exponential result]</code>. Call
this the <code>[capped result]</code></li>
<li>jitter by picking a random interval between <code>jrc*[capped result]</code> and the
<code>[capped result]</code>.</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X.</span><span class=w>
</span><span class=w>           </span><span class=l>sleep randomly between 0 and ((2**n)*sleep)) on each retry.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>exponentialjitter</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>You can use the Jitter Range Coefficient <code>jrc</code> to narrow the randomization range
and prevent intervals too close to 0:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retry 5X.</span><span class=w>
</span><span class=w>            </span><span class=l>sleep randomly between 0 and (2**n)*sleep) on each retry.</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>exponentialjitter</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span><span class=w>    </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=m>0.5</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>curl httpz://manifestly-wrong-url</span><span class=w>
</span></code></pre></div><p>In this case the sleep interval (in seconds) for each retry in turn jitters
between:</p>
<ul>
<li>retry #1: 2 -> 4</li>
<li>retry #2: 4 -> 8</li>
<li>retry #3: 8 -> 16</li>
<li>retry #4: 16 -> 32</li>
</ul>
<p>Use a <code>jrc</code> greater than <code>1</code> to jitter over a range higher than the capped
result.</p>
<h2 id=only-retry-specific-error-types>only retry specific error types <a href=#only-retry-specific-error-types class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>When you set neither <code>stopOn</code> nor <code>retryOn</code>, all types of errors will retry.
This is the default behavior.</p>
<p>If you specify <code>stopOn</code>, errors listed in <code>stopOn</code> will stop retry processing
and raise an error. Errors not listed in <code>stopOn</code> will retry.</p>
<p>If you specify <code>retryOn</code>, ONLY errors listed in <code>retryOn</code> will retry.</p>
<p><code>max</code> evaluates before <code>stopOn</code> and <code>retryOn</code>.</p>
<p><code>stopOn</code> supersedes <code>retryOn</code>.</p>
<p>For builtin python errors, specify the bare error name for <code>stopOn</code> and
<code>retryOn</code>, e.g <code>ValueError</code>, <code>KeyError</code>.</p>
<p>For all other errors, use <code>module.errorname</code>, e.g <code>mypackage.mymodule.myerror</code></p>
<h3 id=only-retry-on-specific-errors>only retry on specific errors <a href=#only-retry-on-specific-errors class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./retry-retryon.yaml</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.py</span><span class=w>
</span><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>this step will retry infinitely until the cmd does not return </span><span class=w>
</span><span class=w>                 </span><span class=l>an error unless an unexpected error that is NOT in retryOn </span><span class=w>
</span><span class=w>                 </span><span class=l>occurs.</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>retries 1 &amp; 2 raise ValueError, </span><span class=w>
</span><span class=w>             </span><span class=l>retry 3 raise KeyError.</span><span class=w>
</span><span class=w>             </span><span class=l>KeyError is not in retryOn, so will quit step reporting failure.</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=c># will ONLY retry these errors. All other stop processing.</span><span class=w>
</span><span class=w>      </span><span class=nt>retryOn</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;KeyError&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;pypyr.errors.ContextError&#39;</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>py</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span><span class=sd>        if retryCounter == 3:
</span><span class=sd>          raise ValueError(&#34;this won&#39;t retry!&#34;)
</span><span class=sd>        else:
</span><span class=sd>          raise KeyError(&#39;this will retry&#39;)</span><span class=w>        
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>this won&#39;t run because the previous step always errors.</span><span class=w>
</span></code></pre></div><p>This will result in:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text> $ pypyr retry-retryon
this step will retry infinitely until the cmd does not return an error.
retry: ignoring error because retryCounter &lt; max.
KeyError: &#39;this will retry&#39;
retry: ignoring error because retryCounter &lt; max.
KeyError: &#39;this will retry&#39;
ValueError not in retryOn. Raising error and exiting retry.
Error while running step pypyr.steps.py at pipeline yaml line: 4, col: 7
Something went wrong. Will now try to run on_failure.

ValueError: Booom!

$ echo $?
255
</code></pre></div>
<h3 id=stop-processing-on-specific-error-type>stop processing on specific error type <a href=#stop-processing-on-specific-error-type class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># pypyr retry-stopon</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.py</span><span class=w>
</span><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>this step will retry infinitely until the cmd does not return </span><span class=w>
</span><span class=w>                 </span><span class=l>an error or until a StopOn error happens.</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=c># will stop retry on these errors. All others will carry on retry processing.</span><span class=w>
</span><span class=w>      </span><span class=nt>stopOn</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;ValueError&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;pypyr.errors.ContextError&#39;</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>py</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span><span class=sd>        if retryCounter == 3:
</span><span class=sd>          raise ValueError(&#39;this will STOP processing!&#39;)
</span><span class=sd>        else:
</span><span class=sd>          raise KeyError(&#39;this will retry&#39;)</span><span class=w>        
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>this won&#39;t run because the previous step always errors.</span><span class=w>
</span></code></pre></div><p>This will result in:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr retry-stopon
this step will retry infinitely until the cmd does not return an error.
retry: ignoring error because retryCounter &lt; max.
KeyError: &#39;this will retry&#39;
retry: ignoring error because retryCounter &lt; max.
KeyError: &#39;this will retry&#39;
ValueError in stopOn. Raising error and exiting retry.
Error while running step pypyr.steps.py at pipeline yaml line: 4, col: 7
Something went wrong. Will now try to run on_failure.

ValueError: this will STOP processing!
</code></pre></div>
<h2 id=common--dynamic-retry-configuration>common & dynamic retry configuration <a href=#common--dynamic-retry-configuration class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can use the same retry configuration for multiple steps, or set retry
configuration dynamically based on run-time values, or do both at the same time.</p>
<h3 id=format-expressions>format expressions <a href=#format-expressions class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>Use pypyr <a href=https://pypyr.io/docs/substitutions/>format substitutions</a> to assign
values to retry dynamically based on run-time parameters:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.contextsetf</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>contextSetf</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>my_sleep</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>2</span><span class=p>,</span><span class=w> </span><span class=m>4</span><span class=p>,</span><span class=w> </span><span class=m>8</span><span class=p>]</span><span class=w>
</span><span class=w>      </span><span class=nt>my_max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>      </span><span class=nt>my_sleep_max</span><span class=p>:</span><span class=w> </span><span class=m>6</span><span class=w>
</span><span class=w>
</span><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>  </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_sleep}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_max}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_sleep_max}&#39;</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span>!<span class=l>py retryCounter == 3</span><span class=w>
</span></code></pre></div>
<h3 id=yaml-anchors--references>yaml anchors & references <a href=#yaml-anchors--references class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>You can create a yaml anchor with an <code>&</code> for a retry strategy and then re-use
that in multiple steps with a yaml reference with a <code>*</code>:</p>
<p>In this example, both the steps will use the same retry configuration as given
in <code>&commonRetryWithFixedList</code>.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>common</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>retry1</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;commonRetryWithFixedList</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>2</span><span class=p>,</span><span class=w> </span><span class=m>4</span><span class=p>,</span><span class=w> </span><span class=m>8</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>6</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w> </span><span class=cp>*commonRetryWithFixedList</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span>!<span class=l>py retryCounter == 3</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w> </span><span class=cp>*commonRetryWithFixedList</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span>!<span class=l>py retryCounter == 2</span><span class=w>
</span></code></pre></div><p>You can create and reference multiple different retry strategies in the same
pipeline this way.</p>
<h3 id=combine-yaml-anchors--format-expressions>combine yaml anchors & format expressions <a href=#combine-yaml-anchors--format-expressions class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>You can share common retry configuration and still use format substitution
expressions to configure those values dynamically at run-time.</p>
<p>In this example, the first <code>contextsetf</code> step sets the values that the shared
retry configuration under <code>&commonRetryWithSubstitutions</code> will substitute at
runtime:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>common</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>retry1</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;commonRetryFixedList</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>2</span><span class=p>,</span><span class=w> </span><span class=m>4</span><span class=p>,</span><span class=w> </span><span class=m>8</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>6</span><span class=w>
</span><span class=w>
</span><span class=w>  </span><span class=nt>retry2</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;commonRetryWithSubstitutions</span><span class=w>
</span><span class=w>    </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{base3_exponential_retry[sleep]}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{base3_exponential_retry[max]}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{base3_exponential_retry[sleepMax]}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{base3_exponential_retry[jrc]}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{base3_exponential_retry[backoff]}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>backoffArgs</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>base</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{base3_exponential_retry[base]}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.contextsetf</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>contextSetf</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>base3_exponential_retry</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>          </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>          </span><span class=nt>sleepMax</span><span class=p>:</span><span class=w> </span><span class=m>8.5</span><span class=w>
</span><span class=w>          </span><span class=nt>jrc</span><span class=p>:</span><span class=w> </span><span class=m>0.5</span><span class=w>
</span><span class=w>          </span><span class=nt>backoff</span><span class=p>:</span><span class=w> </span><span class=l>exponentialjitter</span><span class=w>
</span><span class=w>          </span><span class=nt>base</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w> </span><span class=cp>*commonRetryWithSubstitutions</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span>!<span class=l>py retryCounter == 3</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.contextmerge</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>change sleep for next retry.</span><span class=w>
</span><span class=w>             </span><span class=l>all other retry values stay the same.</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>contextMerge</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>base3_exponential_retry</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=nt>sleep</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.assert</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w> </span><span class=cp>*commonRetryWithSubstitutions</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>assert</span><span class=p>:</span><span class=w> </span>!<span class=l>py retryCounter == 2</span><span class=w>
</span></code></pre></div><p>If you change any of the values under <code>base3_exponential_retry</code> subsequent
retries will use the new updated values, so you can parameterize the same base
retry configuration with different values for different steps in the same
pipeline.</p>
</article>
<section class="see-also elevation-02">
<h2>see also</h2>
<ul>
<li><a href=/docs/decorators/while/>while loop decorator</a></li>
<li><a href=/docs/decorators/swallow/>swallow decorator</a></li>
<li><a href=/docs/decorators/onerror/>onError decorator</a></li>
<li><a href=/docs/decorators/foreach/>foreach loop decorator</a></li>
<li><a href=/docs/getting-started/loops/>loops</a></li>
</ul>
</section>
</main>
<aside class="grid-taxonomy elevation-02">
<section class=page-taxonomy aria-label="related topics">
<h6>topics</h6>
<ul id=topics class=small-list>
<li><a href=https://pypyr.io/topics/error-handling/ class=muted-with-hover>error handling</a></li>
<li><a href=https://pypyr.io/topics/loops/ class=muted-with-hover>loops</a></li>
<li><a href=https://pypyr.io/topics/pipeline-format/ class=muted-with-hover>pipeline format</a></li>
</ul>
</section>
</aside>
<aside class="grid-improve elevation-02" aria-labelledby=feedback>
<h6 id=feedback>feedback</h6>
<ul class=small-list>
<li><a href=https://github.com/pypyr/docs/edit/master/content/docs/decorators/retry.md class=muted-with-hover>edit me</a></li>
<li><a href="https://github.com/pypyr/docs/issues/new?title=docs%20issue:retry%20decorator&body=File:%20[retry%20decorator]%28https://pypyr.io/docs/decorators/retry/%29" class=muted-with-hover>report typo</a></li>
<li><a href="https://github.com/pypyr/pypyr/issues/new?title=Re:%20retry%20decorator&labels=bug" class=muted-with-hover>report bug!</a></li>
</ul>
</aside>
<div class="page-git-info elevation-02">
<small class=small-block>last updated on <time datetime=2021-02-02T11:40:03Z>2021-02-02 11:40</time>.</small>
</div>
</div>
<footer class="footer elevation-01">
<a href=/ class=top-nav-logo aria-label=home>
<img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo">
</a>
<div class=col-1fr-centered>
<ul class=footer-social-links aria-label="social media links"><li>
<a href=https://twitter.com/pypyrpipes/ class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 400 400"><title>twitter link</title><use xlink:href="https://pypyr.io/icons/twitter-social-icon-circle-white.d715a98bf8d7170b3d2603d836ca675616731d85583c13d23ec468905e77c59a.svg#twitter-icon"/></svg></div>
<small>twitter</small>
</a>
</li><li>
<a href=https://github.com/pypyr/pypyr/ class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 32.58 31.77"><title>github link</title><use xlink:href="https://pypyr.io/icons/github-icon.778bc8065fb7e8d1e7109b270cfbd86e15e05bb16ebff30d261935e4bc1560bd.svg#github-icon"/></svg></div>
<small>github</small>
</a>
</li><li>
<a href=https://github.com/pypyr/pypyr/discussions class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 16 16"><title>discussion forum link</title><use xlink:href="https://pypyr.io/icons/discussions.a9f14951d81276183aaea73b6d616db95326f8f16350b221d9d6d48ee5a0b16e.svg#discussions-icon"/></svg>
</div>
<small>forum</small>
</a>
</li></ul>
<ul class=footer-notices-links aria-label="legal notices"><li>
<a href=/legal/privacy-notice class=muted-with-hover>
<small>privacy</small>
</a>
</li><li>
<a href=/legal/licensing class=muted-with-hover>
<small>licensing</small>
</a>
</li><li>
<a href=/press-kit class=muted-with-hover>
<small>press</small>
</a>
</li></ul>
</div>
</footer>
<div class=bottom-spacer aria-hidden=true></div>
<div id=disabled-state-overlay aria-hidden=true class="disabled-state-overlay hide-overlay"></div>
</body>
</html>