<!doctype html><html lang=en dir=ltr prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>format string interpolation | pypyr</title>
<meta name=description content="String interpolation with substitution tokens are for easy type-safe value replacement inside a pipeline workflow.">
<link rel=stylesheet href=https://pypyr.io/css/styles.min.99e596997d7f6f9df9ec7bb05cdd3e8c62dd9d484bbe6858e05e90aebf2c1ec2.css integrity="sha256-meWWmX1/b5357HuwXN0+jGLdnUhLvmhY4F6Qrr8sHsI=">
<link rel=stylesheet href=https://pypyr.io/css/code-highlight.min.78f63f1d4f45beaf423efd3dc8e6914c2abdca1b5391cd91368a32efecd9d7e3.css integrity="sha256-ePY/HU9Fvq9CPv09yOaRTCq9yhtTkc2RNooy7+zZ1+M=">
<script defer src=https://pypyr.io/js/script.min.45064b9f444bbb1631eeef9f9ef2be6985c45b5f06bddb6644ce049732706a06.js integrity="sha256-RQZLn0RLuxYx7u+fnvK+aYXEW18GvdtmRM4ElzJwagY="></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700%7cRoboto+Mono:400,400i&display=swap" rel=stylesheet>
<link rel=canonical href=https://pypyr.io/docs/substitutions/format-string/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147150909-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-147150909-1')</script>
<meta property="og:description" content="String interpolation with substitution tokens are for easy type-safe value replacement inside a pipeline workflow.">
<meta property="og:image" content="https://pypyr.io/images/1.91x1/pypyr-taskrunner-yaml-pipeline-automation-1200x628.5aa6465b3b9d2ca8d0d5a9f794ba7f379c522a8ba503129f2a35d2479ea2452d.png">
<meta property="og:image:alt" content="pypyr is an open-source task-runner for automation pipelines defined in simple human-readable yaml.">
<meta property="og:image:height" content="628">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:site_name" content="pypyr technical documentation">
<meta property="og:title" content="Format string interpolation expressions in the pypyr task-runner.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://pypyr.io/docs/substitutions/format-string/">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:site content="@pypyrpipes">
<script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@id":"https://pypyr.io/#organization","@type":"Organization","name":"pypyr","url":"https://pypyr.io/","description":"The pypyr project is a free open-source task-runner cli \u0026 python api for automation pipelines.","logo":{"@type":"ImageObject","url":"https://pypyr.io/images/pypyr-taskrunner-logo-square.63875e43ff40d8ae40e93a6043b4328b962f54f52974aaa27cedec52220de665.svg","height":112,"width":112},"sameAs":["https://github.com/pypyr/","https://twitter.com/pypyrpipes/","https://pypi.org/user/pypyr/","https://hub.docker.com/u/pypyr/","https://en.gravatar.com/pypyr/"]},{"@type":"TechArticle","author":{"@type":"Person","name":"pypyr contributor"},"articleSection":"substitutions","dateModified":"2020-10-28T21:01:13Z","datePublished":"2020-06-13T21:38:57+01:00","headline":"Format string interpolation expressions in the pypyr task-runner.","image":[{"@type":"ImageObject","url":"https://pypyr.io/images/1x1/pypyr-taskrunner-yaml-pipeline-automation-1200x1200.52764d3c6f40232b3cdc33f5b8fbaeadad56cc310c8dd5588d30828296b5290d.png","height":1200,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/4x3/pypyr-taskrunner-yaml-pipeline-automation-1200x900.e8e70443377aeb11c190835e8d2ed0c844d31a82a0c2e8a744a9999cd03e0de9.png","height":900,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/16x9/pypyr-taskrunner-yaml-pipeline-automation-1920x1080.cc9ae11626c8312e087058adb13bfff702162ce39c355065170c1b87850f3034.png","height":1080,"width":1920}],"inLanguage":"en","keywords":["token","replacement,","string","substitutions"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://pypyr.io/docs/substitutions/format-string/"},"publisher":{"@id":"https://pypyr.io/#organization"},"url":"https://pypyr.io/docs/substitutions/format-string/","wordCount":1387}]}</script>
<link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.925deabb48d91a80924b5d04ff56d2b8f42ba1d1e1438cb7d8948cce1138208c.png>
<link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.b869433d27c4679a5fbce03a8489268a539cbc781259bff14618ae2f018334e6.png>
<link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.8bcd9f870e0a86445e0505ce6e816b76a40b08a06e2dcd1ec1f90c395ecbeaf6.png>
<link rel=manifest href=/favicons/site.3dad2bd5063ad6bc11f741ea28adf4df8b9370196f6e64af6789cf181cef05c6.webmanifest>
<link rel="shortcut icon" href=/favicons/favicon.4a2a3dffd965a7c571df0375e35f59307bc72adc08e3ef7021d5d5f02e6ef5a8.ico>
<meta name=msapplication-TileColor content="#00aba9">
<meta name=msapplication-config content="/favicons/browserconfig.bbdaec7f39b7bd1f2d6bc484afdd0c7246e3af9c5b45d91198d8a3b42e024e1f.xml">
<meta name=theme-color content="#121212">
</head>
<body class=docs-grid>
<header class="header elevation-01">
<a href=/ class=top-nav-logo aria-label=home>
<img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo">
</a>
<nav class=top-nav-links aria-label="top navigation">
<ul><li><a href=/docs/ class=top-active>docs</a></li><li><a href=/updates/>updates</a></li><li><a href=/topics/>topics</a></li><li><a href=https://twitter.com/pypyrpipes/><span class=top-nav-links-pre><svg viewBox="0 0 250 203.18"><title>twitter link</title><use xlink:href="https://pypyr.io/images/twitter-logo.4bee83a61c7b1a567b9a00ea1ac9388de3b16ffbffac9e228f998a5411894c59.svg#twitter-logo"/></svg></span></a></li><li><a href=https://github.com/pypyr/pypyr/><span class=top-nav-links-pre><svg viewBox="0 0 477 97.41"><title>github repo</title><use xlink:href="https://pypyr.io/images/github-mark-and-logo.5df312655c6a99a4953b544d02b13a948fa4d66bda21e772206f0ed96663f05b.svg#github-mark-and-logo"/></svg></span></a></li></ul>
</nav>
</header>
<button id=show-leftnav class="neutral-button icon-button primary-button"><svg class="show-leftnav-chevron"><title>open main navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg>
</button>
<nav id=leftnavmenu class="leftnavmenu elevation-03" aria-label="Primary Navigation">
<button id=hide-leftnav class="neutral-button icon-button"><svg class="hide-leftnav-chevron"><title>close navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg>
</button>
<ul class=leftnavroot>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>getting started</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/getting-started/>overview</a>
</li>
<li>
<a href=/docs/getting-started/installation/>install pypyr</a>
</li>
<li>
<a href=/docs/getting-started/run-your-first-pipeline/>run your first pipeline</a>
</li>
<li>
<a href=/docs/getting-started/basic-concepts/>basic concepts</a>
</li>
<li>
<a href=/docs/getting-started/variables/>variables</a>
</li>
<li>
<a href=/docs/getting-started/conditional-logic/>conditional logic</a>
</li>
<li>
<a href=/docs/getting-started/loops/>loops</a>
</li>
<li>
<a href=/docs/getting-started/error-handling/>error handling</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>cli</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/cli/>overview</a>
</li>
<li>
<a href=/docs/cli/run-a-pipeline/>run a pipeline</a>
</li>
<li>
<a href=/docs/cli/custom-args/>custom args</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>pipelines</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/pipelines/>overview</a>
</li>
<li>
<a href=/docs/pipelines/pipeline-structure/>pipeline structure</a>
</li>
<li>
<a href=/docs/pipelines/lookup-order/>lookup order</a>
</li>
<li>
<a href=/docs/pipelines/builtin-pipelines/>built-in pipelines</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>context parsers</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/context-parsers/>overview</a>
</li>
<li>
<a href=/docs/context-parsers/dict/>dict</a>
</li>
<li>
<a href=/docs/context-parsers/json/>json</a>
</li>
<li>
<a href=/docs/context-parsers/jsonfile/>jsonfile</a>
</li>
<li>
<a href=/docs/context-parsers/keys/>keys</a>
</li>
<li>
<a href=/docs/context-parsers/keyvaluepairs/>keyvaluepairs</a>
</li>
<li>
<a href=/docs/context-parsers/list/>list</a>
</li>
<li>
<a href=/docs/context-parsers/string/>string</a>
</li>
<li>
<a href=/docs/context-parsers/yamlfile/>yamlfile</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>decorators</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/decorators/>overview</a>
</li>
<li>
<a href=/docs/decorators/comment/>comment</a>
</li>
<li>
<a href=/docs/decorators/description/>description</a>
</li>
<li>
<a href=/docs/decorators/foreach/>foreach</a>
</li>
<li>
<a href=/docs/decorators/in/>in</a>
</li>
<li>
<a href=/docs/decorators/onerror/>onError</a>
</li>
<li>
<a href=/docs/decorators/retry/>retry</a>
</li>
<li>
<a href=/docs/decorators/run/>run</a>
</li>
<li>
<a href=/docs/decorators/skip/>skip</a>
</li>
<li>
<a href=/docs/decorators/swallow/>swallow</a>
</li>
<li>
<a href=/docs/decorators/while/>while</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/steps/>overview</a>
</li>
<li>
<a href=/docs/steps/assert/>assert</a>
</li>
<li>
<a href=/docs/steps/call/>call</a>
</li>
<li>
<a href=/docs/steps/cmd/>cmd</a>
</li>
<li>
<a href=/docs/steps/contextclear/>contextclear</a>
</li>
<li>
<a href=/docs/steps/contextclearall/>contextclearall</a>
</li>
<li>
<a href=/docs/steps/contextcopy/>contextcopy</a>
</li>
<li>
<a href=/docs/steps/contextmerge/>contextmerge</a>
</li>
<li>
<a href=/docs/steps/contextsetf/>contextsetf</a>
</li>
<li>
<a href=/docs/steps/debug/>debug</a>
</li>
<li>
<a href=/docs/steps/default/>default</a>
</li>
<li>
<a href=/docs/steps/echo/>echo</a>
</li>
<li>
<a href=/docs/steps/env/>env</a>
</li>
<li>
<a href=/docs/steps/envget/>envget</a>
</li>
<li>
<a href=/docs/steps/fetchjson/>fetchjson</a>
</li>
<li>
<a href=/docs/steps/fetchyaml/>fetchyaml</a>
</li>
<li>
<a href=/docs/steps/fileformat/>fileformat</a>
</li>
<li>
<a href=/docs/steps/fileformatjson/>fileformatjson</a>
</li>
<li>
<a href=/docs/steps/fileformatyaml/>fileformatyaml</a>
</li>
<li>
<a href=/docs/steps/filereplace/>filereplace</a>
</li>
<li>
<a href=/docs/steps/filewritejson/>filewritejson</a>
</li>
<li>
<a href=/docs/steps/filewriteyaml/>filewriteyaml</a>
</li>
<li>
<a href=/docs/steps/glob/>glob</a>
</li>
<li>
<a href=/docs/steps/jsonparse/>jsonparse</a>
</li>
<li>
<a href=/docs/steps/jump/>jump</a>
</li>
<li>
<a href=/docs/steps/now/>now</a>
</li>
<li>
<a href=/docs/steps/nowutc/>nowutc</a>
</li>
<li>
<a href=/docs/steps/pathcheck/>pathcheck</a>
</li>
<li>
<a href=/docs/steps/py/>py</a>
</li>
<li>
<a href=/docs/steps/pyimport/>pyimport</a>
</li>
<li>
<a href=/docs/steps/pype/>pype</a>
</li>
<li>
<a href=/docs/steps/pypyrversion/>pypyrversion</a>
</li>
<li>
<a href=/docs/steps/safeshell/>safeshell</a>
</li>
<li>
<a href=/docs/steps/shell/>shell</a>
</li>
<li>
<a href=/docs/steps/stop/>stop</a>
</li>
<li>
<a href=/docs/steps/stoppipeline/>stoppipeline</a>
</li>
<li>
<a href=/docs/steps/stopstepgroup/>stopstepgroup</a>
</li>
<li>
<a href=/docs/steps/tar/>tar</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron nav-chevron-down"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>substitutions</span>
</span>
</button>
<ul class="nested expand">
<li>
<a href=/docs/substitutions/>overview</a>
</li>
<li class=currentpage>
<a href=/docs/substitutions/format-string/>format string</a>
</li>
<li>
<a href=/docs/substitutions/jsonify/>jsonify</a>
</li>
<li>
<a href=/docs/substitutions/py-strings/>py string</a>
</li>
<li>
<a href=/docs/substitutions/sic-strings/>sic string</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>plugins</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/>overview</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>aws</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/aws/>overview</a>
</li>
<li>
<a href=/docs/plugins/aws/authentication/>authentication</a>
</li>
<li>
<a href=/docs/plugins/aws/substitutions/>substitutions</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/aws/steps/>overview</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/client/>client</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/ecswaitprep/>ecswaitprep</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/s3fetchjson/>s3fetchjson</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/s3fetchyaml/>s3fetchyaml</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/wait/>wait</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/waitfor/>waitfor</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>slack</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/slack/>overview</a>
</li>
<li>
<a href=/docs/plugins/slack/authentication/>authentication</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/slack/steps/>overview</a>
</li>
<li>
<a href=/docs/plugins/slack/steps/send/>send</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>api</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/api/>overview</a>
</li>
<li>
<a href=/docs/api/context-parser/>context parser</a>
</li>
<li>
<a href=/docs/api/pipeline-loader/>pipeline loader</a>
</li>
<li>
<a href=/docs/api/retry-backoff/>retry backoff</a>
</li>
<li>
<a href=/docs/api/run-pipeline/>run pipeline</a>
</li>
<li>
<a href=/docs/api/step/>step</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>contributing</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/contributing/>overview</a>
</li>
<li>
<a href=/docs/contributing/contribute-to-pypyr/>contribute to pypyr</a>
</li>
<li>
<a href=/docs/contributing/developers-guide/>developer's guide for pypyr</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>thank you</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/thank-you/>overview</a>
</li>
<li>
<a href=/docs/thank-you/built-with-hugo/>built with hugo</a>
</li>
<li>
<a href=/docs/thank-you/dependencies/>dependencies</a>
</li>
</ul>
</li>
</ul>
</nav>
<div class="docs-content content-grid">
<ol class=breadcrumb vocab="http://schema.org/" typeof="BreadcrumbList">
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/><span property="name">pypyr</span></a>
<meta property="position" content="1">
</li>
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/docs/><span property="name">docs</span></a>
<meta property="position" content="2">
</li>
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/docs/substitutions/><span property="name">substitutions</span></a>
<meta property="position" content="3">
</li>
<li property="itemListElement" typeof="ListItem">
<span property="name">format string</span>
<meta property="position" content="4">
</li></ol>
<aside class="grid-toc elevation-02">
<h6 id=table-of-contents>on this page</h6>
<nav id=TableOfContents>
<ol>
<li><a href=#formatting-expressions-with-replacement-tokens>formatting expressions with replacement tokens</a></li>
<li><a href=#nested-values>nested values</a></li>
<li><a href=#replacement-tokens-vs-structural-yaml>replacement tokens vs structural yaml</a></li>
<li><a href=#interpolate--keep-the-target-type>interpolate & keep the target type</a></li>
<li><a href=#recursive-vs-flat-format>recursive vs flat format</a>
<ol>
<li><a href=#recursive-format>recursive format</a></li>
<li><a href=#flat-format>flat format</a></li>
<li><a href=#explicitly-set-recursive>explicitly set recursive</a></li>
<li><a href=#explicitly-set-flat>explicitly set flat</a></li>
</ol>
</li>
<li><a href=#iterable-objects>iterable objects</a>
<ol>
<li><a href=#recursively-format-iterable-objects>recursively format iterable objects</a></li>
<li><a href=#do-not-recurse-iterable-objects>do not recurse iterable objects</a></li>
</ol>
</li>
<li><a href=#working-with-contextsetf>working with contextsetf</a></li>
<li><a href=#escape-sequences>escape sequences</a></li>
<li><a href=#interpolate-complex-types>interpolate complex types</a></li>
<li><a href=#format-specification-mini-language>format specification mini language</a></li>
</ol>
</nav>
</aside>
<main class=grid-main>
<article>
<h1 id=string-interpolation>string interpolation <a href=#string-interpolation class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h1>
<h2 id=formatting-expressions-with-replacement-tokens>formatting expressions with replacement tokens <a href=#formatting-expressions-with-replacement-tokens class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can use substitution tokens, aka string interpolation, to format strings
where specified for context items. This substitutes anything between <code>{curly braces}</code> with the context value for that key. This also works with nested values
where you have dictionaries/lists inside dictionaries/lists.</p>
<p>For example, if your context looked like this:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>key1</span><span class=p>:</span><span class=w> </span><span class=l>down</span><span class=w>
</span><span class=w></span><span class=nt>key2</span><span class=p>:</span><span class=w> </span><span class=l>valleys</span><span class=w>
</span><span class=w></span><span class=nt>key3</span><span class=p>:</span><span class=w> </span><span class=l>value3</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>key4</span><span class=p>:</span><span class=w> </span><span class=l>Piping {key1} the {key2} wild</span><span class=w>
</span><span class=w></span><span class=c># key4 == &#39;Piping down the valleys wild&#39;</span><span class=w>
</span></code></pre></div>
<h2 id=nested-values>nested values <a href=#nested-values class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can reference keys nested deeper in the context hierarchy, in
cases where you have a dictionary that contains lists/dictionaries that
might contain other lists/dictionaries and so forth.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>root</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=l>list index 0</span><span class=w>
</span><span class=w>  </span>- <span class=nt>key1</span><span class=p>:</span><span class=w> </span><span class=l>this is a value from a dict containing a list, which contains a dict at index 1</span><span class=w>
</span><span class=w>    </span><span class=nt>key2</span><span class=p>:</span><span class=w> </span><span class=l>key 2 value</span><span class=w>
</span><span class=w>  </span>- <span class=l>list index 2</span><span class=w>
</span></code></pre></div><p>Given the context above, you can use formatting expressions to access
nested values like this:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>&#39;{root[0]}&#39; == list index 0
&#39;{root[1][key1]}&#39; == this is a value from a dict containing a list, which contains a dict at index 1
&#39;{root[1][key2]}&#39; == key 2 value
&#39;{root[2]}&#39; == list index 2
</code></pre></div><p>Here is another example of how you access nested dictionary mappings:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>my_mapping</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>a</span><span class=p>:</span><span class=w> </span><span class=l>b</span><span class=w>
</span><span class=w>  </span><span class=nt>c</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>d</span><span class=p>:</span><span class=w> </span><span class=l>e</span><span class=w>
</span><span class=w>    </span><span class=nt>f</span><span class=p>:</span><span class=w> </span><span class=l>g</span><span class=w>
</span><span class=w>    </span><span class=nt>h</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>item 1</span><span class=w>
</span><span class=w>      </span>- <span class=l>item 2</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c># nested_value is &#39;g&#39;</span><span class=w>
</span><span class=w></span><span class=nt>nested_value</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_mapping[c][f]}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c># nested_with_list is &#39;item 2&#39;</span><span class=w>
</span><span class=w></span><span class=nt>nested_with_list</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_mapping[c][h][1]}&#39;</span><span class=w>
</span></code></pre></div>
<h2 id=replacement-tokens-vs-structural-yaml>replacement tokens vs structural yaml <a href=#replacement-tokens-vs-structural-yaml class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>In json & yaml, {curly braces} need to be inside quotes to make sure they parse
as string formatting tokens and not as structural indicators.</p>
<p>Especially watch in yaml, where <code>{</code> as the first character of a key or value
will read as a structural mapping if it&rsquo;s not in quotes like this: <code>"{key}"</code>.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>invalid_value</span><span class=p>:</span><span class=w> </span>{<span class=l>mytag}</span><span class=w> </span><span class=c># INVALID! yaml reads opening curly brace as a mapping type.</span><span class=w>
</span><span class=w></span><span class=nt>valid_token</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{mytag}&#39;</span><span class=w> </span><span class=c># explicitly make it a string with the quotes.</span><span class=w>
</span><span class=w></span><span class=nt>also_valid</span><span class=p>:</span><span class=w> </span><span class=l>start {mytag} end</span><span class=w> </span><span class=c># if the {curlies} are in the middle you don&#39;t need quotes.</span><span class=w>
</span></code></pre></div>
<h2 id=interpolate--keep-the-target-type>interpolate & keep the target type <a href=#interpolate--keep-the-target-type class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>If your replacement expression is a single token and nothing more, pypyr will
keep the type of the replacement target. This is very useful when you want to
assign or copy values in context.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>a_bool</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span><span class=w></span><span class=nt>an_int</span><span class=p>:</span><span class=w> </span><span class=m>123</span><span class=w>
</span><span class=w></span><span class=nt>a_date</span><span class=p>:</span><span class=w> </span><span class=ld>2010-11-12</span><span class=w>
</span><span class=w></span><span class=nt>a_string</span><span class=p>:</span><span class=w> </span><span class=l>this is a string</span><span class=w>
</span><span class=w></span><span class=nt>a_list</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=l>item 1</span><span class=w>
</span><span class=w>  </span>- <span class=l>item 2</span><span class=w>
</span><span class=w>  </span>- <span class=l>item 3</span><span class=w>
</span><span class=w></span><span class=nt>a_map</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>a</span><span class=p>:</span><span class=w> </span><span class=l>b</span><span class=w>
</span><span class=w>  </span><span class=nt>c</span><span class=p>:</span><span class=w> </span><span class=l>d</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=c># each new_ item is the same type as the source</span><span class=w>
</span><span class=w>  </span><span class=nt>new_bool</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{a_bool}&#39;</span><span class=w> </span><span class=c># new_bool is also a bool</span><span class=w>
</span><span class=w>  </span><span class=nt>new_int</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{an_int}&#39;</span><span class=w> </span><span class=c># new_int is an integer</span><span class=w>
</span><span class=w>  </span><span class=nt>new_date</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{a_date}&#39;</span><span class=w> </span><span class=c># new_date is datetime</span><span class=w>
</span><span class=w>  </span><span class=nt>new_string</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{a_string}&#39;</span><span class=w> </span><span class=c># new_string is string</span><span class=w>
</span><span class=w>  </span><span class=nt>new_list</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{a_list}&#39;</span><span class=w> </span><span class=c># new_list is a list</span><span class=w>
</span><span class=w>  </span><span class=nt>new_map</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{a_map}&#39;</span><span class=w> </span><span class=c># new_map is a dict/map</span><span class=w>
</span></code></pre></div><p>When a replacement expression is part of a string that contains more than just
a single replacement token, pypyr will convert all the replacement tokens to
their string representations. This is the case when the string contains any
literal in addition to one or more replacement tokens. This is known as a
compound replacement expression.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>a_bool</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span><span class=w></span><span class=nt>an_int</span><span class=p>:</span><span class=w> </span><span class=m>123</span><span class=w>
</span><span class=w></span><span class=nt>a_string</span><span class=p>:</span><span class=w> </span><span class=l>this is a string</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c># new_string will be a string</span><span class=w>
</span><span class=w></span><span class=nt>new_string</span><span class=p>:</span><span class=w> </span><span class=l>a string with {a_bool}, {an_int} and {a_string}</span><span class=w>
</span><span class=w></span><span class=c># new_string is &#39;a string with True, 123 and this is a string&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>new_string2</span><span class=p>:</span><span class=w> </span><span class=m>0</span>{<span class=l>an_int}4</span><span class=w>
</span><span class=w></span><span class=c># new_string2 is a string == &#39;01234&#39;</span><span class=w>
</span></code></pre></div><p>You can explicitly cast any token expression to a string like this:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>my_int</span><span class=p>:</span><span class=w> </span><span class=m>123</span><span class=w>
</span><span class=w></span><span class=nt>my_formatted_str_from_int</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_int!s}&#39;</span><span class=w>
</span><span class=w></span><span class=c># my_formatted_str_from_int is string &#34;123&#34;, not number 123</span><span class=w>
</span></code></pre></div><p>This is useful when you have a single replacement token expression where you
don&rsquo;t want to keep the target type.</p>
<h2 id=recursive-vs-flat-format>recursive vs flat format <a href=#recursive-vs-flat-format class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2>
<h3 id=recursive-format>recursive format <a href=#recursive-format class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>A recursive format replaces tokens recursively, making token replacements in
the result of each replacement. This is what happens by default in a single
token expression.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>nested_key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;nested value&#39;</span><span class=w>
</span><span class=w></span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{nested_key}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{key}&#39;</span><span class=w>
</span><span class=w></span><span class=c># format_me == &#39;nested value&#39;</span><span class=w>
</span></code></pre></div>
<h3 id=flat-format>flat format <a href=#flat-format class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>A flat format makes a token replacement once, but does not make any further
token replacements in the result. This is what happens by default in a compound
replacement expression.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>nested_key</span><span class=p>:</span><span class=w> </span><span class=l>arbitrary</span><span class=w>
</span><span class=w></span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>contains {nested_key}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=l>this {key} formatted flat by default</span><span class=w>
</span><span class=w></span><span class=c># format_me == &#39;this contains {nested key} formatted flat by default&#39;</span><span class=w>
</span><span class=w></span><span class=c># use recursive format if you want &#39;this contains arbitrary flat format by default&#39;</span><span class=w>
</span></code></pre></div><p>Flat Format is especially useful when your formatting expression evaluates to
a string that contains literal curly braces that are not meant as pypyr
replacement tokens - for example a string containing json.</p>
<h3 id=explicitly-set-recursive>explicitly set recursive <a href=#explicitly-set-recursive class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>If you want to format the result recursively in a compound token expression,
you explicitly set <code>rf</code> (Recursive Format) to do so:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>nested_key</span><span class=p>:</span><span class=w> </span><span class=l>arbitrary result</span><span class=w>
</span><span class=w></span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>contains {nested_key}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=l>this {key:rf} formatted recursively</span><span class=w>
</span><span class=w></span><span class=c># format_me == &#39;this contains arbitrary result formatted recursively&#39;</span><span class=w>
</span></code></pre></div>
<h3 id=explicitly-set-flat>explicitly set flat <a href=#explicitly-set-flat class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>If you want to flat format a single token expression instead, you explicitly
set <code>ff</code> (Flat Format) to do so:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>nested_key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;nested value&#39;</span><span class=w>
</span><span class=w></span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{nested_key}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{key:ff}&#39;</span><span class=w>
</span><span class=w></span><span class=c># format_me == &#39;{nested_key}&#39;</span><span class=w>
</span></code></pre></div><p>You can explicitly stop a recursive format from further formatting nested
values by using a <code>ff</code> directive where you want it stop:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># recurse to the end</span><span class=w>
</span><span class=w></span><span class=nt>k3</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;the end&#39;</span><span class=w>
</span><span class=w></span><span class=nt>k2</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k3}&#39;</span><span class=w>
</span><span class=w></span><span class=nt>k1</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k2}&#39;</span><span class=w>
</span><span class=w></span><span class=nt>k0</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k1}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k0}&#39;</span><span class=w> </span><span class=c># == &#39;the end&#39;</span><span class=w>
</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c># recurse until ff</span><span class=w>
</span><span class=w></span><span class=nt>k3</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;the end&#39;</span><span class=w>
</span><span class=w></span><span class=nt>k2</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k3}&#39;</span><span class=w> </span><span class=c># will NOT process {k3}, because k2:ff (Flat Format)</span><span class=w>
</span><span class=w></span><span class=nt>k1</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k2:ff}&#39;</span><span class=w>
</span><span class=w></span><span class=nt>k0</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k1}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k0}&#39;</span><span class=w> </span><span class=c># == &#39;{k3}&#39;</span><span class=w>
</span></code></pre></div>
<h2 id=iterable-objects>iterable objects <a href=#iterable-objects class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2>
<h3 id=recursively-format-iterable-objects>recursively format iterable objects <a href=#recursively-format-iterable-objects class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>pypyr will format iterable objects like lists, sets and mappings (dict)
recursively by default.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>k1</span><span class=p>:</span><span class=w> </span><span class=l>formatted A</span><span class=w>
</span><span class=w></span><span class=nt>k2</span><span class=p>:</span><span class=w> </span><span class=l>formatted one</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>my_map</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>a</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k1}&#39;</span><span class=w>
</span><span class=w>  </span><span class=nt>c</span><span class=p>:</span><span class=w> </span><span class=l>d</span><span class=w>
</span><span class=w>  </span><span class=nt>e</span><span class=p>:</span><span class=w> 
</span><span class=w>    </span><span class=nt>f</span><span class=p>:</span><span class=w> </span><span class=l>g</span><span class=w>
</span><span class=w>    </span><span class=nt>h</span><span class=p>:</span><span class=w> 
</span><span class=w>      </span>- <span class=l>zero</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;{k2}&#39;</span><span class=w>
</span><span class=w>      </span>- <span class=l>two</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_map}&#39;</span><span class=w>
</span></code></pre></div><p>The resulting value of <code>format_me</code> is:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>a</span><span class=p>:</span><span class=w> </span><span class=l>formatted A</span><span class=w>
</span><span class=w></span><span class=nt>c</span><span class=p>:</span><span class=w> </span><span class=l>d</span><span class=w>
</span><span class=w></span><span class=nt>e</span><span class=p>:</span><span class=w> 
</span><span class=w>  </span><span class=nt>f</span><span class=p>:</span><span class=w> </span><span class=l>g</span><span class=w>
</span><span class=w>  </span><span class=nt>h</span><span class=p>:</span><span class=w> 
</span><span class=w>    </span>- <span class=l>zero</span><span class=w>
</span><span class=w>    </span>- <span class=l>formatted one</span><span class=w>
</span><span class=w>    </span>- <span class=l>two</span><span class=w>
</span></code></pre></div>
<h3 id=do-not-recurse-iterable-objects>do not recurse iterable objects <a href=#do-not-recurse-iterable-objects class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>You can use the Flat Format <code>ff</code> indicator not to iterate the target object:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>k1</span><span class=p>:</span><span class=w> </span><span class=l>formatted A</span><span class=w>
</span><span class=w></span><span class=nt>k2</span><span class=p>:</span><span class=w> </span><span class=l>formatted one</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>my_map</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>a</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k1}&#39;</span><span class=w>
</span><span class=w>  </span><span class=nt>c</span><span class=p>:</span><span class=w> </span><span class=l>d</span><span class=w>
</span><span class=w>  </span><span class=nt>e</span><span class=p>:</span><span class=w> 
</span><span class=w>    </span><span class=nt>f</span><span class=p>:</span><span class=w> </span><span class=l>g</span><span class=w>
</span><span class=w>    </span><span class=nt>h</span><span class=p>:</span><span class=w> 
</span><span class=w>      </span>- <span class=l>zero</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;{k2}&#39;</span><span class=w>
</span><span class=w>      </span>- <span class=l>two</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>format_me</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_map:ff}&#39;</span><span class=w>
</span></code></pre></div><p>The resulting value is of <code>format_me</code> is:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>my_map</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>a</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{k1}&#39;</span><span class=w>
</span><span class=w>  </span><span class=nt>c</span><span class=p>:</span><span class=w> </span><span class=l>d</span><span class=w>
</span><span class=w>  </span><span class=nt>e</span><span class=p>:</span><span class=w> 
</span><span class=w>    </span><span class=nt>f</span><span class=p>:</span><span class=w> </span><span class=l>g</span><span class=w>
</span><span class=w>    </span><span class=nt>h</span><span class=p>:</span><span class=w> 
</span><span class=w>      </span>- <span class=l>zero</span><span class=w>
</span><span class=w>      </span>- <span class=s1>&#39;{k2}&#39;</span><span class=w>
</span><span class=w>      </span>- <span class=l>two</span><span class=w>
</span></code></pre></div>
<h2 id=working-with-contextsetf>working with contextsetf <a href=#working-with-contextsetf class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>When you use the <a href=https://pypyr.io/docs/steps/contextsetf/>contextsetf step</a> pypyr
evaluates each assignment in order from the top down. Each assignment is
atomic.</p>
<p>This might look like a recursive format, but it isn&rsquo;t - it&rsquo;s just that each
line evaluates individually before pypyr moves on to the next.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.contextsetf</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>each assignment evaluates atomically,</span><span class=w>
</span><span class=w>           </span><span class=l>in order from the top down</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>contextSetf</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>k3</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;the end&#39;</span><span class=w>
</span><span class=w>      </span><span class=nt>k2</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2 {k3}&#39;</span><span class=w> </span><span class=c># == &#39;2 the end&#39;</span><span class=w>
</span><span class=w>      </span><span class=nt>k1</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1 {k2}&#39;</span><span class=w> </span><span class=c># == &#39;1 2 the end&#39;</span><span class=w>
</span><span class=w>      </span><span class=nt>k0</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0 {k1}&#39;</span><span class=w> </span><span class=c># == &#39;0 1 2 the end&#39;</span><span class=w>
</span></code></pre></div>
<h2 id=escape-sequences>escape sequences <a href=#escape-sequences class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Escape literal curly braces with doubles:</p>
<table>
<thead>
<tr>
<th>special character</th>
<th>escape sequence</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{</code></td>
<td><code>{{</code></td>
</tr>
<tr>
<td><code>}</code></td>
<td><code>}}</code></td>
</tr>
</tbody>
</table>
<p>If your particular strings make using the escape sequences a nuisance, you can
avoid doubling the curly braces by using <a href=https://pypyr.io/docs/substitutions/sic-strings/>sic strings aka literal strings</a>
instead.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># two ways of escaping literal curly braces:</span><span class=w>
</span><span class=w></span><span class=nt>my_escaped_string</span><span class=p>:</span><span class=w> </span><span class=l>the doubled {{curly}} means it won&#39;t parse as a replacement token.</span><span class=w>
</span><span class=w></span><span class=nt>another_escaped_string</span><span class=p>:</span><span class=w> </span>!<span class=l>sic parse {curly} as literal without doubling.</span><span class=w>
</span></code></pre></div>
<h2 id=interpolate-complex-types>interpolate complex types <a href=#interpolate-complex-types class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can assign complex types or hierarchial, nested structures with string
formatting expression syntax. This allows you to replace an entire key or
value in any sub-section, or to build a new configuration section using parts
of other configuration sections. This is type-safe.</p>
<p>For example, in the following example there is a complex nested dictionary
under <code>key1</code>.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>key1</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>k1.1</span><span class=p>:</span><span class=w> </span><span class=l>value 1.1</span><span class=w>
</span><span class=w>  </span><span class=nt>k1.2</span><span class=p>:</span><span class=w> 
</span><span class=w>    </span>- <span class=m>1.2.1</span><span class=w>
</span><span class=w>    </span>- <span class=m>1.2.2</span><span class=w>
</span><span class=w>    </span>- <span class=nt>1.2.3.key1</span><span class=p>:</span><span class=w> </span><span class=l>dict inside list inside dict 1</span><span class=w>
</span><span class=w>      </span><span class=nt>1.2.3.key2</span><span class=p>:</span><span class=w> </span><span class=l>dict inside list inside dict 2</span><span class=w>
</span><span class=w></span><span class=nt>key2</span><span class=p>:</span><span class=w> </span><span class=l>key 2 value</span><span class=w>
</span></code></pre></div><p>You can use the entirety of <code>key1</code> in any other complex nested configuration
context values you assemble in pypyr, so you effectively compose new
configuration context structures from existing building blocks.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.contextsetf</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>contextSetf</span><span class=p>:</span><span class=w> 
</span><span class=w>      </span><span class=nt>newkey</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>nestedkey1</span><span class=p>:</span><span class=w> </span><span class=l>nested value 1</span><span class=w>
</span><span class=w>        </span><span class=nt>nestedkey2</span><span class=p>:</span><span class=w>
</span><span class=w>          </span>- <span class=l>list item 0</span><span class=w>
</span><span class=w>          </span>- <span class=s1>&#39;{key1}&#39;</span><span class=w>
</span><span class=w>          </span>- <span class=l>list item 2</span><span class=w>
</span></code></pre></div><p>In this example, nested a few levels deep under <code>newkey</code>, pypyr will
replace <code>{key1}</code> with the entirety of the complex, nested dictionary under
<code>key1</code>. This will result in the the following context:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=nt>key1</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>k1.1</span><span class=p>:</span><span class=w> </span><span class=l>value 1.1</span><span class=w>
</span><span class=w>  </span><span class=nt>k1.2</span><span class=p>:</span><span class=w> 
</span><span class=w>    </span>- <span class=m>1.2.1</span><span class=w>
</span><span class=w>    </span>- <span class=m>1.2.2</span><span class=w>
</span><span class=w>    </span>- <span class=nt>1.2.3.key1</span><span class=p>:</span><span class=w> </span><span class=l>dict inside list inside dict 1</span><span class=w>
</span><span class=w>      </span><span class=nt>1.2.3.key2</span><span class=p>:</span><span class=w> </span><span class=l>dict inside list inside dict 2</span><span class=w>
</span><span class=w></span><span class=nt>key2</span><span class=p>:</span><span class=w> </span><span class=l>key 2 value</span><span class=w>
</span><span class=w></span><span class=nt>newkey</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>nestedkey1</span><span class=p>:</span><span class=w> </span><span class=l>nested value 1</span><span class=w>
</span><span class=w>  </span><span class=nt>nestedkey2</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=l>list item 0</span><span class=w>
</span><span class=w>    </span>- <span class=nt>k1.1</span><span class=p>:</span><span class=w> </span><span class=l>value 1.1</span><span class=w>
</span><span class=w>      </span><span class=nt>k1.2</span><span class=p>:</span><span class=w> 
</span><span class=w>        </span>- <span class=m>1.2.1</span><span class=w>
</span><span class=w>        </span>- <span class=m>1.2.2</span><span class=w>
</span><span class=w>        </span>- <span class=nt>1.2.3.key1</span><span class=p>:</span><span class=w> </span><span class=l>dict inside list inside dict 1</span><span class=w>
</span><span class=w>          </span><span class=nt>1.2.3.key2</span><span class=p>:</span><span class=w> </span><span class=l>dict inside list inside dict 2</span><span class=w>
</span><span class=w>    </span>- <span class=l>list item 2</span><span class=w>
</span></code></pre></div>
<h2 id=format-specification-mini-language>format specification mini language <a href=#format-specification-mini-language class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can use the full expressive power of Python&rsquo;s format specification
mini-language in any replacement token expression.</p>
<p>This allows you to</p>
<ul>
<li>align left, right or center;</li>
<li>left or right pad your output with spaces or custom characters;</li>
<li>format numbers to add a +/- sign;</li>
<li>format numbers as hex, oct, decimals</li>
<li>add thousands separators to numbers;</li>
<li>customize datetime output strings;</li>
<li>use exponential or fixed point notation where you can set the precision.</li>
<li>and more. . .</li>
</ul>
<p>You can combine pypyr&rsquo;s Flat Format <code>ff</code> and Recursive Format <code>rf</code> indicators
with any of these. Just put the <code>ff</code> or <code>rf</code> at the very beginning of the
format specification. The subsequent formatting expression will apply to the end
result of any recursive formatting sequence.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>use any python format mini-syntax</span><span class=w>
</span><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>arb_string</span><span class=p>:</span><span class=w> </span><span class=l>ABC</span><span class=w>
</span><span class=w>    </span><span class=nt>arb_number</span><span class=p>:</span><span class=w> </span><span class=m>42</span><span class=w>
</span><span class=w>    </span><span class=nt>big_number</span><span class=p>:</span><span class=w> </span><span class=m>12345678</span><span class=w>
</span><span class=w>    </span><span class=nt>arb_date</span><span class=p>:</span><span class=w> </span><span class=ld>2006-01-02 15:04:05</span><span class=w>
</span><span class=w>    </span><span class=nt>string_1</span><span class=p>:</span><span class=w> </span><span class=l>two</span><span class=w>
</span><span class=w>    </span><span class=nt>string_2</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;one {string_1}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>string_3</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;zero {string_2}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span><span class=sd>      int: {arb_number:d}
</span><span class=sd>      hex: {arb_number:x}
</span><span class=sd>      oct: {arb_number:o}
</span><span class=sd>      bin: {arb_number:b}
</span><span class=sd>      %: {arb_number:.2%}
</span><span class=sd>      
</span><span class=sd>      left align: begin{arb_string:&lt;6}end
</span><span class=sd>      right align: begin{arb_string:&gt;6}end
</span><span class=sd>      center: begin{arb_string:^7}end
</span><span class=sd>
</span><span class=sd>      left pad: {arb_string:+&lt;6}
</span><span class=sd>      right pad: {arb_string:+&gt;6}
</span><span class=sd>      center pad: {arb_string:+^7}
</span><span class=sd>
</span><span class=sd>      thousands separator: {big_number:,}
</span><span class=sd>
</span><span class=sd>      date/time formatting: {arb_date:%A %H:%M}
</span><span class=sd>
</span><span class=sd>      rf/ff combined with other mini-format syntax
</span><span class=sd>      {string_3:rf+^14}</span><span class=w>      
</span></code></pre></div><p>This will output:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>int: 42
hex: 2a
oct: 52
bin: 101010
%: 4200.00%

left align: beginABC   end
right align: begin   ABCend
center: begin  ABC  end

left pad: ABC+++
right pad: +++ABC
center pad: ++ABC++

thousands separator: 12,345,678

date/time formatting: Monday 15:04

rf/ff combined with other mini-format syntax
+zero one two+
</code></pre></div><p>For full details of the Python format specification mini-language, check here:</p>
<p><a href=https://docs.python.org/3/library/string.html#format-specification-mini-language>https://docs.python.org/3/library/string.html#format-specification-mini-language</a></p>
<p>For full date time format codes, check here:</p>
<p><a href=https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes>https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</a></p>
</article>
</main>
<aside class="grid-improve elevation-02" aria-labelledby=feedback>
<h6 id=feedback>feedback</h6>
<ul class=small-list>
<li><a href=https://github.com/pypyr/docs/edit/master/content/docs/substitutions/format-string.md class=muted-with-hover>edit me</a></li>
<li><a href="https://github.com/pypyr/docs/issues/new?title=docs%20issue:format%20string%20interpolation&body=File:%20[format%20string%20interpolation]%28https://pypyr.io/docs/substitutions/format-string/%29" class=muted-with-hover>report typo</a></li>
<li><a href="https://github.com/pypyr/pypyr/issues/new?title=Re:%20format%20string%20interpolation&labels=bug" class=muted-with-hover>report bug!</a></li>
</ul>
</aside>
<div class="page-git-info elevation-02">
<small class=small-block>last updated on <time datetime=2020-10-28T21:01:13Z>2020-10-28 21:01</time>.</small>
</div>
</div>
<footer class="footer elevation-01">
<a href=/ class=top-nav-logo aria-label=home>
<img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo">
</a>
<div class=col-1fr-centered>
<ul class=footer-social-links aria-label="social media links"><li>
<a href=https://twitter.com/pypyrpipes/ class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 400 400"><title>twitter link</title><use xlink:href="https://pypyr.io/icons/twitter-social-icon-circle-white.d715a98bf8d7170b3d2603d836ca675616731d85583c13d23ec468905e77c59a.svg#twitter-icon"/></svg></div>
<small>twitter</small>
</a>
</li><li>
<a href=https://github.com/pypyr/pypyr/ class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 32.58 31.77"><title>github link</title><use xlink:href="https://pypyr.io/icons/github-icon.778bc8065fb7e8d1e7109b270cfbd86e15e05bb16ebff30d261935e4bc1560bd.svg#github-icon"/></svg></div>
<small>github</small>
</a>
</li><li>
<a href=https://github.com/pypyr/pypyr/discussions class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 16 16"><title>discussion forum link</title><use xlink:href="https://pypyr.io/icons/discussions.a9f14951d81276183aaea73b6d616db95326f8f16350b221d9d6d48ee5a0b16e.svg#discussions-icon"/></svg>
</div>
<small>forum</small>
</a>
</li></ul>
<ul class=footer-notices-links aria-label="legal notices"><li>
<a href=/legal/privacy-notice class=muted-with-hover>
<small>privacy</small>
</a>
</li><li>
<a href=/legal/licensing class=muted-with-hover>
<small>licensing</small>
</a>
</li><li>
<a href=/press-kit class=muted-with-hover>
<small>press</small>
</a>
</li></ul>
</div>
</footer>
<div class=bottom-spacer aria-hidden=true></div>
<div id=disabled-state-overlay aria-hidden=true class="disabled-state-overlay hide-overlay"></div>
</body>
</html>