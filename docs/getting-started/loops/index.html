<!doctype html><html lang=en dir=ltr prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>loops | pypyr</title>
<meta name=description content="You can repeatedly run a step by looping in a pypyr pipeline without writing code.">
<link rel=stylesheet href=https://pypyr.io/css/styles.min.99e596997d7f6f9df9ec7bb05cdd3e8c62dd9d484bbe6858e05e90aebf2c1ec2.css integrity="sha256-meWWmX1/b5357HuwXN0+jGLdnUhLvmhY4F6Qrr8sHsI=">
<link rel=stylesheet href=https://pypyr.io/css/code-highlight.min.78f63f1d4f45beaf423efd3dc8e6914c2abdca1b5391cd91368a32efecd9d7e3.css integrity="sha256-ePY/HU9Fvq9CPv09yOaRTCq9yhtTkc2RNooy7+zZ1+M=">
<script defer src=https://pypyr.io/js/script.min.45064b9f444bbb1631eeef9f9ef2be6985c45b5f06bddb6644ce049732706a06.js integrity="sha256-RQZLn0RLuxYx7u+fnvK+aYXEW18GvdtmRM4ElzJwagY="></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700%7cRoboto+Mono:400,400i&display=swap" rel=stylesheet>
<link rel=canonical href=https://pypyr.io/docs/getting-started/loops/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147150909-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-147150909-1')</script>
<meta property="og:description" content="You can repeatedly run a step by looping in a pypyr pipeline without writing code.">
<meta property="og:image" content="https://pypyr.io/images/1.91x1/pypyr-taskrunner-yaml-pipeline-automation-1200x628.5aa6465b3b9d2ca8d0d5a9f794ba7f379c522a8ba503129f2a35d2479ea2452d.png">
<meta property="og:image:alt" content="pypyr is an open-source task-runner for automation pipelines defined in simple human-readable yaml.">
<meta property="og:image:height" content="628">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:site_name" content="pypyr technical documentation">
<meta property="og:title" content="How to use loops (iterations) in a task-runner pipeline.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://pypyr.io/docs/getting-started/loops/">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:site content="@pypyrpipes">
<script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@id":"https://pypyr.io/#organization","@type":"Organization","name":"pypyr","url":"https://pypyr.io/","description":"The pypyr project is a free open-source task-runner cli \u0026 python api for automation pipelines.","logo":{"@type":"ImageObject","url":"https://pypyr.io/images/pypyr-taskrunner-logo-square.63875e43ff40d8ae40e93a6043b4328b962f54f52974aaa27cedec52220de665.svg","height":112,"width":112},"sameAs":["https://github.com/pypyr/","https://twitter.com/pypyrpipes/","https://pypi.org/user/pypyr/","https://hub.docker.com/u/pypyr/","https://en.gravatar.com/pypyr/"]},{"@type":"TechArticle","author":{"@type":"Person","name":"pypyr contributor"},"articleSection":"getting started","dateModified":"2021-10-05T14:41:15+01:00","datePublished":"2021-09-09T00:00:00Z","headline":"How to use loops (iterations) in a task-runner pipeline.","image":[{"@type":"ImageObject","url":"https://pypyr.io/images/1x1/pypyr-taskrunner-yaml-pipeline-automation-1200x1200.52764d3c6f40232b3cdc33f5b8fbaeadad56cc310c8dd5588d30828296b5290d.png","height":1200,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/4x3/pypyr-taskrunner-yaml-pipeline-automation-1200x900.e8e70443377aeb11c190835e8d2ed0c844d31a82a0c2e8a744a9999cd03e0de9.png","height":900,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/16x9/pypyr-taskrunner-yaml-pipeline-automation-1920x1080.cc9ae11626c8312e087058adb13bfff702162ce39c355065170c1b87850f3034.png","height":1080,"width":1920}],"inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https://pypyr.io/docs/getting-started/loops/"},"publisher":{"@id":"https://pypyr.io/#organization"},"url":"https://pypyr.io/docs/getting-started/loops/","wordCount":737}]}</script>
<link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.925deabb48d91a80924b5d04ff56d2b8f42ba1d1e1438cb7d8948cce1138208c.png>
<link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.b869433d27c4679a5fbce03a8489268a539cbc781259bff14618ae2f018334e6.png>
<link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.8bcd9f870e0a86445e0505ce6e816b76a40b08a06e2dcd1ec1f90c395ecbeaf6.png>
<link rel=manifest href=/favicons/site.3dad2bd5063ad6bc11f741ea28adf4df8b9370196f6e64af6789cf181cef05c6.webmanifest>
<link rel="shortcut icon" href=/favicons/favicon.4a2a3dffd965a7c571df0375e35f59307bc72adc08e3ef7021d5d5f02e6ef5a8.ico>
<meta name=msapplication-TileColor content="#00aba9">
<meta name=msapplication-config content="/favicons/browserconfig.bbdaec7f39b7bd1f2d6bc484afdd0c7246e3af9c5b45d91198d8a3b42e024e1f.xml">
<meta name=theme-color content="#121212">
</head>
<body class=docs-grid>
<header class="header elevation-01">
<a href=/ class=top-nav-logo aria-label=home>
<img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo">
</a>
<nav class=top-nav-links aria-label="top navigation">
<ul><li><a href=/docs/ class=top-active>docs</a></li><li><a href=/updates/>updates</a></li><li><a href=/topics/>topics</a></li><li><a href=https://twitter.com/pypyrpipes/><span class=top-nav-links-pre><svg viewBox="0 0 250 203.18"><title>twitter link</title><use xlink:href="https://pypyr.io/images/twitter-logo.4bee83a61c7b1a567b9a00ea1ac9388de3b16ffbffac9e228f998a5411894c59.svg#twitter-logo"/></svg></span></a></li><li><a href=https://github.com/pypyr/pypyr/><span class=top-nav-links-pre><svg viewBox="0 0 477 97.41"><title>github repo</title><use xlink:href="https://pypyr.io/images/github-mark-and-logo.5df312655c6a99a4953b544d02b13a948fa4d66bda21e772206f0ed96663f05b.svg#github-mark-and-logo"/></svg></span></a></li></ul>
</nav>
</header>
<button id=show-leftnav class="neutral-button icon-button primary-button"><svg class="show-leftnav-chevron"><title>open main navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg>
</button>
<nav id=leftnavmenu class="leftnavmenu elevation-03" aria-label="Primary Navigation">
<button id=hide-leftnav class="neutral-button icon-button"><svg class="hide-leftnav-chevron"><title>close navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg>
</button>
<ul class=leftnavroot>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron nav-chevron-down"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>getting started</span>
</span>
</button>
<ul class="nested expand">
<li>
<a href=/docs/getting-started/>overview</a>
</li>
<li>
<a href=/docs/getting-started/installation/>install pypyr</a>
</li>
<li>
<a href=/docs/getting-started/run-your-first-pipeline/>run your first pipeline</a>
</li>
<li>
<a href=/docs/getting-started/basic-concepts/>basic concepts</a>
</li>
<li>
<a href=/docs/getting-started/variables/>variables</a>
</li>
<li>
<a href=/docs/getting-started/conditional-logic/>conditional logic</a>
</li>
<li class=currentpage>
<a href=/docs/getting-started/loops/>loops</a>
</li>
<li>
<a href=/docs/getting-started/error-handling/>error handling</a>
</li>
<li>
<a href=/docs/getting-started/config/>config</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>cli</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/cli/>overview</a>
</li>
<li>
<a href=/docs/cli/run-a-pipeline/>run a pipeline</a>
</li>
<li>
<a href=/docs/cli/custom-args/>custom args</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>pipelines</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/pipelines/>overview</a>
</li>
<li>
<a href=/docs/pipelines/pipeline-structure/>pipeline structure</a>
</li>
<li>
<a href=/docs/pipelines/lookup-order/>lookup order</a>
</li>
<li>
<a href=/docs/pipelines/builtin-pipelines/>built-in pipelines</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>context parsers</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/context-parsers/>overview</a>
</li>
<li>
<a href=/docs/context-parsers/dict/>dict</a>
</li>
<li>
<a href=/docs/context-parsers/json/>json</a>
</li>
<li>
<a href=/docs/context-parsers/jsonfile/>jsonfile</a>
</li>
<li>
<a href=/docs/context-parsers/keys/>keys</a>
</li>
<li>
<a href=/docs/context-parsers/keyvaluepairs/>keyvaluepairs</a>
</li>
<li>
<a href=/docs/context-parsers/list/>list</a>
</li>
<li>
<a href=/docs/context-parsers/string/>string</a>
</li>
<li>
<a href=/docs/context-parsers/tomlfile/>tomlfile</a>
</li>
<li>
<a href=/docs/context-parsers/yamlfile/>yamlfile</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>decorators</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/decorators/>overview</a>
</li>
<li>
<a href=/docs/decorators/comment/>comment</a>
</li>
<li>
<a href=/docs/decorators/description/>description</a>
</li>
<li>
<a href=/docs/decorators/foreach/>foreach</a>
</li>
<li>
<a href=/docs/decorators/in/>in</a>
</li>
<li>
<a href=/docs/decorators/onerror/>onError</a>
</li>
<li>
<a href=/docs/decorators/retry/>retry</a>
</li>
<li>
<a href=/docs/decorators/run/>run</a>
</li>
<li>
<a href=/docs/decorators/skip/>skip</a>
</li>
<li>
<a href=/docs/decorators/swallow/>swallow</a>
</li>
<li>
<a href=/docs/decorators/while/>while</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/steps/>overview</a>
</li>
<li>
<a href=/docs/steps/add/>add</a>
</li>
<li>
<a href=/docs/steps/append/>append</a>
</li>
<li>
<a href=/docs/steps/assert/>assert</a>
</li>
<li>
<a href=/docs/steps/call/>call</a>
</li>
<li>
<a href=/docs/steps/cmd/>cmd</a>
</li>
<li>
<a href=/docs/steps/configvars/>configvars</a>
</li>
<li>
<a href=/docs/steps/contextclear/>contextclear</a>
</li>
<li>
<a href=/docs/steps/contextclearall/>contextclearall</a>
</li>
<li>
<a href=/docs/steps/contextcopy/>contextcopy</a>
</li>
<li>
<a href=/docs/steps/contextmerge/>contextmerge</a>
</li>
<li>
<a href=/docs/steps/contextsetf/>contextsetf</a>
</li>
<li>
<a href=/docs/steps/debug/>debug</a>
</li>
<li>
<a href=/docs/steps/default/>default</a>
</li>
<li>
<a href=/docs/steps/echo/>echo</a>
</li>
<li>
<a href=/docs/steps/env/>env</a>
</li>
<li>
<a href=/docs/steps/envget/>envget</a>
</li>
<li>
<a href=/docs/steps/fetchjson/>fetchjson</a>
</li>
<li>
<a href=/docs/steps/fetchtoml/>fetchtoml</a>
</li>
<li>
<a href=/docs/steps/fetchyaml/>fetchyaml</a>
</li>
<li>
<a href=/docs/steps/fileformat/>fileformat</a>
</li>
<li>
<a href=/docs/steps/fileformatjson/>fileformatjson</a>
</li>
<li>
<a href=/docs/steps/fileformattoml/>fileformattoml</a>
</li>
<li>
<a href=/docs/steps/fileformatyaml/>fileformatyaml</a>
</li>
<li>
<a href=/docs/steps/fileread/>fileread</a>
</li>
<li>
<a href=/docs/steps/filereplace/>filereplace</a>
</li>
<li>
<a href=/docs/steps/filewrite/>filewrite</a>
</li>
<li>
<a href=/docs/steps/filewritejson/>filewritejson</a>
</li>
<li>
<a href=/docs/steps/filewritetoml/>filewritetoml</a>
</li>
<li>
<a href=/docs/steps/filewriteyaml/>filewriteyaml</a>
</li>
<li>
<a href=/docs/steps/glob/>glob</a>
</li>
<li>
<a href=/docs/steps/jsonparse/>jsonparse</a>
</li>
<li>
<a href=/docs/steps/jump/>jump</a>
</li>
<li>
<a href=/docs/steps/now/>now</a>
</li>
<li>
<a href=/docs/steps/nowutc/>nowutc</a>
</li>
<li>
<a href=/docs/steps/pathcheck/>pathcheck</a>
</li>
<li>
<a href=/docs/steps/py/>py</a>
</li>
<li>
<a href=/docs/steps/pyimport/>pyimport</a>
</li>
<li>
<a href=/docs/steps/pype/>pype</a>
</li>
<li>
<a href=/docs/steps/pypyrversion/>pypyrversion</a>
</li>
<li>
<a href=/docs/steps/python/>python</a>
</li>
<li>
<a href=/docs/steps/safeshell/>safeshell</a>
</li>
<li>
<a href=/docs/steps/set/>set</a>
</li>
<li>
<a href=/docs/steps/shell/>shell</a>
</li>
<li>
<a href=/docs/steps/stop/>stop</a>
</li>
<li>
<a href=/docs/steps/stoppipeline/>stoppipeline</a>
</li>
<li>
<a href=/docs/steps/stopstepgroup/>stopstepgroup</a>
</li>
<li>
<a href=/docs/steps/tar/>tar</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>substitutions</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/substitutions/>overview</a>
</li>
<li>
<a href=/docs/substitutions/format-string/>format string</a>
</li>
<li>
<a href=/docs/substitutions/jsonify/>jsonify</a>
</li>
<li>
<a href=/docs/substitutions/py-strings/>py string</a>
</li>
<li>
<a href=/docs/substitutions/sic-strings/>sic string</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>plugins</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/>overview</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>aws</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/aws/>overview</a>
</li>
<li>
<a href=/docs/plugins/aws/authentication/>authentication</a>
</li>
<li>
<a href=/docs/plugins/aws/substitutions/>substitutions</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/aws/steps/>overview</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/client/>client</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/ecswaitprep/>ecswaitprep</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/s3fetchjson/>s3fetchjson</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/s3fetchyaml/>s3fetchyaml</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/wait/>wait</a>
</li>
<li>
<a href=/docs/plugins/aws/steps/waitfor/>waitfor</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>slack</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/slack/>overview</a>
</li>
<li>
<a href=/docs/plugins/slack/authentication/>authentication</a>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/plugins/slack/steps/>overview</a>
</li>
<li>
<a href=/docs/plugins/slack/steps/send/>send</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>api</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/api/>overview</a>
</li>
<li>
<a href=/docs/api/custom-module-search-path/>custom module search path</a>
</li>
<li>
<a href=/docs/api/context-parser/>context parser</a>
</li>
<li>
<a href=/docs/api/pipeline-loader/>pipeline loader</a>
</li>
<li>
<a href=/docs/api/retry-backoff/>retry backoff</a>
</li>
<li>
<a href=/docs/api/run-pipeline/>run pipeline</a>
</li>
<li>
<a href=/docs/api/step/>step</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>contributing</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/contributing/>overview</a>
</li>
<li>
<a href=/docs/contributing/contribute-to-pypyr/>contribute to pypyr</a>
</li>
<li>
<a href=/docs/contributing/developers-guide/>developer's guide for pypyr</a>
</li>
</ul>
</li>
<li>
<button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer>
<svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>thank you</span>
</span>
</button>
<ul class=nested>
<li>
<a href=/docs/thank-you/>overview</a>
</li>
<li>
<a href=/docs/thank-you/built-with-hugo/>built with hugo</a>
</li>
<li>
<a href=/docs/thank-you/dependencies/>dependencies</a>
</li>
</ul>
</li>
</ul>
</nav>
<div class="docs-content content-grid">
<ol class=breadcrumb vocab="http://schema.org/" typeof="BreadcrumbList">
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/><span property="name">pypyr</span></a>
<meta property="position" content="1">
</li>
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/docs/><span property="name">docs</span></a>
<meta property="position" content="2">
</li>
<li property="itemListElement" typeof="ListItem">
<a property="item" typeof="WebPage" href=https://pypyr.io/docs/getting-started/><span property="name">getting started</span></a>
<meta property="position" content="3">
</li>
<li property="itemListElement" typeof="ListItem">
<span property="name">loops</span>
<meta property="position" content="4">
</li></ol>
<aside class="grid-toc elevation-02">
<h6 id=table-of-contents>on this page</h6>
<nav id=TableOfContents>
<ol>
<li><a href=#foreach>foreach</a></li>
<li><a href=#while>while</a>
<ol>
<li><a href=#while-with-max-count>while with max count</a></li>
<li><a href=#while-with-stop-condition>while with stop condition</a></li>
</ol>
</li>
<li><a href=#retry>retry</a></li>
<li><a href=#using-variables-to-loop>using variables to loop</a>
<ol>
<li><a href=#foreach-1>foreach</a></li>
<li><a href=#while-1>while</a></li>
</ol>
</li>
<li><a href=#looping-over-multiple-steps>looping over multiple steps</a></li>
</ol>
</nav>
</aside>
<main class=grid-main>
<article>
<h1 id=loops>loops <a href=#loops class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h1><p>You can loop (or iterate) over any given step in a pypyr pipeline.</p>
<p>This means you can repeatedly run or loop over your own custom commands without
writing any code.</p>
<p>Looping happens on the step-level, using the following step decorators:</p>
<ul>
<li><a href=https://pypyr.io/docs/decorators/foreach/>foreach</a></li>
<li><a href=https://pypyr.io/docs/decorators/while/>while</a></li>
</ul>
<p>The difference is that <code>foreach</code> iterates over every element in an iterable
(such as a <code>list</code>), whereas <code>while</code> keeps on looping until a stop condition
evaluates <code>True</code>.</p>
<div class="admonition tip" role=figure>
<div class=admonition-tip-icon></div>
<div class=admonition-content>If you want to retry a step automatically until it succeeds, you can use
<a href=https://pypyr.io/docs/decorators/retry/>retry</a> instead of coding your own loop
with your own error handling.</div>
</div>
<p>You can specify a <code>foreach</code> or <code>while</code> loop on any given step. You can also nest
<code>foreach</code> and <code>while</code> loops on the same step.</p>
<h2 id=foreach>foreach <a href=#foreach class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Here is a simple <code>foreach</code> loop in action. For the sake of an easy example,
we&rsquo;re just calling <code>echo</code> here, but you can run any command you&rsquo;d like.</p>
<p>The iterator is <code>{i}</code>. This is the current item on each iteration of the
<code>foreach</code> iterable.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./foreach-example.yaml</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>loop over your own command</span><span class=w>
</span><span class=w>    </span><span class=nt>foreach</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;apple&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;pear&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;banana&#39;</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>echo mycommand --arg={i}</span><span class=w>
</span></code></pre></div><p>Running this will result in:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr foreach-example
mycommand --arg=apple
mycommand --arg=pear
mycommand --arg=banana

$
</code></pre></div>
<h2 id=while>while <a href=#while class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>A <code>while</code> loop iterates until a stop condition is <code>True</code>, such as any given
boolean expression evaluating <code>True</code>, or if it reaches a certain number of
iterations.</p>
<p>The current iteration count is <code>{whileCounter}</code>.</p>
<h3 id=while-with-max-count>while with max count <a href=#while-with-max-count class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>Here is a simple example of a <code>while</code> loop that continues until it reaches a
maximum iteration count:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./while-max-example</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>    </span><span class=nt>while</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>echo mycommand --arg={whileCounter}</span><span class=w>
</span></code></pre></div><p>Running this will result in:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr while-max-example
mycommand --arg=1
mycommand --arg=2
mycommand --arg=3

$
</code></pre></div>
<h3 id=while-with-stop-condition>while with stop condition <a href=#while-with-stop-condition class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>Here is a simple example of a <code>while</code> loop that continues until a stop condition
is <code>True</code>. In this example we&rsquo;re using a <a href=https://pypyr.io/docs/steps/py/>py</a> step
to run some custom inline python for every loop iteration, but as ever, you can
use any step you&rsquo;d like (including running your own external command or script
via <a href=https://pypyr.io/docs/steps/cmd/>cmd</a>).</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./while-stop-example</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.py</span><span class=w>
</span><span class=w>    </span><span class=nt>while</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>stop</span><span class=p>:</span><span class=w> </span>!<span class=l>py arb_value &gt; 5</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>py</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span><span class=sd>        arb_value = whileCounter * 2
</span><span class=sd>        print(f&#39;{arb_value=}&#39;)
</span><span class=sd>        save(&#39;arb_value&#39;)</span><span class=w>        
</span></code></pre></div><p>Running this will result in:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr while-stop-example
arb_value=2
arb_value=4
arb_value=6

$
</code></pre></div>
<h2 id=retry>retry <a href=#retry class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>If you specifically want to loop over a step until it succeeds, you don&rsquo;t have
to construct your own <code>while</code> loop, you can use pypyr&rsquo;s <a href=https://pypyr.io/docs/decorators/retry/>retry</a> decorator instead.</p>
<p>The <code>retry</code> decorator supports adding a sleep interval between retries with
various back-off strategies.</p>
<p>This example will automatically retry a command up to 3 times and only continue
if the command succeeds within the max limit:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./retry-example</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>    </span><span class=nt>retry</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>mycommand --arg=myvalue</span><span class=w>
</span></code></pre></div><p>If you want to retry infinitely, set <code>max: 0</code>.</p>
<div class="admonition tip" role=figure>
<div class=admonition-tip-icon></div>
<div class=admonition-content>See the Getting Started guide for <a href=https://pypyr.io/docs/getting-started/error-handling/>pypyr error handling</a>
for full details on error handling concepts.</div>
</div>
<h2 id=using-variables-to-loop>using variables to loop <a href=#using-variables-to-loop class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can parameterize your looping statements with <a href=https://pypyr.io/docs/getting-started/variables/>variables</a>. You can set variables in preceding steps, pass variables from
the cli, use <a href=https://pypyr.io/topics/environment-variables/>environment variables</a> or even load your variables from a separate configuration file using
something like <a href=https://pypyr.io/docs/steps/fetchjson/>fetchjson</a> or
<a href=https://pypyr.io/docs/steps/fetchyaml/>fetchyaml</a>.</p>
<h3 id=foreach-1>foreach <a href=#foreach-1 class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>In this example we&rsquo;re going to loop over every argument given to the cli and
inject it into a custom command:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./foreach-variable-example.yaml</span><span class=w>
</span><span class=w></span><span class=nt>context_parser</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.parser.list</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.set</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>set defaults for optional cli args</span><span class=w>
</span><span class=w>    </span><span class=nt>run</span><span class=p>:</span><span class=w> </span>!<span class=l>py len(argList) == 0</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>set</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>argList</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;one&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;two&#39;</span><span class=p>]</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>    </span><span class=nt>foreach</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{argList}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>echo mycommand --arg={i}</span><span class=w>
</span></code></pre></div><p>This example just uses the <code>argList</code> from the <a href=https://pypyr.io/docs/context-parsers/list/>pypyr.parser.list</a> context parser, but you can use any list you
might have in your context.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr foreach-variable-example
mycommand --arg=one
mycommand --arg=two

$ pypyr foreach-variable-example four five
mycommand --arg=four
mycommand --arg=five
</code></pre></div>
<h3 id=while-1>while <a href=#while-1 class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>You can use variables with any looping decorator. Here is an example using a
<code>while</code> loop where an environment variable controls the maximum iteration limit.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./while-variable-example.yaml</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.envget</span><span class=w>
</span><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>get $ARB environment variable</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>envGet</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w> </span><span class=l>ARB</span><span class=w>
</span><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>my_counter</span><span class=w>
</span><span class=w>        </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>    </span><span class=nt>while</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>max</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my_counter}&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>echo mycommand --arg={whileCounter}</span><span class=w>
</span></code></pre></div><p>If the <code>$ARB</code> environment variable does not exist, we use a default value of <code>3</code>
instead.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr while-variable-example
mycommand --arg=1
mycommand --arg=2
mycommand --arg=3

$ ARB=2 pypyr while-variable-example
mycommand --arg=1
mycommand --arg=2
</code></pre></div>
<h2 id=looping-over-multiple-steps>looping over multiple steps <a href=#looping-over-multiple-steps class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>If you want to loop over multiple steps as a unit, group these into a <a href=https://pypyr.io/docs/pipelines/pipeline-structure/#custom-step-groups>custom
step-group</a> and then use <a href=https://pypyr.io/docs/steps/call/>call</a>.</p>
<p>Alternatively, you can use <a href=https://pypyr.io/docs/steps/pype/>pype</a> to invoke
another pipeline repeatedly in a loop.</p>
<p>Either way, you can use <code>foreach</code> and/or <code>while</code> as you choose on these steps.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=c># ./foreach-call-example</span><span class=w>
</span><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.call</span><span class=w>
</span><span class=w>    </span><span class=nt>foreach</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;apple&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;pear&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;banana&#39;</span><span class=p>]</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>call</span><span class=p>:</span><span class=w> </span><span class=l>my_step_group</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>my_step_group</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=l>processing &#39;{i}&#39;</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>echo mycommand --arg={i}</span><span class=w>
</span></code></pre></div><p>This example just has an <code>echo</code> step and a <code>cmd</code> step in the step-group to
illustrate the point - you can have as many useful steps in a custom step-group
as you want. This is what it looks like at runtime:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>$ pypyr foreach-call-example
processing &#39;apple&#39;
mycommand --arg=apple
processing &#39;pear&#39;
mycommand --arg=pear
processing &#39;banana&#39;
mycommand --arg=banana
</code></pre></div>
</article>
<section class="see-also elevation-02">
<h2>see also</h2>
<ul>
<li><a href=/docs/decorators/while/>while loop decorator</a></li>
<li><a href=/docs/decorators/foreach/>foreach loop decorator</a></li>
<li><a href=/docs/getting-started/conditional-logic/>conditional logic</a></li>
<li><a href=/docs/steps/assert/>pypyr.steps.assert</a></li>
<li><a href=/docs/steps/call/>pypyr.steps.call</a></li>
</ul>
</section>
</main>
<aside class="grid-taxonomy elevation-02">
<section class=page-taxonomy aria-label="related topics">
<h6>topics</h6>
<ul id=topics class=small-list>
<li><a href=https://pypyr.io/topics/loops/ class=muted-with-hover>loops</a></li>
<li><a href=https://pypyr.io/topics/control-of-flow/ class=muted-with-hover>control-of-flow</a></li>
</ul>
</section>
</aside>
<aside class="grid-improve elevation-02" aria-labelledby=feedback>
<h6 id=feedback>feedback</h6>
<ul class=small-list>
<li><a href=https://github.com/pypyr/docs/edit/main/content/docs/getting-started/loops.md class=muted-with-hover>edit me</a></li>
<li><a href="https://github.com/pypyr/docs/issues/new?title=docs%20issue:loops&body=File:%20[loops]%28https://pypyr.io/docs/getting-started/loops/%29" class=muted-with-hover>report typo</a></li>
<li><a href="https://github.com/pypyr/pypyr/issues/new?title=Re:%20loops&labels=bug" class=muted-with-hover>report bug!</a></li>
</ul>
</aside>
<div class="page-git-info elevation-02">
<small class=small-block>last updated on <time datetime=2021-10-05T14:41:15+01:00>2021-10-05 14:41</time>.</small>
</div>
</div>
<footer class="footer elevation-01">
<a href=/ class=top-nav-logo aria-label=home>
<img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo">
</a>
<div class=col-1fr-centered>
<ul class=footer-social-links aria-label="social media links"><li>
<a href=https://twitter.com/pypyrpipes/ class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 400 400"><title>twitter link</title><use xlink:href="https://pypyr.io/icons/twitter-social-icon-circle-white.d715a98bf8d7170b3d2603d836ca675616731d85583c13d23ec468905e77c59a.svg#twitter-icon"/></svg></div>
<small>twitter</small>
</a>
</li><li>
<a href=https://github.com/pypyr/pypyr/ class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 32.58 31.77"><title>github link</title><use xlink:href="https://pypyr.io/icons/github-icon.778bc8065fb7e8d1e7109b270cfbd86e15e05bb16ebff30d261935e4bc1560bd.svg#github-icon"/></svg></div>
<small>github</small>
</a>
</li><li>
<a href=https://github.com/pypyr/pypyr/discussions class=footer-social-link>
<div class=footer-social-links-pre><svg viewBox="0 0 16 16"><title>discussion forum link</title><use xlink:href="https://pypyr.io/icons/discussions.a9f14951d81276183aaea73b6d616db95326f8f16350b221d9d6d48ee5a0b16e.svg#discussions-icon"/></svg>
</div>
<small>forum</small>
</a>
</li></ul>
<ul class=footer-notices-links aria-label="legal notices"><li>
<a href=/legal/privacy-notice class=muted-with-hover>
<small>privacy</small>
</a>
</li><li>
<a href=/legal/licensing class=muted-with-hover>
<small>licensing</small>
</a>
</li><li>
<a href=/press-kit class=muted-with-hover>
<small>press</small>
</a>
</li></ul>
</div>
</footer>
<div class=bottom-spacer aria-hidden=true></div>
<div id=disabled-state-overlay aria-hidden=true class="disabled-state-overlay hide-overlay"></div>
</body>
</html>