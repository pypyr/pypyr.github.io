<!doctype html><html lang=en dir=ltr prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>pypyr.steps.cmd | pypyr</title><meta name=description content="Execute any external program, command or script as a task in a task-runner pipeline step."><link rel=stylesheet href=https://pypyr.io/css/styles.min.5173637d874e012d84bb859e8f72791eb48cf798feeff3480b1db6bfa97be924.css integrity="sha256-UXNjfYdOAS2Eu4Wej3J5HrSM95j+7/NICx22v6l76SQ="><link rel=stylesheet href=https://pypyr.io/css/code-highlight.min.78f63f1d4f45beaf423efd3dc8e6914c2abdca1b5391cd91368a32efecd9d7e3.css integrity="sha256-ePY/HU9Fvq9CPv09yOaRTCq9yhtTkc2RNooy7+zZ1+M="><script defer src=https://pypyr.io/js/script.min.8c51c28efa613c3bc853b2418e260b33482af182f6ca8ebeeb825b5b8e094423.js integrity="sha256-jFHCjvphPDvIU7JBjiYLM0gq8YL2yo6+64JbW44JRCM="></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700%7cRoboto+Mono:400,400i&display=swap" rel=stylesheet><link rel=canonical href=https://pypyr.io/docs/steps/cmd/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-147150909-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-147150909-1")</script><meta property="og:description" content="Execute any external program, command or script as a task in a task-runner pipeline step."><meta property="og:image" content="https://pypyr.io/images/1.91x1/pypyr-taskrunner-yaml-pipeline-automation-1200x628.5aa6465b3b9d2ca8d0d5a9f794ba7f379c522a8ba503129f2a35d2479ea2452d.png"><meta property="og:image:alt" content="pypyr is an open-source task-runner for automation pipelines defined in simple human-readable yaml."><meta property="og:image:height" content="628"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:site_name" content="pypyr technical documentation"><meta property="og:title" content="Execute external commands in a task-runner pipeline."><meta property="og:type" content="website"><meta property="og:url" content="https://pypyr.io/docs/steps/cmd/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@pypyrpipes"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@id":"https://pypyr.io/#organization","@type":"Organization","name":"pypyr","url":"https://pypyr.io/","description":"The pypyr project is a free open-source task-runner cli \u0026 python api for automation pipelines.","logo":{"@type":"ImageObject","url":"https://pypyr.io/images/pypyr-taskrunner-logo-square.63875e43ff40d8ae40e93a6043b4328b962f54f52974aaa27cedec52220de665.svg","height":112,"width":112},"sameAs":["https://github.com/pypyr/","https://twitter.com/pypyrpipes/","https://pypi.org/user/pypyr/","https://hub.docker.com/u/pypyr/","https://en.gravatar.com/pypyr/"]},{"@type":"TechArticle","author":{"@type":"Person","name":"pypyr contributor","url":"https://pypyr.io/"},"articleSection":"steps","dateModified":"2022-05-26T12:27:15+01:00","datePublished":"2020-06-13T21:38:57+01:00","headline":"Execute any external program, command or script as a task in a pipeline step.","image":[{"@type":"ImageObject","url":"https://pypyr.io/images/1x1/pypyr-taskrunner-yaml-pipeline-automation-1200x1200.52764d3c6f40232b3cdc33f5b8fbaeadad56cc310c8dd5588d30828296b5290d.png","height":1200,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/4x3/pypyr-taskrunner-yaml-pipeline-automation-1200x900.e8e70443377aeb11c190835e8d2ed0c844d31a82a0c2e8a744a9999cd03e0de9.png","height":900,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/16x9/pypyr-taskrunner-yaml-pipeline-automation-1920x1080.cc9ae11626c8312e087058adb13bfff702162ce39c355065170c1b87850f3034.png","height":1080,"width":1920}],"inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https://pypyr.io/docs/steps/cmd/"},"publisher":{"@id":"https://pypyr.io/#organization"},"thumbnailUrl":"https://pypyr.io/images/pypyr-taskrunner-logo-square.63875e43ff40d8ae40e93a6043b4328b962f54f52974aaa27cedec52220de665.svg","url":"https://pypyr.io/docs/steps/cmd/","wordCount":2454}]}</script><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.925deabb48d91a80924b5d04ff56d2b8f42ba1d1e1438cb7d8948cce1138208c.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.b869433d27c4679a5fbce03a8489268a539cbc781259bff14618ae2f018334e6.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.8bcd9f870e0a86445e0505ce6e816b76a40b08a06e2dcd1ec1f90c395ecbeaf6.png><link rel=manifest href=/favicons/site.3dad2bd5063ad6bc11f741ea28adf4df8b9370196f6e64af6789cf181cef05c6.webmanifest><link rel="shortcut icon" href=/favicons/favicon.4a2a3dffd965a7c571df0375e35f59307bc72adc08e3ef7021d5d5f02e6ef5a8.ico><meta name=msapplication-TileColor content="#00aba9"><meta name=msapplication-config content="/favicons/browserconfig.bbdaec7f39b7bd1f2d6bc484afdd0c7246e3af9c5b45d91198d8a3b42e024e1f.xml"><meta name=theme-color content="#121212"></head><body class=docs-grid><header class="header elevation-01"><a href=/ class=top-nav-logo aria-label=home><img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo"></a><nav class=top-nav-links aria-label="top navigation"><ul><li><a href=/docs/ class=top-active>docs</a></li><li><a href=/updates/>updates</a></li><li><a href=/topics/>topics</a></li><li><a href=https://twitter.com/pypyrpipes/><span class=top-nav-links-pre><svg viewBox="0 0 250 203.18"><title>twitter link</title><use xlink:href="https://pypyr.io/images/twitter-logo.4bee83a61c7b1a567b9a00ea1ac9388de3b16ffbffac9e228f998a5411894c59.svg#twitter-logo"/></svg></span></a></li><li><a href=https://github.com/pypyr/pypyr/><span class=top-nav-links-pre><svg viewBox="0 0 477 97.41"><title>github repo</title><use xlink:href="https://pypyr.io/images/github-mark-and-logo.5df312655c6a99a4953b544d02b13a948fa4d66bda21e772206f0ed96663f05b.svg#github-mark-and-logo"/></svg></span></a></li></ul></nav></header><button id=show-leftnav class="neutral-button icon-button primary-button"><svg class="show-leftnav-chevron"><title>open main navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg></button><nav id=leftnavmenu class="leftnavmenu elevation-03" aria-label="Primary Navigation"><button id=hide-leftnav class="neutral-button icon-button"><svg class="hide-leftnav-chevron"><title>close navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg></button><ul class=leftnavroot><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>getting started</span></span></button><ul class=nested><li><a href=/docs/getting-started/>overview</a></li><li><a href=/docs/getting-started/installation/>install pypyr</a></li><li><a href=/docs/getting-started/run-your-first-pipeline/>run your first pipeline</a></li><li><a href=/docs/getting-started/basic-concepts/>basic concepts</a></li><li><a href=/docs/getting-started/variables/>variables</a></li><li><a href=/docs/getting-started/conditional-logic/>conditional logic</a></li><li><a href=/docs/getting-started/loops/>loops</a></li><li><a href=/docs/getting-started/error-handling/>error handling</a></li><li><a href=/docs/getting-started/config/>config</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>cli</span></span></button><ul class=nested><li><a href=/docs/cli/>overview</a></li><li><a href=/docs/cli/run-a-pipeline/>run a pipeline</a></li><li><a href=/docs/cli/custom-args/>custom args</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>pipelines</span></span></button><ul class=nested><li><a href=/docs/pipelines/>overview</a></li><li><a href=/docs/pipelines/pipeline-structure/>pipeline structure</a></li><li><a href=/docs/pipelines/lookup-order/>lookup order</a></li><li><a href=/docs/pipelines/shortcuts/>shortcuts</a></li><li><a href=/docs/pipelines/builtin-pipelines/>built-in pipelines</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>context parsers</span></span></button><ul class=nested><li><a href=/docs/context-parsers/>overview</a></li><li><a href=/docs/context-parsers/dict/>dict</a></li><li><a href=/docs/context-parsers/json/>json</a></li><li><a href=/docs/context-parsers/jsonfile/>jsonfile</a></li><li><a href=/docs/context-parsers/keys/>keys</a></li><li><a href=/docs/context-parsers/keyvaluepairs/>keyvaluepairs</a></li><li><a href=/docs/context-parsers/list/>list</a></li><li><a href=/docs/context-parsers/string/>string</a></li><li><a href=/docs/context-parsers/tomlfile/>tomlfile</a></li><li><a href=/docs/context-parsers/yamlfile/>yamlfile</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>decorators</span></span></button><ul class=nested><li><a href=/docs/decorators/>overview</a></li><li><a href=/docs/decorators/comment/>comment</a></li><li><a href=/docs/decorators/description/>description</a></li><li><a href=/docs/decorators/foreach/>foreach</a></li><li><a href=/docs/decorators/in/>in</a></li><li><a href=/docs/decorators/onerror/>onError</a></li><li><a href=/docs/decorators/retry/>retry</a></li><li><a href=/docs/decorators/run/>run</a></li><li><a href=/docs/decorators/skip/>skip</a></li><li><a href=/docs/decorators/swallow/>swallow</a></li><li><a href=/docs/decorators/while/>while</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron nav-chevron-down"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span></span></button><ul class="nested expand"><li><a href=/docs/steps/>overview</a></li><li><a href=/docs/steps/add/>add</a></li><li><a href=/docs/steps/append/>append</a></li><li><a href=/docs/steps/assert/>assert</a></li><li><a href=/docs/steps/call/>call</a></li><li class=currentpage><a href=/docs/steps/cmd/>cmd</a></li><li><a href=/docs/steps/cmds/>cmds</a></li><li><a href=/docs/steps/configvars/>configvars</a></li><li><a href=/docs/steps/contextclear/>contextclear</a></li><li><a href=/docs/steps/contextclearall/>contextclearall</a></li><li><a href=/docs/steps/contextcopy/>contextcopy</a></li><li><a href=/docs/steps/contextmerge/>contextmerge</a></li><li><a href=/docs/steps/contextsetf/>contextsetf</a></li><li><a href=/docs/steps/debug/>debug</a></li><li><a href=/docs/steps/default/>default</a></li><li><a href=/docs/steps/echo/>echo</a></li><li><a href=/docs/steps/env/>env</a></li><li><a href=/docs/steps/envget/>envget</a></li><li><a href=/docs/steps/fetchjson/>fetchjson</a></li><li><a href=/docs/steps/fetchtoml/>fetchtoml</a></li><li><a href=/docs/steps/fetchyaml/>fetchyaml</a></li><li><a href=/docs/steps/fileformat/>fileformat</a></li><li><a href=/docs/steps/fileformatjson/>fileformatjson</a></li><li><a href=/docs/steps/fileformattoml/>fileformattoml</a></li><li><a href=/docs/steps/fileformatyaml/>fileformatyaml</a></li><li><a href=/docs/steps/fileread/>fileread</a></li><li><a href=/docs/steps/filereplace/>filereplace</a></li><li><a href=/docs/steps/filewrite/>filewrite</a></li><li><a href=/docs/steps/filewritejson/>filewritejson</a></li><li><a href=/docs/steps/filewritetoml/>filewritetoml</a></li><li><a href=/docs/steps/filewriteyaml/>filewriteyaml</a></li><li><a href=/docs/steps/glob/>glob</a></li><li><a href=/docs/steps/jsonparse/>jsonparse</a></li><li><a href=/docs/steps/jump/>jump</a></li><li><a href=/docs/steps/now/>now</a></li><li><a href=/docs/steps/nowutc/>nowutc</a></li><li><a href=/docs/steps/pathcheck/>pathcheck</a></li><li><a href=/docs/steps/py/>py</a></li><li><a href=/docs/steps/pyimport/>pyimport</a></li><li><a href=/docs/steps/pype/>pype</a></li><li><a href=/docs/steps/pypyrversion/>pypyrversion</a></li><li><a href=/docs/steps/python/>python</a></li><li><a href=/docs/steps/safeshell/>safeshell</a></li><li><a href=/docs/steps/set/>set</a></li><li><a href=/docs/steps/shell/>shell</a></li><li><a href=/docs/steps/shells/>shells</a></li><li><a href=/docs/steps/stop/>stop</a></li><li><a href=/docs/steps/stoppipeline/>stoppipeline</a></li><li><a href=/docs/steps/stopstepgroup/>stopstepgroup</a></li><li><a href=/docs/steps/tar/>tar</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>substitutions</span></span></button><ul class=nested><li><a href=/docs/substitutions/>overview</a></li><li><a href=/docs/substitutions/format-string/>format string</a></li><li><a href=/docs/substitutions/jsonify/>jsonify</a></li><li><a href=/docs/substitutions/py-strings/>py string</a></li><li><a href=/docs/substitutions/sic-strings/>sic string</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>plugins</span></span></button><ul class=nested><li><a href=/docs/plugins/>overview</a></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>aws</span></span></button><ul class=nested><li><a href=/docs/plugins/aws/>overview</a></li><li><a href=/docs/plugins/aws/authentication/>authentication</a></li><li><a href=/docs/plugins/aws/substitutions/>substitutions</a></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span></span></button><ul class=nested><li><a href=/docs/plugins/aws/steps/>overview</a></li><li><a href=/docs/plugins/aws/steps/client/>client</a></li><li><a href=/docs/plugins/aws/steps/ecswaitprep/>ecswaitprep</a></li><li><a href=/docs/plugins/aws/steps/s3fetchjson/>s3fetchjson</a></li><li><a href=/docs/plugins/aws/steps/s3fetchyaml/>s3fetchyaml</a></li><li><a href=/docs/plugins/aws/steps/wait/>wait</a></li><li><a href=/docs/plugins/aws/steps/waitfor/>waitfor</a></li></ul></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>slack</span></span></button><ul class=nested><li><a href=/docs/plugins/slack/>overview</a></li><li><a href=/docs/plugins/slack/authentication/>authentication</a></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span></span></button><ul class=nested><li><a href=/docs/plugins/slack/steps/>overview</a></li><li><a href=/docs/plugins/slack/steps/send/>send</a></li></ul></li></ul></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>api</span></span></button><ul class=nested><li><a href=/docs/api/>overview</a></li><li><a href=/docs/api/custom-module-search-path/>custom module search path</a></li><li><a href=/docs/api/context-parser/>context parser</a></li><li><a href=/docs/api/pipeline-loader/>pipeline loader</a></li><li><a href=/docs/api/retry-backoff/>retry backoff</a></li><li><a href=/docs/api/run-pipeline/>run pipeline</a></li><li><a href=/docs/api/step/>step</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>contributing</span></span></button><ul class=nested><li><a href=/docs/contributing/>overview</a></li><li><a href=/docs/contributing/contribute-to-pypyr/>contribute to pypyr</a></li><li><a href=/docs/contributing/developers-guide/>developer's guide for pypyr</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>thank you</span></span></button><ul class=nested><li><a href=/docs/thank-you/>overview</a></li><li><a href=/docs/thank-you/built-with-hugo/>built with hugo</a></li><li><a href=/docs/thank-you/dependencies/>dependencies</a></li></ul></li></ul></nav><div class="docs-content content-grid"><ol class=breadcrumb vocab="http://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/><span property="name">pypyr</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/docs/><span property="name">docs</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/docs/steps/><span property="name">steps</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><span property="name">cmd</span><meta property="position" content="4"></li></ol><aside class="grid-toc elevation-02"><h6 id=table-of-contents>on this page</h6><nav id=TableOfContents><ol><li><a href=#execute-external-commands-applications--scripts>execute external commands, applications & scripts</a></li><li><a href=#run-single-command>run single command</a></li><li><a href=#inject-variables-into-command>inject variables into command</a></li><li><a href=#run-multiple-commands-in-same-step>run multiple commands in same step</a></li><li><a href=#change-the-working-directory>change the working directory</a></li><li><a href=#save-output-stdout--stderr>save output stdout & stderr</a><ol><li><a href=#save-output-for-multiple-commands>save output for multiple commands</a></li><li><a href=#debugging-output>debugging output</a></li><li><a href=#encoding>encoding</a></li><li><a href=#binary-output>binary output</a></li></ol></li><li><a href=#save-output-to-file>save output to file</a></li><li><a href=#redirect-output-to-null-device>redirect output to null device</a></li><li><a href=#spaces-in-paths--args>spaces in paths & args</a></li><li><a href=#microsoft-windows>microsoft windows</a></li><li><a href=#invoking-python>invoking python</a></li></ol></nav></aside><main class=grid-main><article><h1 id=pypyrstepscmd>pypyr.steps.cmd <a href=#pypyrstepscmd class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h1><h2 id=execute-external-commands-applications--scripts>execute external commands, applications & scripts <a href=#execute-external-commands-applications--scripts class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Run a program, run an external script, application or command. Execute an
executable as a sub-process.</p><p><code>cmd</code> runs an executable, it does not invoke the shell. You cannot use shell
features like exit, return, shell pipes, filename wildcards, environment
variable expansion, and expansion of ~ to a user&rsquo;s home directory. Use
<a href=https://pypyr.io/docs/steps/shell/>pypyr.steps.shell</a> for that instead.</p><p>This step runs executables serially one after the other. Use
<a href=https://pypyr.io/docs/steps/cmds/>cmds for asynchronous parallel execution</a> instead if you
want concurrent execution.</p><h2 id=run-single-command>run single command <a href=#run-single-command class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Input context for a single command instruction can take one of two forms:</p><ul><li>Simple syntax is just a simple string giving a single run instruction.</li><li>Expanded syntax allows you to set additional options to control how you want
to run the executable.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c>#  simple syntax just runs with defaults</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>passing cmd as a string does not save output to context.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=l>it prints stdout &amp; stderr in real-time.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>git log --oneline -1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># expanded syntax lets you change the default run settings</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>passing cmd as a dict allows you to override defaults</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>git log --oneline -1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w> </span><span class=c># optional. Set True to save cmd output to context.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>./path/dir/here</span><span class=w> </span><span class=c># optional. Defaults to current execution dir.</span><span class=w>
</span></span></span></code></pre></div><p>For the sake of example we&rsquo;re just invoking a read-only operation of the <code>git</code>
program to show the last commit. If you&rsquo;re not in a git repo this would
obviously error.</p><p>You can specify the full absolute path to the command, or use a relative path.
If you are using a relative path, the cmd will try to resolve relative the
current working directory before searching <code>$PATH</code>.</p><p>These are all the options available in expanded syntax:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c>#  when save: True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>when save is True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>curl https://myurl.blah/diblah</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>bytes</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>utf-8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c>#  when save: False</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>when save is False (the default when `save` not set)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>curl --cert certfile --key keyfile https://myurl.blah/diblah</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># save: False - false by default, no need to specify explicitly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>..</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=l>./path/out.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stderr</span><span class=p>:</span><span class=w> </span><span class=l>./path/err.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w>
</span></span></span></code></pre></div><p>Only <code>run</code> is mandatory in expanded syntax. All other inputs are optional. The
example shows which options are relevant depending on whether <code>save</code> is <code>True</code>
or <code>False</code>. <code>save</code> is <code>False</code> by default.</p><h2 id=inject-variables-into-command>inject variables into command <a href=#inject-variables-into-command class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can inject context variables into your command. This means you can use any
of the pypyr <a href=https://pypyr.io/topics/context/>context manipulation steps</a> to
manipulate your inputs and then pass these to the command.</p><p>Supports string <a href=https://pypyr.io/docs/substitutions/>substitutions</a> for all step
inputs in expanded syntax.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>set some arb values in context</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>set</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>in_file</span><span class=p>:</span><span class=w> </span><span class=l>input.avi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>out_file</span><span class=p>:</span><span class=w> </span><span class=l>output.avi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kbits</span><span class=p>:</span><span class=w> </span><span class=m>64</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>arb-key</span><span class=p>:</span><span class=w> </span><span class=l>log</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>my-var</span><span class=p>:</span><span class=w> </span>-<span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>my-path</span><span class=p>:</span><span class=w> </span><span class=l>./mypath/mydir</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># simple syntax</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>use substitution expressions to inject variables into cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>ffmpeg -i {in_file} -b:v {kbits}k -bufsize {kbits}k {out_file}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># expanded syntax</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>substitutions work on all inputs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>git {arb-key} --oneline {my-var}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{my-path}&#39;</span><span class=w> </span><span class=c># set any step input option with formatting expression</span><span class=w>
</span></span></span></code></pre></div><h2 id=run-multiple-commands-in-same-step>run multiple commands in same step <a href=#run-multiple-commands-in-same-step class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can use a list input to run multiple executables in the same step:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c>#  simple syntax</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>list of run instructions</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>git log --oneline -1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>git config -l</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># any or all of the list items can be in expanded syntax</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>you can mix &amp; match simple strings and expanded dict inputs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>git log --oneline -1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>git config -l</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>./path/mydir</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>git status --porcelain</span><span class=w>
</span></span></span></code></pre></div><p>In expanded syntax, the value of <code>run</code> can be a single run instruction, or it
can be a list of run instructions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>apply the same settings to multiple commands</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>git log --oneline -1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>git config -l</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>./path/mydir</span><span class=w>
</span></span></span></code></pre></div><p>This allows you to set non-default options for the entire sequence of commands
in <code>run</code>. In this example each command in the <code>run</code> list will run in the
specified <code>cwd</code> directory.</p><p>You can also make <code>run</code> a list of instructions even when the expanded input is
already part of a list of run instructions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>you can mix &amp; match simple strings and expanded dict inputs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./a-executable --arg one</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>./b-executable --arg two</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>./c-executable --arg three</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>./path/mydir</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./d-executable --arg four</span><span class=w>
</span></span></span></code></pre></div><p>In all of these cases you can use any valid combination of step input
properties with the expanded syntax:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./a-executable --arg one</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./b-executable --arg two</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>./</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>bytes</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>utf-8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=c># run can be a single str or a list of str</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>c-executable --arg three</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>d-executable --arg four</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>../</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=l>./path/out.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>stderr</span><span class=p>:</span><span class=w> </span><span class=l>./path/err.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./e-executable --arg five</span><span class=w>
</span></span></span></code></pre></div><h2 id=change-the-working-directory>change the working directory <a href=#change-the-working-directory class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>If you specify <code>cwd</code>, pypyr will change the current working directory to
<code>cwd</code> to execute the command.</p><p>The directory change is only for the duration of this step, not any subsequent
steps.</p><p>If you do not specify <code>cwd</code>, it defaults to the current working directory,
which is from wherever you are running pypyr.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>run command in different directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>git log --oneline -1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>path/mydir</span><span class=w>
</span></span></span></code></pre></div><p>If you do specify <code>cwd</code>, the executable or program set in <code>run</code> is relative to
the <code>cwd</code> if the <code>run</code> cmd specifies a relative path.</p><div class="admonition warn" role=figure><div class=admonition-warn-icon></div><div class=admonition-content><p>On Windows this is more complicated. When setting <code>cwd</code>, the cmd itself will
NOT resolve relative to your <code>cwd</code> setting. It will resolve relative to the
actual current working directory. You might want to use a full/absolute path
instead. If you do use a relative path, you have to use \ rather than / in the
path. Both \ and / works for full/absolute paths. See the
<a href=#microsoft-windows>Windows section</a> further down for details.</p><p>Once the cmd is actually running it will use the <code>cwd</code> value internally.</p><p>See the Windows documentation of the <code>lpApplicationName</code> and <code>lpCommandLine</code>
parameters of WinAPI <code>CreateProcess</code> for gory details.</p></div></div><p>The <code>cwd</code> you set applies to all the run instructions in <code>run</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>each cmd in run will execute in cwd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>git log --oneline -1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>git status</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cwd</span><span class=p>:</span><span class=w> </span><span class=l>path/mydir</span><span class=w> </span><span class=c># cwd applies to each instruction in run</span><span class=w>
</span></span></span></code></pre></div><p>As usual for paths, you can use <code>.</code> for current and <code>..</code> for the parent
directory.</p><h2 id=save-output-stdout--stderr>save output stdout & stderr <a href=#save-output-stdout--stderr class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Set <code>save: True</code> to capture the command&rsquo;s output.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>save output to context.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./my-executable --arg1 value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span></code></pre></div><p>If <code>save: True</code>, pypyr will save the output to context <code>cmdOut</code> as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>cmdOut.returncode</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>cmdOut.stdout</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;stdout str here. None if empty.&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>cmdOut.stderr</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;stderr str here. None if empty.&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>cmdOut.cmd</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;./my-executable&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;--arg1&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;value&#39;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></div><p><code>cmdOut.returncode</code> is the exit status of the called process. Typically
0 means OK. A negative value -N indicates that the child was terminated
by signal N (POSIX only).</p><p>You can use <code>cmdOut</code> in subsequent steps like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>echo 1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span>!<span class=l>py cmdOut.returncode == 0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;you&#39;ll only see me if cmd ran successfully with return code 0.
</span></span></span><span class=line><span class=cl><span class=s2>            the command output was: {cmdOut.stdout}.
</span></span></span><span class=line><span class=cl><span class=s2>            the error output was: {cmdOut.stderr}.&#34;</span><span class=w>
</span></span></span></code></pre></div><p>Be aware that if <code>save</code> is <code>True</code>, all of the command output ends up in
memory. Don&rsquo;t set it unless your pipeline actually uses the stdout/stderr
response in subsequent steps. Instead of saving the output to memory like this,
you can alternatively <a href=#save-output-to-file>write output to file</a>.</p><p>Only use <code>save: True</code> when you actually need to use the stdout or stderr output
in subsequent steps - you don&rsquo;t need to set it just to check that the return
code is 0, since pypyr will raise an error automatically if it&rsquo;s not. If this is
not what you want, you can suppress errors with the <a href=https://pypyr.io/docs/decorators/swallow/>swallow decorator</a> and use the <a href=https://pypyr.io/docs/getting-started/error-handling/#use-runtime-error-details-inside-pipeline>runErrors</a> list on subsequent steps.</p><p>If <code>swallow</code> is False (which is the default), you can access <code>cmdOut</code> and/or the
<code>runErrors</code> list in a
<a href=https://pypyr.io/docs/getting-started/error-handling/#failure-handlers>failure handler</a>.</p><p>The <code>cmdOut</code> key contains a <code>SubprocessResult</code> instance. The full schema for
this object is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>SubProcessResult</span><span class=p>():</span>
</span></span><span class=line><span class=cl>  <span class=n>cmd</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=c1># the input cmd split into args</span>
</span></span><span class=line><span class=cl>  <span class=n>returncode</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>  <span class=n>stdout</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=nb>bytes</span> <span class=o>|</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>  <span class=n>stderr</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=nb>bytes</span> <span class=o>|</span> <span class=kc>None</span>
</span></span></code></pre></div><p>Note on Windows that the result&rsquo;s <code>cmd</code> attribute is the original string, on all
other platforms it is a list of args split from the original input string.</p><h3 id=save-output-for-multiple-commands>save output for multiple commands <a href=#save-output-for-multiple-commands class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>When the cmd step runs more than one instruction with <code>save: True</code>, the <code>cmdOut</code>
variable in context will be a list. Each list item is a SubprocessResult in the
same format as the output for a single command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>cmdOut</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>returncode</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;stdout str here. None if empty.&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>stderr</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;stderr str here. None if empty.&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>returncode</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;stdout str here. None if empty.&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>stderr</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;stderr str here. None if empty.&#39;</span><span class=w>
</span></span></span></code></pre></div><p>The list is in the order the commands were executed. The list will contain only
commands where <code>save</code> is <code>True</code>. This means that if your step input is a list
where only some commands have <code>save: True</code>, only those will be in <code>cmdOut</code> and
the other commands will not be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>only 2, 3 &amp; 5 saves to cmdOut</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>a-executable --arg one</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>b-executable --arg two</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=l>c-executable --arg three</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>d-executable --arg four</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>e-executable --arg five</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span></code></pre></div><p>In this example the <code>cmdOut</code> list will contain 3 items - the output for b, c
and e-executable.</p><p>You can use the <code>cmdOut</code> list in subsequent steps like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span>!<span class=l>py cmdOut[0].returncode == 0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            you&#39;ll only see me if cmd ran successfully with return code 0.
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            For the first command,
</span></span></span><span class=line><span class=cl><span class=sd>            the command output was: {cmdOut[0].stdout}
</span></span></span><span class=line><span class=cl><span class=sd>            the error output was: {cmdOut[0].stderr}
</span></span></span><span class=line><span class=cl><span class=sd>            
</span></span></span><span class=line><span class=cl><span class=sd>            And for the second command,
</span></span></span><span class=line><span class=cl><span class=sd>            the command output was: {cmdOut[1].stdout}
</span></span></span><span class=line><span class=cl><span class=sd>            the error output was: {cmdOut[1].stderr}</span><span class=w>            
</span></span></span></code></pre></div><p>Notice that you reference each cmd&rsquo;s output on a zero-based index - i.e the
1st item is in position 0.</p><p>Notice the difference in formatting expression when the step only ran a single
command vs when multiple commands had <code>save</code> set to True:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># single cmd output</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;</span><span class=si>{cmdOut.stdout}</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># list of command outputs</span>
</span></span><span class=line><span class=cl><span class=c1># the 1st output is at index 0</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;</span><span class=si>{cmdOut[0].stdout}</span><span class=s1>&#39;</span>
</span></span></code></pre></div><h3 id=debugging-output>debugging output <a href=#debugging-output class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>A quick way of seeing exactly what is in <code>cmdOut</code> is just to echo it out:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.echo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>echoMe</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{cmdOut}&#39;</span><span class=w>
</span></span></span></code></pre></div><p>OP debugging FTW!</p><h3 id=encoding>encoding <a href=#encoding class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>By default pypyr treats the command output as text. It decodes the bytes
returned by the executable using the default system encoding and strips
white-space like line-feeds from the end.</p><p>If you are saving output from an executable that is not in the default encoding,
you can set the <code>encoding</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>save output &amp; decode in specified encoding.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./my-executable --arg1 value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>utf-16</span><span class=w>
</span></span></span></code></pre></div><p>The <code>encoding</code> setting is only applicable when <code>save</code> is <code>True</code>. Both stdout &
stderr will use the encoding you set.</p><p>The default system encoding is very likely to be <code>utf-8</code>, unless you&rsquo;re on
Windows. See here for a <a href=https://docs.python.org/3/library/codecs.html#standard-encodings>list of available encoding
codecs</a>.</p><p>You can change the
<a href=https://pypyr.io/docs/getting-started/config/#default_cmd_encoding>default_cmd_encoding setting in config</a>
to use a different default here.</p><h3 id=binary-output>binary output <a href=#binary-output class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>By default pypyr deals with the executable&rsquo;s output as text in the system&rsquo;s
default encoding. If you want to capture the output as raw bytes without any
text decoding & line-ending handling, you can set <code>bytes: True</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>save the output as raw bytes.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=l>this will bypass all text decoding.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./my-executable --arg1 value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>save</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>bytes</span><span class=p>:</span><span class=w> </span><span class=kc>True</span><span class=w>
</span></span></span></code></pre></div><p>The <code>bytes</code> setting is only applicable when <code>save</code> is <code>True</code>. Both stdout &
stderr will save the raw bytes returned by the executable when <code>bytes: True</code>.</p><p>If you combine <code>bytes: True</code> and <code>encoding</code> pypyr will decode the output in
the specified encoding but it won&rsquo;t perform line-ending normalization - so
your output might have line-endings at the end depending on the executable
you&rsquo;re calling.</p><h2 id=save-output-to-file>save output to file <a href=#save-output-to-file class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>By default, the executable output writes to the parent process&rsquo; stdout &
stderr streams. Normally this means that any program output will print
in the terminal from where you are running pypyr.</p><p>You can save the output to file instead:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>save the output to file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=l>this will NOT print the output to console,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=l>but redirect it to the output files instead.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./my-executable --arg1 value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=l>mydir/out.txt</span><span class=w> </span><span class=c># optional. write stdout to this file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stderr</span><span class=p>:</span><span class=w> </span><span class=l>mydir/err.txt</span><span class=w> </span><span class=c># optional. write stderr to this file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>append</span><span class=p>:</span><span class=w> </span><span class=kc>False</span><span class=w> </span><span class=c># optional. Default False.</span><span class=w>
</span></span></span></code></pre></div><p>Set <code>append</code> to <code>True</code> to append output if the file(s) exists already.
If <code>append</code> is <code>False</code> it will overwrite any existing file - this is the default
option when you don&rsquo;t explicitly set <code>append</code>.</p><p>If you want error output to write to the same file as <code>stdout</code>, you can use
the special value <code>/dev/stdout</code> to redirect stderr to stdout:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>save both stdout &amp; stderr output to the same file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=l>this will NOT print the output to console,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=l>but redirect it to the output file instead.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./my-executable --arg1 value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=l>mydir/out.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stderr</span><span class=p>:</span><span class=w> </span><span class=l>/dev/stdout</span><span class=w>
</span></span></span></code></pre></div><div class="admonition tip" role=figure><div class=admonition-tip-icon></div><div class=admonition-content><p>A lot of cli tools have a built-in option to output to file, which you might
want to use instead of redirecting stdout to file via pypyr.</p><p>For example, with <code>curl</code> you use the <code>-o</code>/<code>--output</code> switch to specify an
output file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>curl https://myurl.arb/blah -o myfile.txt
</span></span></code></pre></div></div></div><p>When you set either/both of stdout & stderr, you cannot also set <code>save: True</code>,
since these are mutually exclusive.</p><h2 id=redirect-output-to-null-device>redirect output to null device <a href=#redirect-output-to-null-device class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can discard the executable&rsquo;s output when you redirect any or both of stdout
& stderr to the system&rsquo;s Null device with the special value <code>/dev/null</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>discard all output.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./my-executable --arg1 value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=l>/dev/null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stderr</span><span class=p>:</span><span class=w> </span><span class=l>/dev/null</span><span class=w>
</span></span></span></code></pre></div><p>The previous example redirects both stdout & stderr. You can also selectively
redirect only one of these to dump to null - so if you want to see stderr output
but not standard output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>only suppress stdout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./my-executable --arg1 value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>stdout</span><span class=p>:</span><span class=w> </span><span class=l>/dev/null</span><span class=w>
</span></span></span></code></pre></div><p>When you redirect output to the null device it will not print to console.</p><h2 id=spaces-in-paths--args>spaces in paths & args <a href=#spaces-in-paths--args class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Depending on your O/S and file-system, it&rsquo;s up to you to deal with special
characters in the path of the command or program you want to run.</p><p>Generally you can put either just the path-segment with a space into quotes,
or you can escape the entire path by putting quotes around the whole thing.</p><p>If a single argument contains a space, surround it with double-quotes.</p><p>To illustrate some of the options:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;dir with space/file with space&#34; arg1 &#34;arg2 with space&#34;&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;dir with space&#34;/&#34;file with space&#34;&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>./&#34;dir with space&#34;/&#34;file with space&#34;</span><span class=w>
</span></span></span></code></pre></div><p>Note the &ldquo;extra&rdquo; pair of single-quotes (&rsquo;) is there when the string begins and
ends with literal double-quotes so that the YAML parser reads the double quotes
(") literally instead of interpreting these double quotes as structural YAML
markers meaning string.</p><h2 id=microsoft-windows>microsoft windows <a href=#microsoft-windows class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>On Windows the distinction between running a command and running a shell can
lead to surprises - <code>echo</code>, <code>dir</code> or <code>copy</code> are not actually stand-alone
programs, these instead are built into the Windows shell. Use
<a href=https://pypyr.io/docs/steps/shell/>pypyr.steps.shell</a> instead if you want to run a shell
command.</p><p>Generally in pypyr you can use forward slashes for paths even when you&rsquo;re on
Windows. This is pretty handy for cross-platform pipelines.</p><p>However, be aware that if you specify a relative path to your command you MUST
use backslashes in the path - e.g <code>mydir\mycmd.exe</code>.</p><p>If you specify the full absolute path you can still use forward slashes - e.g
<code>C:/mydir/mycmd.exe</code></p><p>Windows will generally automatically put known executable extensions at the end
of the file for you - so both these are equivalent:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ping 127.0.0.1
</span></span><span class=line><span class=cl>ping.exe 127.0.0.1
</span></span></code></pre></div><h2 id=invoking-python>invoking python <a href=#invoking-python class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.cmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>python -m stuff.do</span><span class=w>
</span></span></span></code></pre></div><p>If you want to invoke Python as a sub-process from pypyr, you might want to
specify the full path to the Python interpreter to avoid problems with
accidentally running a different, unexpected interpreter on your system. This is
especially relevant if you&rsquo;re using virtual environments.</p><p>See <a href=https://pypyr.io/docs/steps/python/>pypyr.steps.python</a> for details on getting the full
path to the current Python executable.</p><p>Remember you can also invoke Python code directly by using
<a href=https://pypyr.io/docs/steps/py/>pypyr.steps.py</a>, which will automatically be in the
current Python environment.</p><p>Alternatively, if you do have an external Python file you want to run, you can
just add a <code>def run_step(context)</code> function to your file and run it natively as
a pypyr step. This is described in <a href=https://pypyr.io/docs/api/step/>how to make a custom step</a>. This will also automatically execute in the current
Python environment.</p></article><section class="see-also elevation-02"><h2>see also</h2><ul><li><a href=/docs/steps/shells/>pypyr.steps.shells</a></li><li><a href=/docs/steps/cmds/>pypyr.steps.cmds</a></li><li><a href=/docs/steps/python/>pypyr.steps.python</a></li><li><a href=/docs/steps/shell/>pypyr.steps.shell</a></li></ul></section></main><aside class="grid-taxonomy elevation-02"><section class=page-taxonomy aria-label="related topics"><h6>topics</h6><ul id=topics class=small-list><li><a href=https://pypyr.io/topics/execute-external-program/ class=muted-with-hover>execute external program</a></li></ul></section><section class=page-taxonomy aria-label="related categories"><h6>categories</h6><ul id=categories class=small-list><li><a href=https://pypyr.io/categories/steps/ class=muted-with-hover>steps</a></li></ul></section></aside><aside class="grid-improve elevation-02" aria-labelledby=feedback><h6 id=feedback>feedback</h6><ul class=small-list><li><a href=https://github.com/pypyr/docs/edit/main/content/docs/steps/cmd.md class=muted-with-hover>edit me</a></li><li><a href="https://github.com/pypyr/docs/issues/new?title=docs%20issue:pypyr.steps.cmd&body=File:%20[pypyr.steps.cmd]%28https://pypyr.io/docs/steps/cmd/%29" class=muted-with-hover>report typo</a></li><li><a href="https://github.com/pypyr/pypyr/issues/new?title=Re:%20pypyr.steps.cmd&labels=bug" class=muted-with-hover>report bug!</a></li></ul></aside><div class="page-git-info elevation-02"><small class=small-block>last updated on <time datetime=2022-05-26T12:27:15+01:00>2022-05-26 12:27</time>.</small></div></div><footer class="footer elevation-01"><a href=/ class=top-nav-logo aria-label=home><img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo"></a><div class=col-1fr-centered><ul class=footer-social-links aria-label="social media links"><li><a href=https://twitter.com/pypyrpipes/ class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 400 400"><title>twitter link</title><use xlink:href="https://pypyr.io/icons/twitter-social-icon-circle-white.d715a98bf8d7170b3d2603d836ca675616731d85583c13d23ec468905e77c59a.svg#twitter-icon"/></svg></div><small>twitter</small></a></li><li><a href=https://github.com/pypyr/pypyr/ class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 32.58 31.77"><title>github link</title><use xlink:href="https://pypyr.io/icons/github-icon.778bc8065fb7e8d1e7109b270cfbd86e15e05bb16ebff30d261935e4bc1560bd.svg#github-icon"/></svg></div><small>github</small></a></li><li><a href=https://github.com/pypyr/pypyr/discussions class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 16 16"><title>discussion forum link</title><use xlink:href="https://pypyr.io/icons/discussions.a9f14951d81276183aaea73b6d616db95326f8f16350b221d9d6d48ee5a0b16e.svg#discussions-icon"/></svg></div><small>forum</small></a></li></ul><ul class=footer-notices-links aria-label="legal notices"><li><a href=/legal/privacy-notice class=muted-with-hover><small>privacy</small></a></li><li><a href=/legal/licensing class=muted-with-hover><small>licensing</small></a></li><li><a href=/press-kit class=muted-with-hover><small>press</small></a></li></ul></div></footer><div class=bottom-spacer aria-hidden=true></div><div id=disabled-state-overlay aria-hidden=true class="disabled-state-overlay hide-overlay"></div></body></html>