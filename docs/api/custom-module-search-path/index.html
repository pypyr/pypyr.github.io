<!doctype html><html lang=en dir=ltr prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>custom module name resolution | pypyr</title><meta name=description content="You can use ad hoc custom Python modules (.py files) without doing pip install first."><link rel=stylesheet href=https://pypyr.io/css/styles.min.5173637d874e012d84bb859e8f72791eb48cf798feeff3480b1db6bfa97be924.css integrity="sha256-UXNjfYdOAS2Eu4Wej3J5HrSM95j+7/NICx22v6l76SQ="><link rel=stylesheet href=https://pypyr.io/css/code-highlight.min.78f63f1d4f45beaf423efd3dc8e6914c2abdca1b5391cd91368a32efecd9d7e3.css integrity="sha256-ePY/HU9Fvq9CPv09yOaRTCq9yhtTkc2RNooy7+zZ1+M="><script defer src=https://pypyr.io/js/script.min.8c51c28efa613c3bc853b2418e260b33482af182f6ca8ebeeb825b5b8e094423.js integrity="sha256-jFHCjvphPDvIU7JBjiYLM0gq8YL2yo6+64JbW44JRCM="></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700%7cRoboto+Mono:400,400i&display=swap" rel=stylesheet><link rel=canonical href=https://pypyr.io/docs/api/custom-module-search-path/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-147150909-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-147150909-1")</script><meta property="og:description" content="You can use ad hoc custom Python modules (.py files) without doing pip install first."><meta property="og:image" content="https://pypyr.io/images/1.91x1/pypyr-taskrunner-yaml-pipeline-automation-1200x628.5aa6465b3b9d2ca8d0d5a9f794ba7f379c522a8ba503129f2a35d2479ea2452d.png"><meta property="og:image:alt" content="pypyr is an open-source task-runner for automation pipelines defined in simple human-readable yaml."><meta property="og:image:height" content="628"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:site_name" content="pypyr technical documentation"><meta property="og:title" content="How to import custom Python modules in your automation pipeline."><meta property="og:type" content="website"><meta property="og:url" content="https://pypyr.io/docs/api/custom-module-search-path/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@pypyrpipes"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@id":"https://pypyr.io/#organization","@type":"Organization","name":"pypyr","url":"https://pypyr.io/","description":"The pypyr project is a free open-source task-runner cli \u0026 python api for automation pipelines.","logo":{"@type":"ImageObject","url":"https://pypyr.io/images/pypyr-taskrunner-logo-square.63875e43ff40d8ae40e93a6043b4328b962f54f52974aaa27cedec52220de665.svg","height":112,"width":112},"sameAs":["https://github.com/pypyr/","https://twitter.com/pypyrpipes/","https://pypi.org/user/pypyr/","https://hub.docker.com/u/pypyr/","https://en.gravatar.com/pypyr/"]},{"@type":"TechArticle","author":{"@type":"Person","name":"pypyr contributor"},"articleSection":"api","dateModified":"2022-02-21T12:02:12Z","datePublished":"2021-11-15T00:00:00Z","headline":"How to import custom Python modules in your automation pipeline.","image":[{"@type":"ImageObject","url":"https://pypyr.io/images/1x1/pypyr-taskrunner-yaml-pipeline-automation-1200x1200.52764d3c6f40232b3cdc33f5b8fbaeadad56cc310c8dd5588d30828296b5290d.png","height":1200,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/4x3/pypyr-taskrunner-yaml-pipeline-automation-1200x900.e8e70443377aeb11c190835e8d2ed0c844d31a82a0c2e8a744a9999cd03e0de9.png","height":900,"width":1200},{"@type":"ImageObject","url":"https://pypyr.io/images/16x9/pypyr-taskrunner-yaml-pipeline-automation-1920x1080.cc9ae11626c8312e087058adb13bfff702162ce39c355065170c1b87850f3034.png","height":1080,"width":1920}],"inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https://pypyr.io/docs/api/custom-module-search-path/"},"publisher":{"@id":"https://pypyr.io/#organization"},"url":"https://pypyr.io/docs/api/custom-module-search-path/","wordCount":1026}]}</script><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.925deabb48d91a80924b5d04ff56d2b8f42ba1d1e1438cb7d8948cce1138208c.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.b869433d27c4679a5fbce03a8489268a539cbc781259bff14618ae2f018334e6.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.8bcd9f870e0a86445e0505ce6e816b76a40b08a06e2dcd1ec1f90c395ecbeaf6.png><link rel=manifest href=/favicons/site.3dad2bd5063ad6bc11f741ea28adf4df8b9370196f6e64af6789cf181cef05c6.webmanifest><link rel="shortcut icon" href=/favicons/favicon.4a2a3dffd965a7c571df0375e35f59307bc72adc08e3ef7021d5d5f02e6ef5a8.ico><meta name=msapplication-TileColor content="#00aba9"><meta name=msapplication-config content="/favicons/browserconfig.bbdaec7f39b7bd1f2d6bc484afdd0c7246e3af9c5b45d91198d8a3b42e024e1f.xml"><meta name=theme-color content="#121212"></head><body class=docs-grid><header class="header elevation-01"><a href=/ class=top-nav-logo aria-label=home><img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo"></a><nav class=top-nav-links aria-label="top navigation"><ul><li><a href=/docs/ class=top-active>docs</a></li><li><a href=/updates/>updates</a></li><li><a href=/topics/>topics</a></li><li><a href=https://twitter.com/pypyrpipes/><span class=top-nav-links-pre><svg viewBox="0 0 250 203.18"><title>twitter link</title><use xlink:href="https://pypyr.io/images/twitter-logo.4bee83a61c7b1a567b9a00ea1ac9388de3b16ffbffac9e228f998a5411894c59.svg#twitter-logo"/></svg></span></a></li><li><a href=https://github.com/pypyr/pypyr/><span class=top-nav-links-pre><svg viewBox="0 0 477 97.41"><title>github repo</title><use xlink:href="https://pypyr.io/images/github-mark-and-logo.5df312655c6a99a4953b544d02b13a948fa4d66bda21e772206f0ed96663f05b.svg#github-mark-and-logo"/></svg></span></a></li></ul></nav></header><button id=show-leftnav class="neutral-button icon-button primary-button"><svg class="show-leftnav-chevron"><title>open main navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg></button><nav id=leftnavmenu class="leftnavmenu elevation-03" aria-label="Primary Navigation"><button id=hide-leftnav class="neutral-button icon-button"><svg class="hide-leftnav-chevron"><title>close navigation menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg></button><ul class=leftnavroot><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>getting started</span></span></button><ul class=nested><li><a href=/docs/getting-started/>overview</a></li><li><a href=/docs/getting-started/installation/>install pypyr</a></li><li><a href=/docs/getting-started/run-your-first-pipeline/>run your first pipeline</a></li><li><a href=/docs/getting-started/basic-concepts/>basic concepts</a></li><li><a href=/docs/getting-started/variables/>variables</a></li><li><a href=/docs/getting-started/conditional-logic/>conditional logic</a></li><li><a href=/docs/getting-started/loops/>loops</a></li><li><a href=/docs/getting-started/error-handling/>error handling</a></li><li><a href=/docs/getting-started/config/>config</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>cli</span></span></button><ul class=nested><li><a href=/docs/cli/>overview</a></li><li><a href=/docs/cli/run-a-pipeline/>run a pipeline</a></li><li><a href=/docs/cli/custom-args/>custom args</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>pipelines</span></span></button><ul class=nested><li><a href=/docs/pipelines/>overview</a></li><li><a href=/docs/pipelines/pipeline-structure/>pipeline structure</a></li><li><a href=/docs/pipelines/lookup-order/>lookup order</a></li><li><a href=/docs/pipelines/shortcuts/>shortcuts</a></li><li><a href=/docs/pipelines/builtin-pipelines/>built-in pipelines</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>context parsers</span></span></button><ul class=nested><li><a href=/docs/context-parsers/>overview</a></li><li><a href=/docs/context-parsers/dict/>dict</a></li><li><a href=/docs/context-parsers/json/>json</a></li><li><a href=/docs/context-parsers/jsonfile/>jsonfile</a></li><li><a href=/docs/context-parsers/keys/>keys</a></li><li><a href=/docs/context-parsers/keyvaluepairs/>keyvaluepairs</a></li><li><a href=/docs/context-parsers/list/>list</a></li><li><a href=/docs/context-parsers/string/>string</a></li><li><a href=/docs/context-parsers/tomlfile/>tomlfile</a></li><li><a href=/docs/context-parsers/yamlfile/>yamlfile</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>decorators</span></span></button><ul class=nested><li><a href=/docs/decorators/>overview</a></li><li><a href=/docs/decorators/comment/>comment</a></li><li><a href=/docs/decorators/description/>description</a></li><li><a href=/docs/decorators/foreach/>foreach</a></li><li><a href=/docs/decorators/in/>in</a></li><li><a href=/docs/decorators/onerror/>onError</a></li><li><a href=/docs/decorators/retry/>retry</a></li><li><a href=/docs/decorators/run/>run</a></li><li><a href=/docs/decorators/skip/>skip</a></li><li><a href=/docs/decorators/swallow/>swallow</a></li><li><a href=/docs/decorators/while/>while</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span></span></button><ul class=nested><li><a href=/docs/steps/>overview</a></li><li><a href=/docs/steps/add/>add</a></li><li><a href=/docs/steps/append/>append</a></li><li><a href=/docs/steps/assert/>assert</a></li><li><a href=/docs/steps/call/>call</a></li><li><a href=/docs/steps/cmd/>cmd</a></li><li><a href=/docs/steps/configvars/>configvars</a></li><li><a href=/docs/steps/contextclear/>contextclear</a></li><li><a href=/docs/steps/contextclearall/>contextclearall</a></li><li><a href=/docs/steps/contextcopy/>contextcopy</a></li><li><a href=/docs/steps/contextmerge/>contextmerge</a></li><li><a href=/docs/steps/contextsetf/>contextsetf</a></li><li><a href=/docs/steps/debug/>debug</a></li><li><a href=/docs/steps/default/>default</a></li><li><a href=/docs/steps/echo/>echo</a></li><li><a href=/docs/steps/env/>env</a></li><li><a href=/docs/steps/envget/>envget</a></li><li><a href=/docs/steps/fetchjson/>fetchjson</a></li><li><a href=/docs/steps/fetchtoml/>fetchtoml</a></li><li><a href=/docs/steps/fetchyaml/>fetchyaml</a></li><li><a href=/docs/steps/fileformat/>fileformat</a></li><li><a href=/docs/steps/fileformatjson/>fileformatjson</a></li><li><a href=/docs/steps/fileformattoml/>fileformattoml</a></li><li><a href=/docs/steps/fileformatyaml/>fileformatyaml</a></li><li><a href=/docs/steps/fileread/>fileread</a></li><li><a href=/docs/steps/filereplace/>filereplace</a></li><li><a href=/docs/steps/filewrite/>filewrite</a></li><li><a href=/docs/steps/filewritejson/>filewritejson</a></li><li><a href=/docs/steps/filewritetoml/>filewritetoml</a></li><li><a href=/docs/steps/filewriteyaml/>filewriteyaml</a></li><li><a href=/docs/steps/glob/>glob</a></li><li><a href=/docs/steps/jsonparse/>jsonparse</a></li><li><a href=/docs/steps/jump/>jump</a></li><li><a href=/docs/steps/now/>now</a></li><li><a href=/docs/steps/nowutc/>nowutc</a></li><li><a href=/docs/steps/pathcheck/>pathcheck</a></li><li><a href=/docs/steps/py/>py</a></li><li><a href=/docs/steps/pyimport/>pyimport</a></li><li><a href=/docs/steps/pype/>pype</a></li><li><a href=/docs/steps/pypyrversion/>pypyrversion</a></li><li><a href=/docs/steps/python/>python</a></li><li><a href=/docs/steps/safeshell/>safeshell</a></li><li><a href=/docs/steps/set/>set</a></li><li><a href=/docs/steps/shell/>shell</a></li><li><a href=/docs/steps/stop/>stop</a></li><li><a href=/docs/steps/stoppipeline/>stoppipeline</a></li><li><a href=/docs/steps/stopstepgroup/>stopstepgroup</a></li><li><a href=/docs/steps/tar/>tar</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>substitutions</span></span></button><ul class=nested><li><a href=/docs/substitutions/>overview</a></li><li><a href=/docs/substitutions/format-string/>format string</a></li><li><a href=/docs/substitutions/jsonify/>jsonify</a></li><li><a href=/docs/substitutions/py-strings/>py string</a></li><li><a href=/docs/substitutions/sic-strings/>sic string</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>plugins</span></span></button><ul class=nested><li><a href=/docs/plugins/>overview</a></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>aws</span></span></button><ul class=nested><li><a href=/docs/plugins/aws/>overview</a></li><li><a href=/docs/plugins/aws/authentication/>authentication</a></li><li><a href=/docs/plugins/aws/substitutions/>substitutions</a></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span></span></button><ul class=nested><li><a href=/docs/plugins/aws/steps/>overview</a></li><li><a href=/docs/plugins/aws/steps/client/>client</a></li><li><a href=/docs/plugins/aws/steps/ecswaitprep/>ecswaitprep</a></li><li><a href=/docs/plugins/aws/steps/s3fetchjson/>s3fetchjson</a></li><li><a href=/docs/plugins/aws/steps/s3fetchyaml/>s3fetchyaml</a></li><li><a href=/docs/plugins/aws/steps/wait/>wait</a></li><li><a href=/docs/plugins/aws/steps/waitfor/>waitfor</a></li></ul></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>slack</span></span></button><ul class=nested><li><a href=/docs/plugins/slack/>overview</a></li><li><a href=/docs/plugins/slack/authentication/>authentication</a></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>steps</span></span></button><ul class=nested><li><a href=/docs/plugins/slack/steps/>overview</a></li><li><a href=/docs/plugins/slack/steps/send/>send</a></li></ul></li></ul></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron nav-chevron-down"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>api</span></span></button><ul class="nested expand"><li><a href=/docs/api/>overview</a></li><li class=currentpage><a href=/docs/api/custom-module-search-path/>custom module search path</a></li><li><a href=/docs/api/context-parser/>context parser</a></li><li><a href=/docs/api/pipeline-loader/>pipeline loader</a></li><li><a href=/docs/api/retry-backoff/>retry backoff</a></li><li><a href=/docs/api/run-pipeline/>run pipeline</a></li><li><a href=/docs/api/step/>step</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>contributing</span></span></button><ul class=nested><li><a href=/docs/contributing/>overview</a></li><li><a href=/docs/contributing/contribute-to-pypyr/>contribute to pypyr</a></li><li><a href=/docs/contributing/developers-guide/>developer's guide for pypyr</a></li></ul></li><li><button class="nav-section-chevron-title neutral-button">
<span class=nav-section-pointer><svg class="nav-chevron"><title>open or close sub-menu</title><use href="https://pypyr.io/icons/chevron-right.e586e5df0f820697b2ce08d042d0110568a2faeb11c7f0bab5a33df79dd3d6db.svg#chevron-right"/></svg><span>thank you</span></span></button><ul class=nested><li><a href=/docs/thank-you/>overview</a></li><li><a href=/docs/thank-you/built-with-hugo/>built with hugo</a></li><li><a href=/docs/thank-you/dependencies/>dependencies</a></li></ul></li></ul></nav><div class="docs-content content-grid"><ol class=breadcrumb vocab="http://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/><span property="name">pypyr</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/docs/><span property="name">docs</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/docs/api/><span property="name">api</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><span property="name">custom module name resolution</span><meta property="position" content="4"></li></ol><aside class="grid-toc elevation-02"><h6 id=table-of-contents>on this page</h6><nav id=TableOfContents><ol><li><a href=#special-characters>special characters</a></li><li><a href=#ad-hoc-modules>ad hoc modules</a><ol><li><a href=#search-paths>search paths</a></li><li><a href=#name-hiding>name hiding</a></li><li><a href=#resolve-from-current-directory-with-the-api>resolve from current directory with the API</a></li><li><a href=#changing-the-custom-module-directory>changing the custom module directory</a></li></ol></li><li><a href=#installed-packages>installed packages</a></li></ol></nav></aside><main class=grid-main><article><h1 id=reference-custom-modules-in-your-pipeline>reference custom modules in your pipeline <a href=#reference-custom-modules-in-your-pipeline class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h1><div class="admonition tip" role=figure><div class=admonition-tip-icon></div><div class=admonition-content><p>TLDR:</p><p>Custom modules resolve relative to the current pipeline.</p><p>Although you can also resolve from the current directory as a fallback, this
will make your pipeline less portable than it should be.</p><p>Prefer only using absolute names relative to the pipeline itself.</p></div></div><p>Each custom step, parser, loader & retry algo you write lives in a .py
file. In Python speak, this .py file is known as a &ldquo;module&rdquo;.</p><p>To use these modules in your pipelines, you have to refer to the module&rsquo;s
absolute name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>mystep</span><span class=w> </span><span class=c># {pipeline dir}/mystep.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>mydir.mystep</span><span class=w> </span><span class=c># {pipeline dir}/mydir/mystep.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>mydir.sub.mystep</span><span class=w> </span><span class=c># {pipeline dir}/mydir/sub/mystep.py</span><span class=w>
</span></span></span></code></pre></div><p><code>{pipeline dir}</code> is the directory on the filesystem that the pipeline is in.</p><h2 id=special-characters>special characters <a href=#special-characters class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>For an easy life, the more your directory & file names can stick to
<a href=https://www.python.org/dev/peps/pep-0008/#package-and-module-names>PEP8 package & module names</a>
the better. Simply put, avoid punctuation other than underscore _. Especially
avoid full-stops/periods (.).</p><p>Although pypyr is more flexible than the standard Python import rules - e.g you
can have <code>-</code> in directory/file names and it will work for pypyr custom modules
such as custom steps - be aware that if you have to do a standard <code>import x.y</code>/<code>from x import y</code> style statement of such modules in a custom Python
code-block it will fail.</p><h2 id=ad-hoc-modules>ad hoc modules <a href=#ad-hoc-modules class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Take <em>ad hoc</em> modules to mean modules that are on your file-system somewhere but
that are NOT installed as packages into the Python environment.</p><p>To make your life easier, pypyr adds the current directory and also the
pipeline&rsquo;s parent directory to python&rsquo;s <code>sys.path</code>. This allows you to use
ad hoc modules relative to your current pipeline&rsquo;s location WITHOUT having to
install these first.</p><p>Simply put, you can just have a .py file relative to your pipeline, and pypyr
will find it without you having to do anything extra. pypyr will also look in
your current directory,</p><p>No need to package and <code>pip install</code> your code first, you can just use your
ad hoc modules on the fly!</p><p>So assuming a directory structure like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>- mydir/
</span></span><span class=line><span class=cl>    |- astep.py
</span></span><span class=line><span class=cl>    |- mypipe.yaml
</span></span><span class=line><span class=cl>    |- mypipestuff/
</span></span><span class=line><span class=cl>        |- mystep.py
</span></span></code></pre></div><p>You can reference your custom step in the pipeline like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>astep</span><span class=w> </span><span class=c># {pipeline dir}/astep.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>mypipestuff.mystep</span><span class=w> </span><span class=c># {pipeline dir}/mypipestuff/mystep.py</span><span class=w>
</span></span></span></code></pre></div><p>And run the pipeline like this:<div class=app-window><div class=app-window-top-bar><span class=app-window-buttons><span class="circle red"></span><span class="circle yellow"></span><span class="circle green"></span></span>
<span class=app-window-title>term</span></div><div class=app-window-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ pypyr mydir/mypipe</span></span></code></pre></div></div></div></p><p>Notice that <code>astep</code> and <code>mypipestuff.mystep</code> both resolve relative to the
pipeline location itself, not the current directory.</p><h3 id=search-paths>search paths <a href=#search-paths class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>When you run pypyr from the CLI, pypyr automatically adds the current directory
($PWD) to <code>sys.path</code>, allowing you to use custom modules relative to the
current directory (without having to install your code as a package first).</p><p>For each pipeline you invoke with the builtin default file loader, pypyr also
adds the pipeline&rsquo;s parent directory to <code>sys.path</code>. This is the pipeline
directory.</p><p>The pypyr module resolution order is:</p><ol><li>published packages in the current Python environment</li><li>directory set by <code>--dir</code>/<code>py_dir</code> (for cli this is current directory by
default)</li><li>pipeline directory (for pipelines loaded with the default builtin file loader)</li><li><code>py_dir</code> if set by child pipeline on <a href=https://pypyr.io/docs/steps/pype/>pypyr.steps.pype</a></li><li>pipeline directory of any child pipelines called with <code>pypyr.steps.pype</code> with
the default builtin file loader.</li></ol><p>Note that 2 - 5 might well refer to the same directory location if the pipeline
and any child pipelines it calls are all directly in the current directory, or
some of these might be equal if different pipelines in the call-chain are in the
same directory. In this case the import system only searches that directory
once.</p><h3 id=name-hiding>name hiding <a href=#name-hiding class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>A side effect of this (and indeed any) search order is that if you have .py
files with the same name in different locations, the file found earlier in the
resolution order will mask a file with the same name later in the search order.</p><p>Assuming two <code>mystep.py</code> files at different locations like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>|- mydir/
</span></span><span class=line><span class=cl>    |- mypipe.yaml
</span></span><span class=line><span class=cl>    |- mystep.py
</span></span><span class=line><span class=cl>|- mystep.py
</span></span></code></pre></div><p>And you ran this pipeline like this:<div class=app-window><div class=app-window-top-bar><span class=app-window-buttons><span class="circle red"></span><span class="circle yellow"></span><span class="circle green"></span></span>
<span class=app-window-title>term</span></div><div class=app-window-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$ pypyr mydir/mypipe</span></span></code></pre></div></div></div></p><p>If <code>mypipe</code> references <code>mystep</code>, it will use <code>./mystep.py</code>, not
<code>mydir/mystep.py</code>, because $PWD comes before the pipeline directory in the
search order.</p><p>If you are creating reusable child pipelines that you will call from other
pipelines with <a href=https://pypyr.io/docs/steps/pype/>pypyr.steps.pype</a>, it is
therefore a good idea to put your custom code in some sort of namespace to
minimize the potential for naming clashes.</p><p>Simply put, save your custom modules inside a directory with a relatively unique
name next to your pipeline:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>|- mydir/
</span></span><span class=line><span class=cl>    |- mypipe.yaml
</span></span><span class=line><span class=cl>    |- mypipe/
</span></span><span class=line><span class=cl>        |- mystep.py
</span></span></code></pre></div><p>In the pipeline itself, you will reference <code>mypipe.mystep</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># ./mydir/mypipe.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>mypipe.mystep</span><span class=w>
</span></span></span></code></pre></div><p>In this case, we are relying on the idea that the pipeline name will be
relatively unique in the pipeline call-stack, thereby serving as a namespace for
its custom modules.</p><p>It might be tempting to think of this resource directory name as a uri and use a
full-stop/period (&ldquo;myarbdomain.com&rdquo;) - don&rsquo;t do this. See <a href=#special-characters>special character
rules</a>.</p><h3 id=resolve-from-current-directory-with-the-api>resolve from current directory with the API <a href=#resolve-from-current-directory-with-the-api class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>If you are calling pypyr from the API and you also want to
resolve ad hoc modules from the current directory like the CLI does, you have to
use the <code>py_dir</code> argument:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pypyr.pipelinerunner</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>CWD</span> <span class=o>=</span> <span class=n>Path</span><span class=o>.</span><span class=n>cwd</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pypyr</span><span class=o>.</span><span class=n>pipelinerunner</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>pipeline_name</span><span class=o>=</span><span class=s1>&#39;pipeline-name&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>py_dir</span><span class=o>=</span><span class=n>CWD</span><span class=p>)</span>
</span></span></code></pre></div><p>You do NOT need to specify <code>py_dir</code> if you only want to resolve modules
relative to the pipeline itself, because the default file-loader will add the
pipeline&rsquo;s parent directory to <code>sys.path</code> for you when it finds the pipeline.</p><h3 id=changing-the-custom-module-directory>changing the custom module directory <a href=#changing-the-custom-module-directory class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>If your pipeline&rsquo;s custom ad hoc modules are in a different directory, you can
use the <code>--dir</code> switch from the CLI:</p><div class=app-window><div class=app-window-top-bar><span class=app-window-buttons><span class="circle red"></span><span class="circle yellow"></span><span class="circle green"></span></span>
<span class=app-window-title>term</span></div><div class=app-window-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># run ./mydir/mypipe.yaml
</span></span><span class=line><span class=cl># look for modules in /path/to/modules
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ pypyr --dir /path/to/modules mydir/mypipe</span></span></code></pre></div></div></div><p>In the API, you achieve the same thing with the <code>py_dir</code> argument of the <code>run()</code>
function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pypyr.pipelinerunner</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># run ./pipeline-name.yaml</span>
</span></span><span class=line><span class=cl><span class=c1># look for modules in /path/to/modules</span>
</span></span><span class=line><span class=cl><span class=n>pypyr</span><span class=o>.</span><span class=n>pipelinerunner</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>pipeline_name</span><span class=o>=</span><span class=s1>&#39;pipeline-name&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>py_dir</span><span class=o>=</span><span class=s1>&#39;/path/to/modules&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=installed-packages>installed packages <a href=#installed-packages class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>You can reference any packages you&rsquo;ve installed in your current python
environment.</p><p>You normally install a package in python with <code>$ pip install mypackage</code>.</p><p>You reference modules inside packages by their absolute name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>mypackage.mystep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mypackage.sub.mystep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>comment</span><span class=p>:</span><span class=w> </span><span class=l>loop over a custom step in a package</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>foreach</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>one, two]</span><span class=w>
</span></span></span></code></pre></div><p>If you want to install your own custom code as package, here is the <a href=https://setuptools.pypa.io/en/latest/userguide/quickstart.html>official
quick-start</a> for
how to do so with PyPa&rsquo;s <code>setuptools</code>.</p></article><section class="see-also elevation-02"><h2>see also</h2><ul><li><a href=/docs/api/retry-backoff/>custom retry backoff</a></li><li><a href=/docs/api/>api</a></li><li><a href=/docs/api/context-parser/>custom context parser</a></li><li><a href=/docs/api/pipeline-loader/>custom pype loader</a></li><li><a href=/docs/api/step/>custom step</a></li></ul></section></main><aside class="grid-taxonomy elevation-02"><section class=page-taxonomy aria-label="related topics"><h6>topics</h6><ul id=topics class=small-list><li><a href=https://pypyr.io/topics/custom-code/ class=muted-with-hover>custom code</a></li></ul></section></aside><aside class="grid-improve elevation-02" aria-labelledby=feedback><h6 id=feedback>feedback</h6><ul class=small-list><li><a href=https://github.com/pypyr/docs/edit/main/content/docs/api/custom-module-search-path.md class=muted-with-hover>edit me</a></li><li><a href="https://github.com/pypyr/docs/issues/new?title=docs%20issue:custom%20module%20name%20resolution&body=File:%20[custom%20module%20name%20resolution]%28https://pypyr.io/docs/api/custom-module-search-path/%29" class=muted-with-hover>report typo</a></li><li><a href="https://github.com/pypyr/pypyr/issues/new?title=Re:%20custom%20module%20name%20resolution&labels=bug" class=muted-with-hover>report bug!</a></li></ul></aside><div class="page-git-info elevation-02"><small class=small-block>last updated on <time datetime=2022-02-21T12:02:12Z>2022-02-21 12:02</time>.</small></div></div><footer class="footer elevation-01"><a href=/ class=top-nav-logo aria-label=home><img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo"></a><div class=col-1fr-centered><ul class=footer-social-links aria-label="social media links"><li><a href=https://twitter.com/pypyrpipes/ class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 400 400"><title>twitter link</title><use xlink:href="https://pypyr.io/icons/twitter-social-icon-circle-white.d715a98bf8d7170b3d2603d836ca675616731d85583c13d23ec468905e77c59a.svg#twitter-icon"/></svg></div><small>twitter</small></a></li><li><a href=https://github.com/pypyr/pypyr/ class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 32.58 31.77"><title>github link</title><use xlink:href="https://pypyr.io/icons/github-icon.778bc8065fb7e8d1e7109b270cfbd86e15e05bb16ebff30d261935e4bc1560bd.svg#github-icon"/></svg></div><small>github</small></a></li><li><a href=https://github.com/pypyr/pypyr/discussions class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 16 16"><title>discussion forum link</title><use xlink:href="https://pypyr.io/icons/discussions.a9f14951d81276183aaea73b6d616db95326f8f16350b221d9d6d48ee5a0b16e.svg#discussions-icon"/></svg></div><small>forum</small></a></li></ul><ul class=footer-notices-links aria-label="legal notices"><li><a href=/legal/privacy-notice class=muted-with-hover><small>privacy</small></a></li><li><a href=/legal/licensing class=muted-with-hover><small>licensing</small></a></li><li><a href=/press-kit class=muted-with-hover><small>press</small></a></li></ul></div></footer><div class=bottom-spacer aria-hidden=true></div><div id=disabled-state-overlay aria-hidden=true class="disabled-state-overlay hide-overlay"></div></body></html>