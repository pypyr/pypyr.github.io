<!doctype html><html lang=en dir=ltr prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>filesystem | pypyr</title>
<meta name=description content="Read, write and format files as part of your automation pipeline tasks."><link rel=stylesheet href=https://pypyr.io/css/styles.min.c6861cca83a9cbf460f008c1b618436088b18489d2a15c632d23afd3a3120ce8.css integrity="sha256-xoYcyoOpy/Rg8AjBthhDYIixhInSoVxjLSOv06MSDOg="><link rel=stylesheet href=https://pypyr.io/css/code-highlight.min.78f63f1d4f45beaf423efd3dc8e6914c2abdca1b5391cd91368a32efecd9d7e3.css integrity="sha256-ePY/HU9Fvq9CPv09yOaRTCq9yhtTkc2RNooy7+zZ1+M="><script defer src=https://pypyr.io/js/script.min.91263db5f27c955af051b264cd9eda63102d476e77c28fb44032a2432be2cfc1.js integrity="sha256-kSY9tfJ8lVrwUbJkzZ7aYxAtR253wo+0QDKiQyviz8E="></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700%7cRoboto+Mono:400,400i&amp;display=swap" rel=stylesheet><link rel=canonical href=https://pypyr.io/topics/filesystem/><link rel=alternate type=application/rss+xml href=https://pypyr.io/topics/filesystem/index.xml title=pypyr><script async src="https://www.googletagmanager.com/gtag/js?id=UA-147150909-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-147150909-1")</script><meta property="og:description" content="Read, write and format files as part of your automation pipeline tasks."><meta property="og:image" content="https://pypyr.io/images/1.91x1/pypyr-taskrunner-yaml-pipeline-automation-1200x628.5aa6465b3b9d2ca8d0d5a9f794ba7f379c522a8ba503129f2a35d2479ea2452d.png"><meta property="og:image:alt" content="pypyr is an open-source task-runner for automation pipelines defined in simple human-readable yaml."><meta property="og:image:height" content="628"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:site_name" content="pypyr technical documentation"><meta property="og:title" content="Work with files & paths in a task-runner automation pipeline."><meta property="og:type" content="website"><meta property="og:url" content="https://pypyr.io/topics/filesystem/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@pypyrpipes"><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.925deabb48d91a80924b5d04ff56d2b8f42ba1d1e1438cb7d8948cce1138208c.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.b869433d27c4679a5fbce03a8489268a539cbc781259bff14618ae2f018334e6.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.8bcd9f870e0a86445e0505ce6e816b76a40b08a06e2dcd1ec1f90c395ecbeaf6.png><link rel=manifest href=/favicons/site.3dad2bd5063ad6bc11f741ea28adf4df8b9370196f6e64af6789cf181cef05c6.webmanifest><link rel="shortcut icon" href=/favicons/favicon.4a2a3dffd965a7c571df0375e35f59307bc72adc08e3ef7021d5d5f02e6ef5a8.ico><meta name=msapplication-TileColor content="#00aba9"><meta name=msapplication-config content="/favicons/browserconfig.bbdaec7f39b7bd1f2d6bc484afdd0c7246e3af9c5b45d91198d8a3b42e024e1f.xml"><meta name=theme-color content="#121212"></head><body class=header-content-footer-grid><header class="header elevation-01"><a href=/ class=top-nav-logo aria-label=home><img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo"></a><nav class=top-nav-links aria-label="top navigation"><ul><li><a href=/docs/>docs</a></li><li><a href=/updates/>updates</a></li><li><a href=/topics/ class=top-active>topics</a></li><li><a href=https://twitter.com/pypyrpipes/><span class=top-nav-links-pre><svg viewBox="0 0 250 203.18"><title>twitter link</title><use xlink:href="https://pypyr.io/images/twitter-logo.4bee83a61c7b1a567b9a00ea1ac9388de3b16ffbffac9e228f998a5411894c59.svg#twitter-logo"/></svg></span></a></li><li><a href=https://github.com/pypyr/pypyr/><span class=top-nav-links-pre><svg viewBox="0 0 477 97.41"><title>github repo</title><use xlink:href="https://pypyr.io/images/github-mark-and-logo.5df312655c6a99a4953b544d02b13a948fa4d66bda21e772206f0ed96663f05b.svg#github-mark-and-logo"/></svg></span></a></li></ul></nav></header><div class=body-content><div class=content-grid-centered><ol class=breadcrumb vocab="http://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/><span property="name">pypyr</span></a>
<meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" href=https://pypyr.io/topics/><span property="name">topics</span></a>
<meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><span property="name">filesystem</span>
<meta property="position" content="3"></li></ol><aside class="grid-toc elevation-02"><h6 id=table-of-contents>on this page</h6><nav id=TableOfContents><ol><li><a href=#cross-platform-paths>cross-platform paths</a></li><li><a href=#encoding>encoding</a><ol><li><a href=#steps>steps</a><ol><li><a href=#in-out-steps>in-out steps</a></li></ol></li><li><a href=#context-parsers>context parsers</a></li><li><a href=#default-encoding>default encoding</a></li></ol></li><li><a href=#filesystem-operations>filesystem operations</a></li></ol></nav></aside><main class=grid-main><article class=width-min-line-length><h1 id=filesystem>filesystem <a href=#filesystem class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h1><p>pypyr has many ready-made functions to read, write & format files on the
filesystem.</p><p>You can convert between text, json, yaml & toml formats without you having to
write code. This is especially handy when you&rsquo;re generating configuration or
template files on-the-fly that you want to inject into other tools that you are
automating with pypyr.</p><h2 id=cross-platform-paths>cross-platform paths <a href=#cross-platform-paths class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>Windows users, you can specify paths with / or \ as directory
separator. pypyr will resolve either correctly for you. Pretty much all
platforms except MS Windows use /.</p><p>When you&rsquo;re working with files and you want to have a cross-platform compatible
pipeline and you&rsquo;re using relative paths, front-slash / is the way to go.</p><h2 id=encoding>encoding <a href=#encoding class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><p>pypyr will use the platform&rsquo;s default encoding to deal with text-based files.
This is <code>utf-8</code> for most sensible systems, but be aware on Windows it&rsquo;s still
<code>cp1252</code>.</p><h3 id=steps>steps <a href=#steps class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>All steps that work with files have an <code>encoding</code> input where you can override
the default and explicitly set the encoding:</p><div class=highlight-container><button type=button class=clipboard-button><svg viewBox="0 0 64 64" class="copy-icon"><use xlink:href="https://pypyr.io/icons/copy-icon.fc663e18db7b6a14d36a19370a76511207ffba9535d99ae0dc20df5879dbd2ba.svg#copy-icon"/></svg><svg viewBox="0 0 64 64" class="checkmark-icon"><use xlink:href="https://pypyr.io/icons/checkmark-icon.479fb2cc7eb72eb756a58711a31e7ea4469b65dbf9c16700e827d9f20531d5c5.svg#checkmark-icon"/></svg></button><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pypyr.steps.filewrite</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>in</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>fileWrite</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>out/utf8-example.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>payload</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;€ ∮ E⋅da = Q,  n → ∞, ∑ f(i) = ∏ g(i), ∀x∈ℝ: ⌈x⌉ = −⌊−x⌋, α ∧ ¬β = ¬(¬α ∨ β)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>encoding</span><span class=p>:</span><span class=w> </span><span class=l>utf-8</span></span></span></code></pre></div></div><p>See here for a <a href=https://docs.python.org/3/library/codecs.html#standard-encodings>list of available encodings</a>.</p><p>You cannot set encoding in binary mode.</p><h4 id=in-out-steps>in-out steps <a href=#in-out-steps class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h4><p>All steps with an <code>in</code> and <code>out</code> input allow you to override the default
encoding with three possible inputs:</p><ul><li><code>encoding</code> - set the encoding for both in + out.</li><li><code>encodingIn</code> - set the encoding for the in file.</li><li><code>encodingOut</code> - set the encoding for the out file.</li></ul><p>These are all the &ldquo;format&rdquo; and &ldquo;replace&rdquo; steps.</p><p>You can convert files between different encodings by setting a different
encoding for the input than the output.</p><p>If you don&rsquo;t specify <code>encodingIn</code> pypyr will default to the value of <code>encoding</code>
for the input file.</p><p>If you don&rsquo;t specify <code>encodingOut</code> pypyr will default to the value of <code>encoding</code>
for the output file.</p><p>If you did not specify <code>encoding</code> either, pypyr will use the <a href=#default-encoding>default
encoding</a>.</p><h3 id=context-parsers>context parsers <a href=#context-parsers class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>The file-based context parsers always use the default encoding when reading
input files. This is the case when you:</p><ul><li><a href=https://pypyr.io/docs/context-parsers/jsonfile/>initialize variables from a json file</a></li><li><a href=https://pypyr.io/docs/context-parsers/yamlfile/>initialize variables from a yaml file</a></li></ul><p>A <a href=https://pypyr.io/docs/context-parsers/tomlfile/>toml file</a> must always be in
<code>utf-8</code>, per the <a href=https://toml.io/en/latest#spec>TOML Spec</a>.</p><h3 id=default-encoding>default encoding <a href=#default-encoding class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h3><p>The platform default is <code>utf-8</code> for most systems, but be aware on Windows it&rsquo;s
still <code>cp1252</code>. To check your platform&rsquo;s default encoding, do:</p><div class=highlight-container><button type=button class=clipboard-button><svg viewBox="0 0 64 64" class="copy-icon"><use xlink:href="https://pypyr.io/icons/copy-icon.fc663e18db7b6a14d36a19370a76511207ffba9535d99ae0dc20df5879dbd2ba.svg#copy-icon"/></svg><svg viewBox="0 0 64 64" class="checkmark-icon"><use xlink:href="https://pypyr.io/icons/checkmark-icon.479fb2cc7eb72eb756a58711a31e7ea4469b65dbf9c16700e827d9f20531d5c5.svg#checkmark-icon"/></svg></button><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>locale</span>
</span></span><span class=line><span class=cl><span class=n>locale</span><span class=o>.</span><span class=n>getpreferredencoding</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span></span></span></code></pre></div></div><p>If you&rsquo;re getting annoyed with having to change the encoding on each step, you
can change the default if you either:</p><ul><li>Set pypyr&rsquo;s <a href=https://pypyr.io/docs/getting-started/config/#default_encoding>default encoding in config</a>.<ul><li>This changes the encoding just for pypyr.</li></ul></li><li>Set Python to run in <code>utf-8</code> mode.<ul><li>See <a href=https://www.python.org/dev/peps/pep-0540/>PEP 0540</a>.</li><li>This sets the default encoding to <code>utf-8</code> for your entire Python environment.</li></ul></li><li>Set Python encoding to something other than <code>utf-8</code>.<ul><li>Maybe don&rsquo;t do this.</li><li>Check the Python docs if you want to go this route.</li></ul></li></ul><p>If you explicitly set <code>encoding</code> on any <a href=#filesystem-operations>filesystem step</a> it will override the default for that particular
step.</p><div class="admonition tip" role=figure><div class=admonition-tip-icon></div><div class=admonition-content><p>Windows users, it <em>might</em> be an idea to set your over-all
Python runtime to use <code>utf-8</code> like all other modern platforms do. Then you
wouldn&rsquo;t need to worry about any of this.</p><p>See <a href=https://www.python.org/dev/peps/pep-0540/>PEP 0540</a>.</p><p>TLDR; Set the environment variable <code>PYTHONUTF8</code> to <code>1</code>.</p></div></div><h2 id=filesystem-operations>filesystem operations <a href=#filesystem-operations class=headline-anchor aria-label=anchor><svg class="permalink"><title>permalink</title><use href="https://pypyr.io/icons/external-link.054f8ebb57944b2bc52ea4f0ecd16197.svg#external-link"/></svg></a></h2><table vocab="http://schema.org/" typeof="ItemList"><tr><th>title</th><th>description</th></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fetchjson/ property="url">fetchjson</a><meta property="position" content="1"></td><td>Load json file into pypyr context.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fetchtoml/ property="url">fetchtoml</a><meta property="position" content="2"></td><td>Load toml file into pypyr context.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fetchyaml/ property="url">fetchyaml</a><meta property="position" content="3"></td><td>Load yaml file into pypyr context.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fileformat/ property="url">fileformat</a><meta property="position" content="4"></td><td>Find & replace substitution {tokens} in any file.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fileformatjson/ property="url">fileformatjson</a><meta property="position" content="5"></td><td>Find & replace substitution {tokens} in a json file.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fileformattoml/ property="url">fileformattoml</a><meta property="position" content="6"></td><td>Find & replace substitution {tokens} in a toml file.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fileformatyaml/ property="url">fileformatyaml</a><meta property="position" content="7"></td><td>Find & replace substitution {tokens} in a yaml file.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/fileread/ property="url">fileread</a><meta property="position" content="8"></td><td>Read file into pypyr context.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/filereplace/ property="url">filereplace</a><meta property="position" content="9"></td><td>Find & replace any arbitrary search strings in a file.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/filewrite/ property="url">filewrite</a><meta property="position" content="10"></td><td>Write payload to file.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/filewritejson/ property="url">filewritejson</a><meta property="position" content="11"></td><td>Write payload to file in json format.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/filewritetoml/ property="url">filewritetoml</a><meta property="position" content="12"></td><td>Write payload to file in toml format.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/filewriteyaml/ property="url">filewriteyaml</a><meta property="position" content="13"></td><td>Write payload to file in yaml format.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/glob/ property="url">glob</a><meta property="position" content="14"></td><td>Get paths from glob expression.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/context-parsers/jsonfile/ property="url">jsonfile</a><meta property="position" content="15"></td><td>Put json file into context from a cli arg path input.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/steps/pathcheck/ property="url">pathcheck</a><meta property="position" content="16"></td><td>Check if paths exist on filesystem.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/context-parsers/tomlfile/ property="url">tomlfile</a><meta property="position" content="17"></td><td>Load toml file into context from a cli arg path input.</td></tr><tr property="itemListElement" typeof="ListItem"><td><a href=https://pypyr.io/docs/context-parsers/yamlfile/ property="url">yamlfile</a><meta property="position" content="18"></td><td>Put yaml file into context from a cli arg path input.</td></tr></table></article></main><aside class="grid-improve elevation-02" aria-labelledby=feedback><h6 id=feedback>feedback</h6><ul class=small-list><li><a href=https://github.com/pypyr/docs/edit/main/content/topics/filesystem/_index.md class=muted-with-hover>edit me</a></li><li><a href="https://github.com/pypyr/docs/issues/new?title=docs%20issue:filesystem&amp;body=File:%20[filesystem]%28https://pypyr.io/topics/filesystem/%29" class=muted-with-hover>report typo</a></li><li><a href="https://github.com/pypyr/pypyr/issues/new?title=Re:%20filesystem&amp;labels=bug" class=muted-with-hover>report bug!</a></li></ul></aside><div class="page-git-info elevation-02"><small class=small-block>last updated on <time datetime=2022-03-07T15:01:19Z>2022-03-07 15:01</time>.</small></div></div></div><footer class="footer elevation-01"><a href=/ class=top-nav-logo aria-label=home><img class=top-nav-logo-img src=https://pypyr.io/images/pypyr-logotype.2c9aa98c472f0ea8d436597c26ef1b0f042624ee19cdf69bcb89ac0025d146c4.svg alt="pypyr logo"></a><div class=col-1fr-centered><ul class=footer-social-links aria-label="social media links"><li><a href=https://twitter.com/pypyrpipes/ class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 400 400"><title>twitter link</title><use xlink:href="https://pypyr.io/icons/twitter-social-icon-circle-white.d715a98bf8d7170b3d2603d836ca675616731d85583c13d23ec468905e77c59a.svg#twitter-icon"/></svg></div><small>twitter</small></a></li><li><a href=https://github.com/pypyr/pypyr/ class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 32.58 31.77"><title>github link</title><use xlink:href="https://pypyr.io/icons/github-icon.778bc8065fb7e8d1e7109b270cfbd86e15e05bb16ebff30d261935e4bc1560bd.svg#github-icon"/></svg></div><small>github</small></a></li><li><a href=https://github.com/pypyr/pypyr/discussions class=footer-social-link><div class=footer-social-links-pre><svg viewBox="0 0 16 16"><title>discussion forum link</title><use xlink:href="https://pypyr.io/icons/discussions.a9f14951d81276183aaea73b6d616db95326f8f16350b221d9d6d48ee5a0b16e.svg#discussions-icon"/></svg></div><small>forum</small></a></li></ul><ul class=footer-notices-links aria-label="legal notices"><li><a href=/legal/privacy-notice class=muted-with-hover><small>privacy</small></a></li><li><a href=/legal/licensing class=muted-with-hover><small>licensing</small></a></li><li><a href=/press-kit class=muted-with-hover><small>press</small></a></li></ul></div></footer></body></html>